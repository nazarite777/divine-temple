<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Divine Discernment Temple</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --bg-primary: #0A0E27;
            --accent-purple: #8B5CF6;
            --accent-gold: #F59E0B;
            --accent-blue: #3B82F6;
            --accent-green: #10B981;
            --text-primary: #FFFFFF;
            --text-secondary: #A1A1AA;
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0A0E27 0%, #1a1f3a 50%, #0A0E27 100%);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        .temple-3d {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 1;
            pointer-events: none;
        }

        .modern-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            backdrop-filter: blur(20px);
            background: rgba(10, 14, 39, 0.8);
            border-bottom: 1px solid var(--glass-border);
            padding: 1.5rem 2rem;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            font-weight: 700;
            background: linear-gradient(135deg, #F59E0B, #8B5CF6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .user-status {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.5rem 1rem;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--accent-purple), var(--accent-gold));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }

        .stats-mini {
            display: flex;
            gap: 1.5rem;
            font-size: 0.85rem;
        }

        .portal-container {
            max-width: 1400px;
            margin: 120px auto 4rem;
            padding: 0 2rem;
        }

        .portal-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .portal-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 2.5rem 2rem;
            cursor: pointer;
            transition: all 0.4s;
            position: relative;
        }

        .portal-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--accent-purple), var(--accent-gold));
            opacity: 0;
            transition: opacity 0.3s;
        }

        .portal-card:hover {
            transform: translateY(-8px);
            border-color: rgba(139, 92, 246, 0.5);
            box-shadow: 0 20px 60px rgba(139, 92, 246, 0.3);
        }

        .portal-card:hover::before {
            opacity: 1;
        }

        .portal-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .portal-card h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .portal-card p {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .chamber-panel {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: var(--bg-primary);
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s;
            overflow-y: auto;
        }

        .chamber-panel.open {
            opacity: 1;
            visibility: visible;
        }

        .chamber-wrapper {
            max-width: 900px;
            margin: 0 auto;
            padding: 6rem 2rem 4rem;
        }

        .chamber-header-modern {
            text-align: center;
            margin-bottom: 3rem;
            padding: 3rem 2rem;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
        }

        .chamber-title {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #F59E0B, #8B5CF6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .reflection-section {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .reflection-textarea {
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 1rem;
            color: var(--text-primary);
            font-family: 'Inter', sans-serif;
            min-height: 120px;
            resize: vertical;
        }

        .btn-modern {
            padding: 1rem 2rem;
            background: linear-gradient(135deg, var(--accent-purple), var(--accent-blue));
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-modern:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 24px rgba(139, 92, 246, 0.4);
        }

        .btn-modern:active {
            transform: translateY(0);
        }

        .btn-outline {
            background: transparent;
            border: 1px solid var(--glass-border);
        }

        .close-btn {
            position: fixed;
            top: 1.5rem;
            right: 2rem;
            width: 48px;
            height: 48px;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 2100;
            font-size: 1.5rem;
        }

        .oracle-card {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(59, 130, 246, 0.2));
            border: 1px solid var(--accent-purple);
            border-radius: 20px;
            padding: 2.5rem;
            text-align: center;
            margin-bottom: 2rem;
        }

        .oracle-quote {
            font-family: 'Playfair Display', serif;
            font-size: 1.4rem;
            line-height: 1.8;
            margin: 1.5rem 0;
            font-style: italic;
        }

        @media (max-width: 768px) {
            .portal-grid { grid-template-columns: 1fr; }
            .stats-mini { display: none; }
        }
    </style>
</head>
<body>
    <div class="animated-bg"></div>
    <div class="temple-3d" id="temple-3d"></div>

    <div class="modern-header">
        <div class="header-content">
            <div class="logo">Divine Discernment</div>
            <div class="user-status">
                <div class="stats-mini">
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <span>üèõÔ∏è</span>
                        <span id="header-chambers">0/9</span>
                    </div>
                </div>
                <div class="user-info">
                    <div class="user-avatar">üôè</div>
                    <div style="font-weight: 600; font-size: 0.9rem;">Sacred Seeker</div>
                </div>
                <button class="btn-modern" id="music-btn" onclick="toggleBackgroundMusic()" style="padding: 0.5rem 1rem; font-size: 0.85rem;">üéµ Music</button>
            </div>
        </div>
    </div>

    <div class="portal-container" id="portal-container">
        <div style="text-align: center; margin-bottom: 3rem;">
            <h1 style="font-family: 'Playfair Display', serif; font-size: 3rem; font-weight: 700; margin-bottom: 1rem;">Choose Your Path</h1>
            <p style="color: var(--text-secondary); font-size: 1.1rem;">Select a portal to begin your sacred journey</p>
        </div>

        <div class="portal-grid">
            <div class="portal-card" onclick="openOracle()">
                <div class="portal-icon">üîÆ</div>
                <h3>Daily Oracle</h3>
                <p>Receive divine wisdom and guidance for your journey each day.</p>
            </div>

            <div class="portal-card" onclick="openChambers()">
                <div class="portal-icon">üèõÔ∏è</div>
                <h3>Sacred Chambers</h3>
                <p>Nine chambers of reflection and inner guidance.</p>
            </div>

            <div class="portal-card" onclick="openManifestation()">
                <div class="portal-icon">üéØ</div>
                <h3>Manifestation Board</h3>
                <p>Write your desires, track prayers, witness divine timing.</p>
            </div>

            <div class="portal-card" onclick="openBreathing()">
                <div class="portal-icon">üå¨Ô∏è</div>
                <h3>Breath Work</h3>
                <p>Guided breathing exercises to center your energy.</p>
            </div>

            <div class="portal-card" onclick="openMeditation()">
                <div class="portal-icon">üßò</div>
                <h3>Meditation Space</h3>
                <p>Guided meditation timer and mindfulness practice.</p>
            </div>

            <div class="portal-card" onclick="openMoon()">
                <div class="portal-icon">üåô</div>
                <h3>Cosmic Timing</h3>
                <p>Track moon phases and align with celestial cycles.</p>
            </div>

            <div class="portal-card" onclick="openCalendar()">
                <div class="portal-icon">üìÖ</div>
                <h3>Progress Tracker</h3>
                <p>Track your journey, build streaks, unlock achievements.</p>
            </div>

            <div class="portal-card" onclick="openLibrary()">
                <div class="portal-icon">üìö</div>
                <h3>Sacred Library</h3>
                <p>Access the complete book and workbook.</p>
            </div>
        </div>
    </div>

    <!-- Chambers Panel -->
    <div class="chamber-panel" id="chambers-panel">
        <div class="close-btn" onclick="closePanel('chambers-panel')">‚úï</div>
        <div class="chamber-wrapper" id="chamber-content"></div>
    </div>

    <!-- Meditation Panel -->
    <div class="chamber-panel" id="meditation-panel">
        <div class="close-btn" onclick="closePanel('meditation-panel')">‚úï</div>
        <div class="chamber-wrapper" style="max-width: 600px; text-align: center;">
            <div class="chamber-header-modern">
                <div style="display: inline-block; padding: 0.5rem 1rem; background: linear-gradient(135deg, var(--accent-purple), var(--accent-blue)); border-radius: 20px; font-size: 0.85rem; font-weight: 600; margin-bottom: 1rem;">Meditation Space</div>
                <h2 class="chamber-title">Sacred Practice</h2>
                <p style="color: var(--text-secondary); font-size: 1.1rem;">Guided meditation timer</p>
            </div>

            <div class="reflection-section">
                <h3 style="font-family: 'Playfair Display', serif; font-size: 1.5rem; margin-bottom: 1.5rem; color: var(--accent-gold);">üßò Choose Duration</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 1rem; margin: 1.5rem 0;">
                    <div style="padding: 1rem; background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 12px; cursor: pointer; transition: all 0.3s;" onclick="setMeditationDuration(5)">5 min</div>
                    <div style="padding: 1rem; background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 12px; cursor: pointer; transition: all 0.3s;" class="active" onclick="setMeditationDuration(10)">10 min</div>
                    <div style="padding: 1rem; background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 12px; cursor: pointer; transition: all 0.3s;" onclick="setMeditationDuration(15)">15 min</div>
                    <div style="padding: 1rem; background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 12px; cursor: pointer; transition: all 0.3s;" onclick="setMeditationDuration(20)">20 min</div>
                </div>

                <div style="font-size: 5rem; font-weight: 300; margin: 3rem 0; background: linear-gradient(135deg, #F59E0B, #8B5CF6); -webkit-background-clip: text; -webkit-text-fill-color: transparent;" id="meditation-timer">10:00</div>

                <div style="display: flex; gap: 1rem; justify-content: center; margin: 2rem 0;">
                    <button class="btn-modern" id="meditation-start-btn" onclick="startMeditation()">‚ñ∂ Start</button>
                    <button class="btn-modern btn-outline" id="meditation-pause-btn" onclick="pauseMeditation()" style="display: none;">‚è∏ Pause</button>
                    <button class="btn-modern btn-outline" onclick="resetMeditation()">‚Ü∫ Reset</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Calendar Panel -->
    <div class="chamber-panel" id="calendar-panel">
        <div class="close-btn" onclick="closePanel('calendar-panel')">‚úï</div>
        <div class="chamber-wrapper" style="max-width: 1200px;">
            <div class="chamber-header-modern">
                <div style="display: inline-block; padding: 0.5rem 1rem; background: linear-gradient(135deg, var(--accent-purple), var(--accent-blue)); border-radius: 20px; font-size: 0.85rem; font-weight: 600; margin-bottom: 1rem;">Progress Tracker</div>
                <h2 class="chamber-title">Your Sacred Journey</h2>
                <p style="color: var(--text-secondary); font-size: 1.1rem;">Enoch Calendar (364 days) - Begins Spring Equinox ‚Ä¢ Today Auto-Tracked</p>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin: 2rem 0;">
                <div style="background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 16px; padding: 1.5rem;">
                    <div style="color: var(--text-secondary); font-size: 0.85rem; margin-bottom: 0.5rem;">Chambers Completed</div>
                    <div style="font-size: 2rem; font-weight: 700; background: linear-gradient(135deg, #F59E0B, #8B5CF6); -webkit-background-clip: text; -webkit-text-fill-color: transparent;" id="stat-chambers">0/9</div>
                </div>
                <div style="background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 16px; padding: 1.5rem;">
                    <div style="color: var(--text-secondary); font-size: 0.85rem; margin-bottom: 0.5rem;">Days Logged</div>
                    <div style="font-size: 2rem; font-weight: 700; background: linear-gradient(135deg, #F59E0B, #8B5CF6); -webkit-background-clip: text; -webkit-text-fill-color: transparent;" id="stat-days">0</div>
                </div>
                <div style="background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 16px; padding: 1.5rem;">
                    <div style="color: var(--text-secondary); font-size: 0.85rem; margin-bottom: 0.5rem;">Current Enoch Day</div>
                    <div style="font-size: 2rem; font-weight: 700; background: linear-gradient(135deg, #F59E0B, #8B5CF6); -webkit-background-clip: text; -webkit-text-fill-color: transparent;" id="stat-enoch-day">1/364</div>
                </div>
            </div>

            <div style="background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(245, 158, 11, 0.1)); border: 1px solid var(--accent-purple); border-radius: 16px; padding: 1.5rem; margin-bottom: 2rem; text-align: center;">
                <div style="font-size: 1rem; font-weight: 600; color: var(--accent-gold); margin-bottom: 0.5rem;">üå∏ Enoch Calendar System</div>
                <div style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.6;">
                    364-day sacred calendar ‚Ä¢ Begins Spring Equinox (March 20) ‚Ä¢ 12 months, 4 quarters (30-30-31) ‚Ä¢ Always starts Wednesday ‚Ä¢ Pure divine timing
                </div>
            </div>

            <div style="background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 20px; padding: 2rem;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <div style="font-size: 1.5rem; font-weight: 600; font-family: 'Playfair Display', serif;" id="calendar-month">Month 1</div>
                    <div style="display: flex; gap: 1rem;">
                        <button style="width: 40px; height: 40px; background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 10px; color: white; cursor: pointer;" onclick="prevMonth()">‚Äπ</button>
                        <button style="width: 40px; height: 40px; background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 10px; color: white; cursor: pointer;" onclick="nextMonth()">‚Ä∫</button>
                    </div>
                </div>
                <div style="text-align: center; margin-bottom: 1rem; font-size: 0.85rem; color: var(--text-secondary);">üìÖ Today is auto-tracked from Spring Equinox ‚Ä¢ Click any day to log practices</div>
                <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 0.5rem;" id="calendar-grid"></div>
            </div>
        </div>
    </div>

    <!-- Daily Log Modal -->
    <div style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(10px); display: none; align-items: center; justify-content: center; z-index: 3000;" id="daily-log-modal">
        <div style="max-width: 600px; width: 90%; max-height: 85vh; overflow-y: auto; background: var(--glass-bg); backdrop-filter: blur(30px); border: 1px solid var(--glass-border); border-radius: 24px; padding: 2.5rem;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                <div>
                    <h3 style="font-family: 'Playfair Display', serif; font-size: 1.8rem; color: var(--accent-gold);" id="log-date-title">Day Log</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem;">Track your spiritual practices</p>
                </div>
                <button onclick="closeDailyLog()" style="background: none; border: none; color: var(--text-primary); font-size: 2rem; cursor: pointer;">‚úï</button>
            </div>

            <div id="practice-list" style="display: grid; gap: 1rem; margin: 1.5rem 0;"></div>

            <div style="margin-top: 2rem;">
                <label style="display: block; font-weight: 500; margin-bottom: 0.75rem;">Daily Reflection</label>
                <textarea id="daily-reflection" class="reflection-textarea" placeholder="What insights did you receive today?" style="min-height: 100px;"></textarea>
            </div>

            <button class="btn-modern" onclick="saveDailyLog()" style="width: 100%; margin-top: 2rem;">üíæ Save Daily Log</button>
        </div>
    </div>

    <!-- Library Panel -->
    <div class="chamber-panel" id="library-panel">
        <div class="close-btn" onclick="closePanel('library-panel')">‚úï</div>
        <div class="chamber-wrapper">
            <div class="chamber-header-modern">
                <div style="display: inline-block; padding: 0.5rem 1rem; background: linear-gradient(135deg, var(--accent-purple), var(--accent-blue)); border-radius: 20px; font-size: 0.85rem; font-weight: 600; margin-bottom: 1rem;">Sacred Library</div>
                <h2 class="chamber-title">Divine Wisdom</h2>
                <p style="color: var(--text-secondary); font-size: 1.1rem;">Unlock complete book and workbook</p>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem;">
                <div class="reflection-section">
                    <h3 style="font-family: 'Playfair Display', serif; font-size: 1.5rem; margin-bottom: 1rem; color: var(--accent-gold);">üìñ The Book</h3>
                    <p style="margin-bottom: 1rem;">A Wake-Up Call from One Divine Being to Another</p>
                    <div style="font-size: 2.5rem; font-weight: 700; color: var(--accent-gold); margin: 1.5rem 0;">$27</div>
                    <button class="btn-modern" style="width: 100%;">Purchase Book</button>
                </div>

                <div class="reflection-section">
                    <h3 style="font-family: 'Playfair Display', serif; font-size: 1.5rem; margin-bottom: 1rem; color: var(--accent-gold);">üìù The Workbook</h3>
                    <p style="margin-bottom: 1rem;">Complete Divine Discernment Workbook</p>
                    <div style="font-size: 2.5rem; font-weight: 700; color: var(--accent-gold); margin: 1.5rem 0;">$17</div>
                    <button class="btn-modern" style="width: 100%;">Purchase Workbook</button>
                </div>

                <div class="reflection-section" style="border: 2px solid var(--accent-gold);">
                    <h3 style="font-family: 'Playfair Display', serif; font-size: 1.5rem; margin-bottom: 1rem; color: var(--accent-gold);">üåü Bundle</h3>
                    <p style="margin-bottom: 1rem;">Book + Workbook</p>
                    <div style="font-size: 2.5rem; font-weight: 700; color: var(--accent-gold); margin: 1.5rem 0;">$39</div>
                    <button class="btn-modern" style="width: 100%; background: linear-gradient(135deg, var(--accent-gold), #F97316);">Get Bundle</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Oracle Panel -->
    <div class="chamber-panel" id="oracle-panel">
        <div class="close-btn" onclick="closePanel('oracle-panel')">‚úï</div>
        <div class="chamber-wrapper" style="max-width: 800px;">
            <div class="chamber-header-modern">
                <div style="display: inline-block; padding: 0.5rem 1rem; background: linear-gradient(135deg, var(--accent-purple), var(--accent-blue)); border-radius: 20px; font-size: 0.85rem; font-weight: 600; margin-bottom: 1rem;">Daily Oracle</div>
                <h2 class="chamber-title">Divine Wisdom</h2>
                <p style="color: var(--text-secondary); font-size: 1.1rem;">Receive guidance for your sacred journey</p>
            </div>

            <div class="oracle-card">
                <div style="font-size: 3rem; margin-bottom: 1rem;">üîÆ</div>
                <div class="oracle-quote" id="oracle-quote">Loading wisdom...</div>
                <div style="color: var(--accent-gold); font-weight: 600; font-size: 0.95rem;" id="oracle-author"></div>
            </div>

            <button class="btn-modern" onclick="getNewOracle()" style="margin: 0 auto; display: flex;">
                ‚ú® Receive New Wisdom
            </button>
        </div>
    </div>

    <!-- Manifestation Panel -->
    <div class="chamber-panel" id="manifestation-panel">
        <div class="close-btn" onclick="closePanel('manifestation-panel')">‚úï</div>
        <div class="chamber-wrapper">
            <div class="chamber-header-modern">
                <div style="display: inline-block; padding: 0.5rem 1rem; background: linear-gradient(135deg, var(--accent-purple), var(--accent-blue)); border-radius: 20px; font-size: 0.85rem; font-weight: 600; margin-bottom: 1rem;">Manifestation Board</div>
                <h2 class="chamber-title">Sacred Desires</h2>
                <p style="color: var(--text-secondary); font-size: 1.1rem;">Speak your truth and witness divine timing</p>
            </div>

            <div class="reflection-section">
                <h3 style="font-family: 'Playfair Display', serif; font-size: 1.5rem; margin-bottom: 1.5rem; color: var(--accent-gold);">üéØ Create New Manifestation</h3>
                <textarea id="new-manifestation" class="reflection-textarea" placeholder="What do you wish to manifest? Be specific: 'I am...', 'I have...'" style="min-height: 100px;"></textarea>
                <button class="btn-modern" onclick="addManifestation()" style="margin-top: 1rem;">‚ú® Declare to Universe</button>
            </div>

            <div class="reflection-section">
                <h3 style="font-family: 'Playfair Display', serif; font-size: 1.5rem; margin-bottom: 1.5rem; color: var(--accent-gold);">üìú Active Manifestations</h3>
                <div id="manifestation-list">
                    <p style="text-align: center; color: var(--text-secondary); padding: 2rem;">No manifestations yet. Create your first one above! üåü</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Moon Panel -->
    <div class="chamber-panel" id="moon-panel">
        <div class="close-btn" onclick="closePanel('moon-panel')">‚úï</div>
        <div class="chamber-wrapper" style="max-width: 800px;">
            <div class="chamber-header-modern">
                <div style="display: inline-block; padding: 0.5rem 1rem; background: linear-gradient(135deg, var(--accent-purple), var(--accent-blue)); border-radius: 20px; font-size: 0.85rem; font-weight: 600; margin-bottom: 1rem;">Cosmic Timing</div>
                <h2 class="chamber-title">Lunar Guidance</h2>
                <p style="color: var(--text-secondary); font-size: 1.1rem;">Align with celestial rhythms</p>
            </div>

            <div style="background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 20px; padding: 2rem; text-align: center;">
                <h3 style="margin-bottom: 1rem;">Current Moon Phase</h3>
                <div style="font-size: 4rem; margin: 1rem 0;" id="moon-icon">üåï</div>
                <h4 style="color: var(--accent-gold); font-size: 1.5rem; margin: 1rem 0;" id="moon-phase-name">Full Moon</h4>
                <p style="color: var(--text-secondary); max-width: 500px; margin: 0 auto; line-height: 1.8;" id="moon-guidance">
                    The Full Moon is a time of culmination and manifestation.
                </p>
            </div>
        </div>
    </div>

    <!-- Breathing Panel -->
    <div class="chamber-panel" id="breathing-panel">
        <div class="close-btn" onclick="closePanel('breathing-panel')">‚úï</div>
        <div class="chamber-wrapper" style="max-width: 700px;">
            <div class="chamber-header-modern">
                <div style="display: inline-block; padding: 0.5rem 1rem; background: linear-gradient(135deg, var(--accent-purple), var(--accent-blue)); border-radius: 20px; font-size: 0.85rem; font-weight: 600; margin-bottom: 1rem;">Breath Work</div>
                <h2 class="chamber-title">Sacred Breath</h2>
                <p style="color: var(--text-secondary); font-size: 1.1rem;">Center your energy through conscious breathing</p>
            </div>

            <div class="reflection-section">
                <div style="width: 200px; height: 200px; margin: 2rem auto; border-radius: 50%; background: radial-gradient(circle, var(--accent-purple), var(--accent-blue)); display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem; font-weight: 600; transition: all 4s ease-in-out;" id="breathing-circle">
                    <span id="breathing-text">Ready</span>
                </div>

                <div style="display: flex; gap: 1rem; justify-content: center;">
                    <button class="btn-modern" id="start-breathing-btn" onclick="startBreathing()">‚ñ∂ Start</button>
                    <button class="btn-modern btn-outline" id="stop-breathing-btn" onclick="stopBreathing()" style="display: none;">‚èπ Stop</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const oracleWisdom = [
            { quote: "You are a divine being having a temporary human experience.", author: "Ancient Wisdom" },
            { quote: "The sun speaks a language older than words.", author: "Divine Discernment" },
            { quote: "Manifestation is about aligning with the universe's plan.", author: "Nazir El" },
            { quote: "Your thoughts are prayers. Your words are spells.", author: "Universal Law" },
            { quote: "Trust divine timing. You cannot rush the sunrise.", author: "Cosmic Law" }
        ];

        const chamberData = [
            {
                title: "Foundation of Truth",
                subtitle: "Establish your connection to divine guidance",
                questions: [
                    { label: "What aspects of sunlight have you found most captivating? Describe what you actually observe.", placeholder: "My observations about sunlight..." },
                    { label: "Describe a time when you observed sunlight breaking through clouds. What did you see‚Äînot what you've been taught, but what you witnessed?", placeholder: "My direct observation..." },
                    { label: "Have you ever had a moment of revelation while observing natural phenomena? If so, describe it in detail.", placeholder: "My moment of revelation..." },
                    { label: "Rate your current satisfaction with conventional explanations about the nature of reality (1-10). Explain why.", placeholder: "Rating: \nExplanation:" },
                    { label: "List three 'facts' you accept about reality that you have never personally verified. How did you come to believe each one?", placeholder: "1. Fact:\nHow I came to believe:\n\n2. Fact:\nHow I came to believe:\n\n3. Fact:\nHow I came to believe:" },
                    { label: "Exercise: Spend 20 minutes observing the sun (safely, at sunrise/sunset). Document what you notice that challenges what you've been taught.", placeholder: "Date:\nTime:\nObservations:\nChallenges to belief:" },
                    { label: "What would change in your life if you discovered that a fundamental 'truth' you've accepted was actually incorrect?", placeholder: "My reflection..." }
                ]
            },
            {
                title: "The Cosmic Chess Board",
                subtitle: "Understanding the living plane we inhabit",
                questions: [
                    { label: "How have you observed plants and animals demonstrating knowledge or intelligence that humans often overlook?", placeholder: "My observations of natural intelligence..." },
                    { label: "Environmental Connection Exercise: Find a comfortable spot in nature for 30 minutes. Describe patterns you notice in plant growth, animal movement, and environmental responses.", placeholder: "Date:\nLocation:\nWhat patterns did you notice?\nHow do animals move through space?\nWhat cycles became apparent?" },
                    { label: "Have you noticed any correlation between natural events (weather, animal behavior) and events in your life? Document these.", placeholder: "Natural event:\nLife event:\nConnection I noticed:" },
                    { label: "List 5 ways nature has 'spoken' to you or provided guidance in your life.", placeholder: "1.\n2.\n3.\n4.\n5." },
                    { label: "Exercise: Choose one plant or tree near you. Visit it daily for 7 days. Document any changes, patterns, or insights.", placeholder: "Day 1:\nDay 2:\n..." },
                    { label: "If Earth is a living consciousness, what do you think it is trying to communicate to humanity right now?", placeholder: "My interpretation..." }
                ]
            },
            {
                title: "Divine Solar Communication",
                subtitle: "Learning the language of cosmic timing",
                questions: [
                    { label: "Create a 7-day solar observation journal. Each day, note sunrise time, location on horizon, quality of light, and your intuitive 'message' for the day.", placeholder: "Day 1:\nDate:\nSunrise time:\nLocation on horizon:\nQuality of light:\nIntuitive message:\n\nDay 2:..." },
                    { label: "Have you noticed patterns in your energy, mood, or productivity at different times of day? Map your personal solar rhythm.", placeholder: "Morning (6-9am):\nMidday (12-3pm):\nAfternoon (3-6pm):\nEvening (6-9pm):\nNight (9pm+):" },
                    { label: "Describe a time when 'divine timing' was clearly at work in your life. What were the signs?", placeholder: "The situation:\nThe timing:\nThe signs I noticed:\nThe outcome:" },
                    { label: "Exercise: For one week, align your most important tasks with peak sun hours (10am-2pm). Document your results.", placeholder: "Day 1 - Task & Result:\nDay 2 - Task & Result:\n..." },
                    { label: "What synchronicities have you experienced recently? List at least 3 and what you believe they mean.", placeholder: "1. Synchronicity:\nMeaning:\n\n2. Synchronicity:\nMeaning:\n\n3. Synchronicity:\nMeaning:" },
                    { label: "How do you currently receive divine guidance? What are your signs that the universe is speaking to you?", placeholder: "My methods of receiving guidance:\nMy personal signs:" }
                ]
            },
            {
                title: "Divine Creative Power",
                subtitle: "Awakening your manifestation abilities",
                questions: [
                    { label: "Have you ever experienced a 'miraculous' manifestation in your life, especially as a child? Describe it in detail.", placeholder: "My manifestation experience..." },
                    { label: "What limiting beliefs about your creative power were you taught? List them, then rewrite each as an empowering truth.", placeholder: "Limiting belief 1:\nEmpowering truth:\n\nLimiting belief 2:\nEmpowering truth:..." },
                    { label: "Exercise: Identify one small desire. Visualize it daily for 7 days as if it's already manifest. Document your process and results.", placeholder: "Desire:\nDay 1 visualization:\nDay 2 visualization:\n...\nResult:" },
                    { label: "What is the difference between 'wanting' something and 'being' something? How does this apply to manifestation?", placeholder: "My understanding..." },
                    { label: "List 5 things you manifested (consciously or unconsciously) in the past year. What was your mental/emotional state when each manifested?", placeholder: "1. What:\nMental/emotional state:\n\n2. What:\nMental/emotional state:..." },
                    { label: "Write a detailed description of your ideal life 1 year from now. Use present tense, as if it's already real.", placeholder: "In my life right now...\nI am...\nI have...\nI feel..." },
                    { label: "What emotions do you need to embody NOW to align with your desired reality?", placeholder: "Emotions to embody:\nHow I will cultivate them:" }
                ]
            },
            {
                title: "Sacred Rhythm",
                subtitle: "Aligning with cosmic timing cycles",
                questions: [
                    { label: "Artificial Time Detox: Choose one full day without clocks. Eat when hungry, sleep when tired. Document how time felt different.", placeholder: "Date:\nMorning activities:\nEnergy patterns:\nWhen I ate:\nWhen I rested:\nInsights about time:" },
                    { label: "What natural rhythms have you noticed in your life? (Daily, weekly, monthly, seasonal, yearly)", placeholder: "Daily rhythms:\nWeekly patterns:\nMonthly cycles:\nSeasonal changes:\nYearly patterns:" },
                    { label: "How does living by artificial time (clocks, calendars, schedules) conflict with your natural rhythms?", placeholder: "Conflicts I notice:\nHow it affects me:" },
                    { label: "Exercise: For one week, follow a sun-based schedule. Wake with/before sunrise, major tasks during sun peak, wind down at sunset. Document results.", placeholder: "Day 1:\nDay 2:\n...\nOverall insights:" },
                    { label: "When do you feel most connected to divine timing? What conditions create this feeling?", placeholder: "Times I feel connected:\nConditions that help:" },
                    { label: "Create a personal 'sacred rhythm' routine that aligns with natural cycles. What would your ideal day look like?", placeholder: "Sunrise:\nMorning:\nMidday:\nAfternoon:\nEvening:\nNight:" }
                ]
            },
            {
                title: "Walking Divine Truth",
                subtitle: "Maintaining spiritual authority among skeptics",
                questions: [
                    { label: "What have you had to sacrifice on your spiritual journey so far?", placeholder: "Sacrifices made:\nWhat I gained from each:" },
                    { label: "Describe a time when you stayed true to your spiritual knowing despite others' disbelief or mockery.", placeholder: "The situation:\nWhat I knew to be true:\nHow others reacted:\nHow I maintained my truth:\nThe outcome:" },
                    { label: "Who in your life currently challenges your spiritual beliefs? How do you respond?", placeholder: "Person/people:\nWhat they challenge:\nHow I currently respond:\nHow I want to respond:" },
                    { label: "Exercise: Practice stating one spiritual truth you know with absolute conviction to your reflection daily for 7 days. Note how it feels.", placeholder: "My truth statement:\nDay 1 experience:\nDay 2 experience:\n...\nChanges noticed:" },
                    { label: "What boundaries do you need to set to protect your spiritual journey?", placeholder: "Boundaries needed:\nWith whom:\nHow I will enforce them:" },
                    { label: "How do you distinguish between 'your truth' and 'universal truth'? Give examples.", placeholder: "My understanding of the difference:\nExamples:" },
                    { label: "What does 'spiritual authority' mean to you? How do you claim it?", placeholder: "My definition:\nHow I claim it:" }
                ]
            },
            {
                title: "Flesh and Spirit Integration",
                subtitle: "Operating in both physical and spiritual dimensions",
                questions: [
                    { label: "How does understanding yourself as a 'spiritual being temporarily expressing through physical form' change your view of daily challenges?", placeholder: "My reflection..." },
                    { label: "List 5 ways you honor your physical body as a sacred temple for your spirit.", placeholder: "1.\n2.\n3.\n4.\n5." },
                    { label: "What physical sensations signal spiritual downloads or intuitive hits for you?", placeholder: "Physical sensations I notice:\nWhat they usually mean:" },
                    { label: "Exercise: Spend 10 minutes daily for 7 days in conscious breath work. Document insights about the connection between breath, body, and spirit.", placeholder: "Day 1 insights:\nDay 2 insights:\n...\nOverall revelation:" },
                    { label: "How do you balance earthly responsibilities with spiritual practices?", placeholder: "My current balance:\nChallenges:\nSolutions:" },
                    { label: "Describe a moment when you felt fully integrated‚Äîspirit and body working as one.", placeholder: "The moment:\nWhat created it:\nHow it felt:\nHow to recreate it:" },
                    { label: "What does your body need from you right now to better serve your spiritual mission?", placeholder: "Physical needs:\nHow I will meet them:" }
                ]
            },
            {
                title: "Generational Wealth Consciousness",
                subtitle: "Creating lasting value beyond yourself",
                questions: [
                    { label: "What financial legacy do you want to leave in 10, 25, 100, and 300 years?", placeholder: "10 years:\n\n25 years:\n\n100 years:\n\n300 years:" },
                    { label: "What limiting beliefs about money and wealth did you inherit from your family? Rewrite each as abundance truth.", placeholder: "Inherited belief 1:\nAbundance truth:\n\nInherited belief 2:\nAbundance truth:..." },
                    { label: "Exercise: Calculate your 'generational value'‚Äîif your descendants received 10% annual returns on $1000 you invest today, what would they have in 100 years? What does this reveal?", placeholder: "My calculation:\nWhat this reveals about compound growth:\nHow this changes my perspective:" },
                    { label: "Beyond money, what non-financial wealth (knowledge, skills, wisdom, connections) will you pass down?", placeholder: "Knowledge:\nSkills:\nWisdom:\nConnections:\nValues:" },
                    { label: "What income streams can you create that will serve your family for generations?", placeholder: "Stream 1:\nStream 2:\nStream 3:\nAction steps:" },
                    { label: "How does understanding divine abundance change your relationship with money?", placeholder: "Old relationship with money:\nNew understanding:\nHow I will apply this:" },
                    { label: "Create a 7-generation vision. What do you want your descendants to say about the foundation you built?", placeholder: "My 7-generation vision:\nWhat they will say about me:\nActions I'm taking now:" }
                ]
            },
            {
                title: "Your Divine Declaration",
                subtitle: "Crafting your sacred commitment and mission",
                questions: [
                    { label: "Complete your Divine Declaration: I recognize myself as... I am here to... My unique gifts include...", placeholder: "I recognize myself as...\n\nI am here to...\n\nMy unique gifts include...\n\nI commit to..." },
                    { label: "What is your soul's purpose? Not what you were taught, but what you KNOW in your core.", placeholder: "My soul's purpose..." },
                    { label: "List 10 things you know about yourself that are absolutely true, regardless of what anyone else thinks.", placeholder: "1.\n2.\n3.\n4.\n5.\n6.\n7.\n8.\n9.\n10." },
                    { label: "Exercise: Write a letter to yourself from your higher self. What does your divine nature want you to know?", placeholder: "Dear [Your Name],\n\nFrom your highest self, I want you to know..." },
                    { label: "What daily practices will you commit to in order to stay aligned with your divine nature?", placeholder: "Morning practice:\nMidday check-in:\nEvening ritual:\nWeekly commitment:\nMonthly reflection:" },
                    { label: "What are you being called to create, heal, or transform in this lifetime?", placeholder: "Create:\nHeal:\nTransform:\nWhy this matters:" },
                    { label: "Write your personal manifesto‚Äîthe unchangeable truths you will live by. What are your non-negotiables?", placeholder: "I will always...\nI will never...\nI stand for...\nI am committed to...\n\nYa Heard Me!" },
                    { label: "What does success look like for you spiritually? How will you know you've fulfilled your divine mission?", placeholder: "Spiritual success means:\nI'll know I've succeeded when:\nMy legacy will be:" }
                ]
            }
        ];

        // Audio System
        let audioContext = null;
        let backgroundMusic = null;
        let isMusicPlaying = false;

        function initAudio() {
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
        }

        // Play button click sound
        function playClickSound() {
            if (!audioContext) initAudio();
            
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = 528; // 528Hz - Love frequency
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.1);
        }

        // Play success sound
        function playSuccessSound() {
            if (!audioContext) initAudio();
            
            const oscillator1 = audioContext.createOscillator();
            const oscillator2 = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator1.connect(gainNode);
            oscillator2.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator1.frequency.value = 432; // 432Hz - Universal harmony
            oscillator2.frequency.value = 528; // 528Hz - Love frequency
            oscillator1.type = 'sine';
            oscillator2.type = 'sine';
            
            gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
            
            oscillator1.start(audioContext.currentTime);
            oscillator2.start(audioContext.currentTime + 0.1);
            oscillator1.stop(audioContext.currentTime + 0.5);
            oscillator2.stop(audioContext.currentTime + 0.6);
        }

        // Play ambient background music
        function toggleBackgroundMusic() {
            if (!audioContext) initAudio();
            
            if (isMusicPlaying) {
                stopBackgroundMusic();
            } else {
                startBackgroundMusic();
            }
        }

        function startBackgroundMusic() {
            if (!audioContext) initAudio();
            
            // Create oscillators for ambient sound
            const osc1 = audioContext.createOscillator();
            const osc2 = audioContext.createOscillator();
            const osc3 = audioContext.createOscillator();
            
            const gain1 = audioContext.createGain();
            const gain2 = audioContext.createGain();
            const gain3 = audioContext.createGain();
            const masterGain = audioContext.createGain();
            
            osc1.connect(gain1);
            osc2.connect(gain2);
            osc3.connect(gain3);
            
            gain1.connect(masterGain);
            gain2.connect(masterGain);
            gain3.connect(masterGain);
            masterGain.connect(audioContext.destination);
            
            // Sacred frequencies
            osc1.frequency.value = 432; // Universal harmony
            osc2.frequency.value = 528; // Love frequency  
            osc3.frequency.value = 639; // Connection frequency
            
            osc1.type = 'sine';
            osc2.type = 'sine';
            osc3.type = 'triangle';
            
            gain1.gain.value = 0.03;
            gain2.gain.value = 0.02;
            gain3.gain.value = 0.015;
            masterGain.gain.value = 0.3;
            
            osc1.start();
            osc2.start();
            osc3.start();
            
            backgroundMusic = { osc1, osc2, osc3, masterGain };
            isMusicPlaying = true;
            
            document.getElementById('music-btn').textContent = 'üîá Mute';
            document.getElementById('music-btn').style.background = 'linear-gradient(135deg, var(--accent-gold), #F97316)';
        }

        function stopBackgroundMusic() {
            if (backgroundMusic) {
                backgroundMusic.osc1.stop();
                backgroundMusic.osc2.stop();
                backgroundMusic.osc3.stop();
                backgroundMusic = null;
                isMusicPlaying = false;
                
                document.getElementById('music-btn').textContent = 'üéµ Music';
                document.getElementById('music-btn').style.background = 'linear-gradient(135deg, var(--accent-purple), var(--accent-blue))';
            }
        }

        // Play portal open sound
        function playPortalSound() {
            if (!audioContext) initAudio();
            
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(200, audioContext.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(800, audioContext.currentTime + 0.3);
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0.15, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.3);
        }

        // Play completion chime
        function playCompletionChime() {
            if (!audioContext) initAudio();
            
            const frequencies = [432, 528, 639, 741]; // Ascending sacred frequencies
            
            frequencies.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = freq;
                oscillator.type = 'sine';
                
                const startTime = audioContext.currentTime + (index * 0.15);
                gainNode.gain.setValueAtTime(0.15, startTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, startTime + 0.4);
                
                oscillator.start(startTime);
                oscillator.stop(startTime + 0.4);
            });
        }

        let state = {
            currentOracle: 0,
            manifestations: [],
            breathing: { isRunning: false, interval: null },
            completedChambers: new Set(),
            currentChamber: 0,
            responses: {},
            meditation: { duration: 10, timeLeft: 600, isRunning: false, interval: null },
            calendarDate: new Date(),
            calendarMonth: 0,
            currentEnochDay: 1,
            currentEnochMonth: 0,
            enochYear: 1,
            dailyLogs: {},
            currentLogDate: null
        };

        // Three.js setup
        let scene, camera, renderer;
        function initThreeJS() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 30;
            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setClearColor(0x000000, 0);
            document.getElementById('temple-3d').appendChild(renderer.domElement);

            const geometry = new THREE.BufferGeometry();
            const vertices = [];
            for (let i = 0; i < 500; i++) {
                vertices.push(Math.random() * 100 - 50, Math.random() * 100 - 50, Math.random() * 100 - 50);
            }
            geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));
            const material = new THREE.PointsMaterial({ color: 0x8B5CF6, size: 0.5, transparent: true, opacity: 0.6 });
            const particles = new THREE.Points(geometry, material);
            scene.add(particles);

            function animate() {
                requestAnimationFrame(animate);
                scene.rotation.y += 0.0005;
                renderer.render(scene, camera);
            }
            animate();
        }

        // Oracle functions
        function openOracle() {
            playPortalSound();
            document.getElementById('portal-container').style.display = 'none';
            document.getElementById('oracle-panel').classList.add('open');
            displayOracle();
        }

        function displayOracle() {
            const oracle = oracleWisdom[state.currentOracle];
            document.getElementById('oracle-quote').textContent = '"' + oracle.quote + '"';
            document.getElementById('oracle-author').textContent = '‚Äî ' + oracle.author;
        }

        function getNewOracle() {
            playClickSound();
            state.currentOracle = Math.floor(Math.random() * oracleWisdom.length);
            displayOracle();
        }

        // Manifestation functions
        function openManifestation() {
            playPortalSound();
            document.getElementById('portal-container').style.display = 'none';
            document.getElementById('manifestation-panel').classList.add('open');
        }

        function addManifestation() {
            playClickSound();
            const text = document.getElementById('new-manifestation').value.trim();
            if (!text) {
                alert('Please write your manifestation first! ‚ú®');
                return;
            }

            state.manifestations.push({
                id: Date.now(),
                text: text,
                createdAt: new Date().toISOString()
            });

            document.getElementById('new-manifestation').value = '';
            displayManifestations();
            playSuccessSound();
            alert('üåü Your desire has been declared to the universe!');
        }

        function displayManifestations() {
            const list = document.getElementById('manifestation-list');
            if (state.manifestations.length === 0) {
                list.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 2rem;">No manifestations yet. Create your first one above! üåü</p>';
                return;
            }

            list.innerHTML = state.manifestations.map(function(m) {
                const date = new Date(m.createdAt).toLocaleDateString();
                return '<div style="padding: 1.5rem; background: rgba(255, 255, 255, 0.03); border: 1px solid var(--glass-border); border-radius: 16px; margin-bottom: 1rem;"><div style="font-size: 1.05rem; font-weight: 500; margin-bottom: 0.5rem;">' + m.text + '</div><div style="font-size: 0.8rem; color: var(--text-secondary);">Declared: ' + date + '</div></div>';
            }).join('');
        }

        // Moon functions
        function openMoon() {
            playPortalSound();
            document.getElementById('portal-container').style.display = 'none';
            document.getElementById('moon-panel').classList.add('open');
        }

        // Breathing functions
        function openBreathing() {
            playPortalSound();
            document.getElementById('portal-container').style.display = 'none';
            document.getElementById('breathing-panel').classList.add('open');
        }

        function startBreathing() {
            playClickSound();
            state.breathing.isRunning = true;
            document.getElementById('start-breathing-btn').style.display = 'none';
            document.getElementById('stop-breathing-btn').style.display = 'inline-flex';

            const circle = document.getElementById('breathing-circle');
            const text = document.getElementById('breathing-text');
            let phase = 0;

            function breathCycle() {
                if (!state.breathing.isRunning) return;

                if (phase === 0) {
                    circle.style.transform = 'scale(1.3)';
                    text.textContent = 'Breathe In';
                    setTimeout(function() { phase = 1; breathCycle(); }, 4000);
                } else if (phase === 1) {
                    circle.style.transform = 'scale(0.7)';
                    text.textContent = 'Breathe Out';
                    setTimeout(function() { phase = 0; breathCycle(); }, 4000);
                }
            }

            breathCycle();
        }

        function stopBreathing() {
            playClickSound();
            state.breathing.isRunning = false;
            document.getElementById('start-breathing-btn').style.display = 'inline-flex';
            document.getElementById('stop-breathing-btn').style.display = 'none';
            document.getElementById('breathing-circle').style.transform = 'scale(1)';
            document.getElementById('breathing-text').textContent = 'Ready';
        }

        // General functions
        function closePanel(panelId) {
            playClickSound();
            document.getElementById(panelId).classList.remove('open');
            document.getElementById('portal-container').style.display = 'block';
        }

        // Chambers functions
        function openChambers() {
            playPortalSound();
            document.getElementById('portal-container').style.display = 'none';
            document.getElementById('chambers-panel').classList.add('open');
            showChamberList();
        }

        function showChamberList() {
            let html = '<div class="chamber-header-modern"><div style="display: inline-block; padding: 0.5rem 1rem; background: linear-gradient(135deg, var(--accent-purple), var(--accent-blue)); border-radius: 20px; font-size: 0.85rem; font-weight: 600; margin-bottom: 1rem;">Sacred Chambers</div><h2 class="chamber-title">Nine Reflection Halls</h2><p style="color: var(--text-secondary); font-size: 1.1rem;">Choose a chamber to begin your journey</p></div><div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin: 2rem 0;">';
            
            for (let i = 0; i < chamberData.length; i++) {
                const completed = state.completedChambers.has(i);
                html += '<div class="reflection-section" style="cursor: pointer; text-align: center;" onclick="openChamber(' + i + ')"><div style="font-size: 2.5rem; margin-bottom: 1rem;">' + (completed ? '‚úÖ' : 'üèõÔ∏è') + '</div><div style="color: var(--accent-gold); font-weight: 600; margin-bottom: 0.5rem;">Chamber ' + (i + 1) + '</div><h3 style="margin-bottom: 0.5rem; font-size: 1.2rem;">' + chamberData[i].title + '</h3><p style="font-size: 0.9rem; color: var(--text-secondary);">' + chamberData[i].subtitle + '</p></div>';
            }
            
            html += '</div>';
            document.getElementById('chamber-content').innerHTML = html;
        }

        function openChamber(index) {
            const chamber = chamberData[index];
            let html = '<div class="chamber-header-modern"><div style="display: inline-block; padding: 0.5rem 1rem; background: linear-gradient(135deg, var(--accent-purple), var(--accent-blue)); border-radius: 20px; font-size: 0.85rem; font-weight: 600; margin-bottom: 1rem;">Chamber ' + (index + 1) + ' of 9</div><h2 class="chamber-title">' + chamber.title + '</h2><p style="color: var(--text-secondary); font-size: 1.1rem;">' + chamber.subtitle + '</p></div>';
            
            for (let qi = 0; qi < chamber.questions.length; qi++) {
                const q = chamber.questions[qi];
                const saved = state.responses[index + '_' + qi] || '';
                html += '<div class="reflection-section"><label>' + q.label + '</label><textarea class="reflection-textarea" id="q' + index + '_' + qi + '" placeholder="' + q.placeholder + '" oninput="saveResponse(' + index + ',' + qi + ')">' + saved + '</textarea></div>';
            }
            
            html += '<div style="display: flex; gap: 1rem; justify-content: space-between; margin-top: 3rem;"><button class="btn-modern btn-outline" onclick="navigateChamber(' + (index - 1) + ')" ' + (index === 0 ? 'disabled' : '') + '>‚Üê Previous</button><button class="btn-modern" onclick="completeChamber(' + index + ')">‚úì Complete</button><button class="btn-modern btn-outline" onclick="navigateChamber(' + (index + 1) + ')" ' + (index === 8 ? 'disabled' : '') + '>Next ‚Üí</button></div>';
            
            document.getElementById('chamber-content').innerHTML = html;
        }

        function saveResponse(chamberIndex, questionIndex) {
            const value = document.getElementById('q' + chamberIndex + '_' + questionIndex).value;
            state.responses[chamberIndex + '_' + questionIndex] = value;
        }

        function navigateChamber(index) {
            if (index >= 0 && index < 9) {
                openChamber(index);
            }
        }

        function completeChamber(index) {
            state.completedChambers.add(index);
            document.getElementById('stat-chambers').textContent = state.completedChambers.size + '/9';
            
            playCompletionChime();
            
            if (index < 8) {
                if (confirm('‚ú® Chamber ' + (index + 1) + ' complete!\n\nContinue to Chamber ' + (index + 2) + '?')) {
                    navigateChamber(index + 1);
                }
            } else {
                alert('üéâ All 9 chambers complete!\n\nYa Heard Me! - Nazir El');
                showChamberList();
            }
        }

        // Meditation functions
        function openMeditation() {
            playPortalSound();
            document.getElementById('portal-container').style.display = 'none';
            document.getElementById('meditation-panel').classList.add('open');
        }

        function setMeditationDuration(minutes) {
            playClickSound();
            state.meditation.duration = minutes;
            state.meditation.timeLeft = minutes * 60;
            updateMeditationDisplay();
        }

        function updateMeditationDisplay() {
            const mins = Math.floor(state.meditation.timeLeft / 60);
            const secs = state.meditation.timeLeft % 60;
            document.getElementById('meditation-timer').textContent = String(mins).padStart(2, '0') + ':' + String(secs).padStart(2, '0');
        }

        function startMeditation() {
            playClickSound();
            if (state.meditation.isRunning) return;
            state.meditation.isRunning = true;
            document.getElementById('meditation-start-btn').style.display = 'none';
            document.getElementById('meditation-pause-btn').style.display = 'inline-flex';
            
            state.meditation.interval = setInterval(function() {
                if (state.meditation.timeLeft > 0) {
                    state.meditation.timeLeft--;
                    updateMeditationDisplay();
                } else {
                    completeMeditation();
                }
            }, 1000);
        }

        function pauseMeditation() {
            playClickSound();
            clearInterval(state.meditation.interval);
            state.meditation.isRunning = false;
            document.getElementById('meditation-start-btn').style.display = 'inline-flex';
            document.getElementById('meditation-pause-btn').style.display = 'none';
        }

        function resetMeditation() {
            playClickSound();
            pauseMeditation();
            state.meditation.timeLeft = state.meditation.duration * 60;
            updateMeditationDisplay();
        }

        function completeMeditation() {
            pauseMeditation();
            playCompletionChime();
            alert('üßò Meditation Complete!');
            resetMeditation();
        }

        // Calendar functions
        function openCalendar() {
            playPortalSound();
            document.getElementById('portal-container').style.display = 'none';
            document.getElementById('calendar-panel').classList.add('open');
            updateCalendar();
        }

        function updateCalendar() {
            const enochMonths = [
                { name: 'Month 1', days: 30, quarter: 1, color: '#8B5CF6' },
                { name: 'Month 2', days: 30, quarter: 1, color: '#8B5CF6' },
                { name: 'Month 3', days: 31, quarter: 1, color: '#8B5CF6' },
                { name: 'Month 4', days: 30, quarter: 2, color: '#3B82F6' },
                { name: 'Month 5', days: 30, quarter: 2, color: '#3B82F6' },
                { name: 'Month 6', days: 31, quarter: 2, color: '#3B82F6' },
                { name: 'Month 7', days: 30, quarter: 3, color: '#F59E0B' },
                { name: 'Month 8', days: 30, quarter: 3, color: '#F59E0B' },
                { name: 'Month 9', days: 31, quarter: 3, color: '#F59E0B' },
                { name: 'Month 10', days: 30, quarter: 4, color: '#10B981' },
                { name: 'Month 11', days: 30, quarter: 4, color: '#10B981' },
                { name: 'Month 12', days: 31, quarter: 4, color: '#10B981' }
            ];
            
            const monthData = enochMonths[state.calendarMonth];
            document.getElementById('calendar-month').innerHTML = '<span style="color: ' + monthData.color + ';">' + monthData.name + '</span> <span style="font-size: 0.8rem; opacity: 0.7;">(Q' + monthData.quarter + ')</span>';
            
            const grid = document.getElementById('calendar-grid');
            grid.innerHTML = '';
            
            const days = ['Wed', 'Thu', 'Fri', 'Sat', 'Sun', 'Mon', 'Tue'];
            for (let d = 0; d < days.length; d++) {
                const cell = document.createElement('div');
                cell.style.cssText = 'background: transparent; color: var(--text-secondary); font-weight: 600; font-size: 0.75rem; text-transform: uppercase; display: flex; align-items: center; justify-content: center; padding: 0.5rem;';
                cell.textContent = days[d];
                grid.appendChild(cell);
            }
            
            for (let day = 1; day <= monthData.days; day++) {
                const cell = document.createElement('div');
                const dateKey = '2025-' + String(state.calendarMonth + 1).padStart(2, '0') + '-' + String(day).padStart(2, '0');
                const hasLog = state.dailyLogs[dateKey];
                
                cell.style.cssText = 'aspect-ratio: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 0.25rem; background: ' + (hasLog ? 'rgba(16, 185, 129, 0.15)' : 'rgba(255, 255, 255, 0.03)') + '; border-radius: 10px; cursor: pointer; transition: all 0.3s; border-left: 2px solid ' + monthData.color + '33;';
                cell.innerHTML = '<div style="font-size: 0.9rem; font-weight: 500;">' + day + '</div>';
                
                if (hasLog && hasLog.practices) {
                    const icons = { meditation: 'üßò', prayer: 'üôè', reflection: 'üìñ', gratitude: '‚ú®' };
                    let practiceIcons = '';
                    for (let key in hasLog.practices) {
                        if (hasLog.practices[key] && icons[key]) practiceIcons += icons[key];
                    }
                    if (practiceIcons) {
                        cell.innerHTML += '<div style="font-size: 0.6rem; opacity: 0.8;">' + practiceIcons.substring(0, 9) + '</div>';
                    }
                }
                
                cell.onclick = function() { openDailyLog(dateKey, monthData.name, day); };
                grid.appendChild(cell);
            }
        }

        function prevMonth() {
            state.calendarMonth = state.calendarMonth === 0 ? 11 : state.calendarMonth - 1;
            updateCalendar();
        }

        function nextMonth() {
            state.calendarMonth = state.calendarMonth === 11 ? 0 : state.calendarMonth + 1;
            updateCalendar();
        }

        function openDailyLog(dateKey, monthName, day) {
            state.currentLogDate = dateKey;
            document.getElementById('log-date-title').textContent = monthName + ', Day ' + day;
            
            const existingLog = state.dailyLogs[dateKey] || { practices: {}, reflection: '' };
            
            const practices = [
                { id: 'meditation', icon: 'üßò', label: 'Meditation' },
                { id: 'prayer', icon: 'üôè', label: 'Prayer' },
                { id: 'reflection', icon: 'üìñ', label: 'Reflection' },
                { id: 'gratitude', icon: '‚ú®', label: 'Gratitude' }
            ];
            
            let html = '';
            for (let p of practices) {
                const checked = existingLog.practices[p.id];
                html += '<div style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: rgba(255, 255, 255, 0.03); border: 1px solid var(--glass-border); border-radius: 12px; cursor: pointer;" onclick="togglePractice(\'' + p.id + '\')">';
                html += '<div style="width: 24px; height: 24px; border: 2px solid var(--glass-border); border-radius: 6px; display: flex; align-items: center; justify-content: center; ' + (checked ? 'background: linear-gradient(135deg, var(--accent-purple), var(--accent-blue)); border-color: transparent;' : '') + '" id="check-' + p.id + '">' + (checked ? '‚úì' : '') + '</div>';
                html += '<div style="font-size: 1.5rem;">' + p.icon + '</div>';
                html += '<div style="flex: 1; font-weight: 500;">' + p.label + '</div>';
                html += '</div>';
            }
            
            document.getElementById('practice-list').innerHTML = html;
            document.getElementById('daily-reflection').value = existingLog.reflection || '';
            document.getElementById('daily-log-modal').style.display = 'flex';
        }

        function togglePractice(practice) {
            playClickSound();
            if (!state.currentLogDate) return;
            
            if (!state.dailyLogs[state.currentLogDate]) {
                state.dailyLogs[state.currentLogDate] = { practices: {}, reflection: '' };
            }
            
            state.dailyLogs[state.currentLogDate].practices[practice] = !state.dailyLogs[state.currentLogDate].practices[practice];
            
            const checkbox = document.getElementById('check-' + practice);
            const isChecked = state.dailyLogs[state.currentLogDate].practices[practice];
            
            if (isChecked) {
                checkbox.style.background = 'linear-gradient(135deg, var(--accent-purple), var(--accent-blue))';
                checkbox.style.borderColor = 'transparent';
                checkbox.textContent = '‚úì';
            } else {
                checkbox.style.background = '';
                checkbox.style.borderColor = 'var(--glass-border)';
                checkbox.textContent = '';
            }
        }

        function saveDailyLog() {
            if (!state.currentLogDate) return;
            
            if (!state.dailyLogs[state.currentLogDate]) {
                state.dailyLogs[state.currentLogDate] = { practices: {}, reflection: '' };
            }
            
            state.dailyLogs[state.currentLogDate].reflection = document.getElementById('daily-reflection').value;
            
            updateCalendar();
            const daysLogged = Object.keys(state.dailyLogs).length;
            document.getElementById('stat-days').textContent = daysLogged;
            closeDailyLog();
            
            playSuccessSound();
            alert('‚ú® Daily log saved! Keep building your practice!');
        }

        function closeDailyLog() {
            playClickSound();
            document.getElementById('daily-log-modal').style.display = 'none';
            state.currentLogDate = null;
        }

        // Library functions
        function openLibrary() {
            playPortalSound();
            document.getElementById('portal-container').style.display = 'none';
            document.getElementById('library-panel').classList.add('open');
        }

        // General functions
        function closePanel(panelId) {
            document.getElementById(panelId).classList.remove('open');
            document.getElementById('portal-container').style.display = 'block';
        }

        // Initialize
        initThreeJS();
        updateMeditationDisplay();
        initAudio();
        console.log('Divine Discernment Temple initialized successfully!');
        console.log('All features active: Oracle, Manifestation, Breathing, Moon, Chambers, Meditation, Calendar, Library');
        console.log('Sacred sound frequencies: 432Hz (harmony), 528Hz (love), 639Hz (connection), 741Hz (awakening)');
    </script>
</body>
</html>