<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chakras & Auras - Divine Temple</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <!-- Divine Temple Systems -->
    <script src="../js/firebase-config.js"></script>
    <script src="../js/premium-access-control.js"></script>
    <script src="../js/divine-audio-engine.js"></script>
    <script src="../js/universal-progress-system.js"></script>
    <script src="../js/divine-progress-widget.js"></script>

    <style>
        :root {
            /* Chakra Colors */
            --root-chakra: #C41E3A;
            --sacral-chakra: #FF6B35;
            --solar-chakra: #FFC914;
            --heart-chakra: #00C853;
            --throat-chakra: #2979FF;
            --third-eye-chakra: #6A1B9A;
            --crown-chakra: #9C27B0;

            /* UI Colors */
            --primary-gold: #D4AF37;
            --accent-purple: #8B5CF6;
            --dark-bg: #0F0F23;
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-primary: #FFFFFF;
            --text-secondary: rgba(255, 255, 255, 0.8);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0a0a1e 0%, #1a1a2e 50%, #2d1b4e 100%);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Animated Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 20% 30%, rgba(156, 39, 176, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(0, 200, 83, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
            animation: backgroundPulse 15s ease-in-out infinite;
        }

        @keyframes backgroundPulse {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.6; }
        }

        /* Container */
        .chakra-container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Back Button */
        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.875rem 1.5rem;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 2rem;
            font-weight: 600;
            border: none;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(-5px);
        }

        /* Header */
        .chakra-header {
            text-align: center;
            margin-bottom: 3rem;
            padding: 3rem 2rem;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
        }

        .header-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            animation: spin 20s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .chakra-title {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2rem, 5vw, 3.5rem);
            font-weight: 700;
            background: linear-gradient(135deg, var(--crown-chakra), var(--heart-chakra), var(--root-chakra));
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
        }

        .chakra-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            max-width: 800px;
            margin: 0 auto;
        }

        /* Main Grid */
        .chakra-grid {
            display: grid;
            grid-template-columns: 400px 1fr;
            gap: 2rem;
            margin-bottom: 3rem;
        }

        /* Chakra Visualization Panel */
        .chakra-visualization {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            padding: 2rem;
            height: fit-content;
            position: sticky;
            top: 2rem;
        }

        .body-visualization {
            width: 100%;
            height: 600px;
            position: relative;
            margin: 2rem 0;
        }

        .chakra-point {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 80px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 0 20px currentColor;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            animation: pulse 3s ease-in-out infinite;
        }

        .chakra-point:hover {
            transform: translateX(-50%) scale(1.2);
            box-shadow: 0 0 40px currentColor;
        }

        .chakra-point.active {
            transform: translateX(-50%) scale(1.3);
            box-shadow: 0 0 60px currentColor;
            animation: activePulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 20px currentColor; }
            50% { box-shadow: 0 0 40px currentColor; }
        }

        @keyframes activePulse {
            0%, 100% {
                box-shadow: 0 0 60px currentColor;
                transform: translateX(-50%) scale(1.3);
            }
            50% {
                box-shadow: 0 0 80px currentColor;
                transform: translateX(-50%) scale(1.4);
            }
        }

        /* Position each chakra */
        .chakra-point[data-chakra="crown"] { top: 0; background: var(--crown-chakra); }
        .chakra-point[data-chakra="third-eye"] { top: 80px; background: var(--third-eye-chakra); }
        .chakra-point[data-chakra="throat"] { top: 160px; background: var(--throat-chakra); }
        .chakra-point[data-chakra="heart"] { top: 260px; background: var(--heart-chakra); }
        .chakra-point[data-chakra="solar"] { top: 360px; background: var(--solar-chakra); }
        .chakra-point[data-chakra="sacral"] { top: 450px; background: var(--sacral-chakra); }
        .chakra-point[data-chakra="root"] { top: 540px; background: var(--root-chakra); }

        /* Chakra Details Panel */
        .chakra-details {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            padding: 2rem;
            min-height: 600px;
        }

        .detail-header {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 2px solid var(--glass-border);
        }

        .detail-icon {
            font-size: 4rem;
            filter: drop-shadow(0 0 20px currentColor);
        }

        .detail-info h2 {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .detail-info .sanskrit {
            color: var(--text-secondary);
            font-size: 1.1rem;
            font-style: italic;
        }

        .detail-content {
            display: grid;
            gap: 2rem;
        }

        .info-section {
            background: rgba(255, 255, 255, 0.03);
            padding: 1.5rem;
            border-radius: 15px;
            border: 1px solid var(--glass-border);
        }

        .info-section h3 {
            color: var(--primary-gold);
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        .info-section p, .info-section ul {
            color: var(--text-secondary);
            line-height: 1.8;
        }

        .info-section ul {
            list-style: none;
            padding-left: 0;
        }

        .info-section li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
        }

        .info-section li::before {
            content: "&";
            position: absolute;
            left: 0;
            color: var(--primary-gold);
        }

        /* Sound Controls */
        .sound-controls {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(212, 175, 55, 0.1));
            border: 2px solid var(--primary-gold);
            border-radius: 20px;
            padding: 2rem;
            margin-top: 2rem;
        }

        .sound-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
        }

        .sound-header h3 {
            color: var(--primary-gold);
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .play-btn {
            background: linear-gradient(135deg, var(--primary-gold), #FFD700);
            color: var(--dark-bg);
            border: none;
            padding: 1rem 2.5rem;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(212, 175, 55, 0.4);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .play-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 30px rgba(212, 175, 55, 0.6);
        }

        .play-btn.playing {
            background: linear-gradient(135deg, #FF6B35, #FF8C42);
            animation: soundPulse 1.5s ease-in-out infinite;
        }

        @keyframes soundPulse {
            0%, 100% { box-shadow: 0 4px 20px rgba(255, 107, 53, 0.4); }
            50% { box-shadow: 0 6px 40px rgba(255, 107, 53, 0.8); }
        }

        .frequency-display {
            text-align: center;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            margin-top: 1rem;
        }

        .frequency-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-gold);
            font-family: 'Playfair Display', serif;
        }

        .frequency-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        /* Volume Control */
        .volume-control {
            margin-top: 1.5rem;
        }

        .volume-slider {
            width: 100%;
            height: 8px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            outline: none;
            -webkit-appearance: none;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--primary-gold);
            cursor: pointer;
            box-shadow: 0 0 10px var(--primary-gold);
        }

        .volume-slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--primary-gold);
            cursor: pointer;
            box-shadow: 0 0 10px var(--primary-gold);
            border: none;
        }

        /* Meditation Section */
        .meditation-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .meditation-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 2rem;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .meditation-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary-gold);
            box-shadow: 0 10px 40px rgba(212, 175, 55, 0.3);
        }

        .meditation-card h3 {
            color: var(--primary-gold);
            font-size: 1.5rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .meditation-card p {
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }

        .meditation-btn {
            background: linear-gradient(135deg, var(--accent-purple), var(--primary-gold));
            color: white;
            border: none;
            padding: 0.875rem 2rem;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
        }

        .meditation-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(139, 92, 246, 0.4);
        }

        /* Chakra Assessment */
        .assessment-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            padding: 2rem;
            margin-top: 3rem;
        }

        .assessment-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .assessment-header h2 {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-gold), var(--accent-purple));
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }

        .chakra-bars {
            display: grid;
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .chakra-bar {
            position: relative;
        }

        .bar-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .bar-name {
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .bar-percentage {
            color: var(--primary-gold);
            font-weight: 700;
        }

        .bar-track {
            height: 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .bar-fill {
            height: 100%;
            border-radius: 10px;
            transition: width 1s ease-out;
            box-shadow: 0 0 10px currentColor;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }

        .action-btn {
            flex: 1;
            min-width: 200px;
            padding: 1rem 2rem;
            border: 2px solid var(--glass-border);
            background: var(--glass-bg);
            color: white;
            border-radius: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
        }

        .action-btn:hover {
            border-color: var(--primary-gold);
            background: rgba(212, 175, 55, 0.1);
            transform: translateY(-2px);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .chakra-grid {
                grid-template-columns: 1fr;
            }

            .chakra-visualization {
                position: relative;
                top: 0;
            }
        }

        @media (max-width: 768px) {
            .chakra-container {
                padding: 1rem;
            }

            .meditation-section {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                flex-direction: column;
            }

            .action-btn {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="chakra-container">
        <!-- Back Button -->
        <button class="back-btn" onclick="window.parent.postMessage('back', '*')">
            ï¿½ Back to Temple
        </button>

        <!-- Header -->
        <div class="chakra-header">
            <div class="header-icon">=I</div>
            <h1 class="chakra-title">Chakras & Auras</h1>
            <p class="chakra-subtitle">
                Explore your seven energy centers, balance your chakras with healing frequencies,
                and visualize your aura through advanced energy work and meditation.
            </p>
        </div>
        <!-- Divine Progress Widget -->
        <div id="divine-progress-widget"></div>


        <!-- Main Grid -->
        <div class="chakra-grid">
            <!-- Chakra Visualization -->
            <div class="chakra-visualization">
                <h3 style="color: var(--primary-gold); margin-bottom: 1rem; text-align: center; font-size: 1.3rem;">
                    ( Select a Chakra
                </h3>
                <div class="body-visualization">
                    <div class="chakra-point" data-chakra="crown" onclick="selectChakra('crown')">=Q</div>
                    <div class="chakra-point" data-chakra="third-eye" onclick="selectChakra('third-eye')">=A</div>
                    <div class="chakra-point" data-chakra="throat" onclick="selectChakra('throat')">=ï¿½</div>
                    <div class="chakra-point" data-chakra="heart" onclick="selectChakra('heart')">=ï¿½</div>
                    <div class="chakra-point" data-chakra="solar" onclick="selectChakra('solar')"> </div>
                    <div class="chakra-point" data-chakra="sacral" onclick="selectChakra('sacral')"><</div>
                    <div class="chakra-point" data-chakra="root" onclick="selectChakra('root')">=4</div>
                </div>

                <p style="text-align: center; color: var(--text-secondary); font-size: 0.9rem; margin-top: 1rem;">
                    Click on any chakra point to explore its properties and healing frequency
                </p>
            </div>

            <!-- Chakra Details -->
            <div id="chakra-details" class="chakra-details">
                <!-- Dynamic content will be loaded here -->
            </div>
        </div>

        <!-- Meditation Section -->
        <div class="meditation-section">
            <div class="meditation-card">
                <h3>>ï¿½@ Chakra Balance Meditation</h3>
                <p>Guided 20-minute meditation to align and balance all seven chakras using visualization and breathwork.</p>
                <button class="meditation-btn" onclick="startMeditation('balance')">Start Meditation</button>
            </div>

            <div class="meditation-card">
                <h3>< Aura Cleansing</h3>
                <p>Clear negative energy and strengthen your aura with this powerful cleansing visualization practice.</p>
                <button class="meditation-btn" onclick="startMeditation('aura')">Start Cleansing</button>
            </div>

            <div class="meditation-card">
                <h3>ï¿½ Energy Healing Flow</h3>
                <p>Learn to channel healing energy through your body, activating and harmonizing each energy center.</p>
                <button class="meditation-btn" onclick="startMeditation('healing')">Start Healing</button>
            </div>
        </div>

        <!-- Chakra Assessment -->
        <div class="assessment-panel">
            <div class="assessment-header">
                <h2>Your Chakra Balance</h2>
                <p style="color: var(--text-secondary);">Track your energy center alignment over time</p>
            </div>

            <div class="chakra-bars" id="chakra-bars">
                <!-- Dynamic chakra bars will be loaded here -->
            </div>

            <div class="action-buttons">
                <button class="action-btn" onclick="takeAssessment()">
                    =ï¿½ Take Assessment
                </button>
                <button class="action-btn" onclick="viewHistory()">
                    =ï¿½ View Progress
                </button>
                <button class="action-btn" onclick="generateReport()">
                    =ï¿½ Generate Report
                </button>
            </div>
        </div>
    </div>

    <script>
        // ========================================
        // CHAKRA DATA
        // ========================================
        const CHAKRA_DATA = {
            'root': {
                name: 'Root Chakra',
                sanskrit: 'Muladhara',
                icon: '=4',
                color: '#C41E3A',
                frequency: 396, // Hz - Liberation from fear
                location: 'Base of spine',
                element: 'Earth',
                description: 'The root chakra represents our foundation and feeling of being grounded. It connects us to the physical world and provides stability.',
                qualities: ['Survival', 'Security', 'Stability', 'Grounding', 'Physical needs', 'Safety'],
                blockage: ['Anxiety', 'Fear', 'Insecurity', 'Financial stress', 'Eating disorders'],
                healing: ['Walking barefoot', 'Yoga', 'Root vegetables', 'Red foods', 'Grounding meditation', 'Physical exercise'],
                affirmations: [
                    'I am safe and secure',
                    'I trust in the process of life',
                    'I have everything I need',
                    'I am grounded and stable'
                ]
            },
            'sacral': {
                name: 'Sacral Chakra',
                sanskrit: 'Svadhisthana',
                icon: '<',
                color: '#FF6B35',
                frequency: 417, // Hz - Facilitating change
                location: 'Lower abdomen',
                element: 'Water',
                description: 'The sacral chakra governs creativity, pleasure, and emotional expression. It is the center of our passions and desires.',
                qualities: ['Creativity', 'Pleasure', 'Sexuality', 'Emotional balance', 'Passion', 'Joy'],
                blockage: ['Emotional instability', 'Fear of change', 'Sexual dysfunction', 'Depression', 'Addiction'],
                healing: ['Creative activities', 'Dancing', 'Swimming', 'Orange foods', 'Pelvic exercises', 'Emotional release'],
                affirmations: [
                    'I embrace my creativity',
                    'I allow pleasure in my life',
                    'My emotions flow freely',
                    'I am passionate and vibrant'
                ]
            },
            'solar': {
                name: 'Solar Plexus Chakra',
                sanskrit: 'Manipura',
                icon: ' ',
                color: '#FFC914',
                frequency: 528, // Hz - Transformation and miracles
                location: 'Upper abdomen',
                element: 'Fire',
                description: 'The solar plexus chakra is the center of personal power, confidence, and self-esteem. It fuels our ability to take action.',
                qualities: ['Confidence', 'Personal power', 'Self-esteem', 'Willpower', 'Transformation', 'Energy'],
                blockage: ['Low self-esteem', 'Control issues', 'Digestive problems', 'Fatigue', 'Victim mentality'],
                healing: ['Core exercises', 'Sunlight', 'Yellow foods', 'Affirmations', 'Power poses', 'Goal setting'],
                affirmations: [
                    'I am powerful and confident',
                    'I honor my personal power',
                    'I can achieve anything I desire',
                    'I am worthy of success'
                ]
            },
            'heart': {
                name: 'Heart Chakra',
                sanskrit: 'Anahata',
                icon: '=ï¿½',
                color: '#00C853',
                frequency: 639, // Hz - Connecting relationships
                location: 'Center of chest',
                element: 'Air',
                description: 'The heart chakra is the bridge between the physical and spiritual. It governs love, compassion, and forgiveness.',
                qualities: ['Love', 'Compassion', 'Forgiveness', 'Peace', 'Empathy', 'Connection'],
                blockage: ['Grief', 'Loneliness', 'Jealousy', 'Bitterness', 'Fear of intimacy', 'Codependency'],
                healing: ['Loving-kindness meditation', 'Heart-opening yoga', 'Green foods', 'Forgiveness work', 'Self-love practices'],
                affirmations: [
                    'I am love',
                    'I forgive myself and others',
                    'My heart is open to giving and receiving',
                    'I choose compassion'
                ]
            },
            'throat': {
                name: 'Throat Chakra',
                sanskrit: 'Vishuddha',
                icon: '=ï¿½',
                color: '#2979FF',
                frequency: 741, // Hz - Awakening intuition
                location: 'Throat',
                element: 'Ether',
                description: 'The throat chakra governs communication, self-expression, and truth. It allows us to speak our authentic voice.',
                qualities: ['Communication', 'Truth', 'Self-expression', 'Listening', 'Creativity', 'Authenticity'],
                blockage: ['Fear of speaking', 'Lies', 'Secrets', 'Throat issues', 'Inability to listen', 'Gossip'],
                healing: ['Singing', 'Chanting', 'Blue foods', 'Journaling', 'Speaking truth', 'Neck stretches'],
                affirmations: [
                    'I speak my truth clearly',
                    'My voice matters',
                    'I express myself with ease',
                    'I communicate with confidence'
                ]
            },
            'third-eye': {
                name: 'Third Eye Chakra',
                sanskrit: 'Ajna',
                icon: '=A',
                color: '#6A1B9A',
                frequency: 852, // Hz - Returning to spiritual order
                location: 'Between eyebrows',
                element: 'Light',
                description: 'The third eye chakra is the center of intuition, wisdom, and spiritual insight. It connects us to higher consciousness.',
                qualities: ['Intuition', 'Wisdom', 'Imagination', 'Clarity', 'Insight', 'Psychic abilities'],
                blockage: ['Confusion', 'Lack of focus', 'Headaches', 'Nightmares', 'Closed-mindedness', 'Cynicism'],
                healing: ['Meditation', 'Visualization', 'Purple foods', 'Stargazing', 'Dreamwork', 'Mindfulness'],
                affirmations: [
                    'I trust my intuition',
                    'I see clearly',
                    'My inner wisdom guides me',
                    'I am connected to universal consciousness'
                ]
            },
            'crown': {
                name: 'Crown Chakra',
                sanskrit: 'Sahasrara',
                icon: '=Q',
                color: '#9C27B0',
                frequency: 963, // Hz - Divine consciousness
                location: 'Top of head',
                element: 'Cosmic Energy',
                description: 'The crown chakra connects us to the divine, universal consciousness, and spiritual enlightenment.',
                qualities: ['Spirituality', 'Enlightenment', 'Unity', 'Divine connection', 'Transcendence', 'Peace'],
                blockage: ['Spiritual disconnection', 'Materialism', 'Cynicism', 'Apathy', 'Isolation from higher self'],
                healing: ['Meditation', 'Prayer', 'Fasting', 'Silence', 'White/violet foods', 'Spiritual study'],
                affirmations: [
                    'I am divine',
                    'I am connected to all that is',
                    'I trust in the universe',
                    'I am one with everything'
                ]
            }
        };

        // ========================================
        // WEB AUDIO API - BEAUTIFUL TONE GENERATOR
        // ========================================
        let audioContext = null;
        let masterGain = null;
        let currentOscillators = [];
        let isPlaying = false;
        let currentChakra = 'heart';

        function initAudio() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                masterGain = audioContext.createGain();
                masterGain.gain.value = 0.3; // Default volume
                masterGain.connect(audioContext.destination);
            }
        }

        function createBeautifulTone(frequency) {
            initAudio();
            stopSound();

            // Create multiple oscillators for rich, harmonic sound
            const oscillators = [];

            // Fundamental frequency (main tone)
            const fundamental = audioContext.createOscillator();
            fundamental.type = 'sine'; // Pure, smooth tone
            fundamental.frequency.setValueAtTime(frequency, audioContext.currentTime);

            const fundamentalGain = audioContext.createGain();
            fundamentalGain.gain.setValueAtTime(0, audioContext.currentTime);
            fundamentalGain.gain.linearRampToValueAtTime(0.4, audioContext.currentTime + 0.5); // Gentle fade in

            fundamental.connect(fundamentalGain);
            fundamentalGain.connect(masterGain);

            // Harmonic 1 (octave above - adds richness)
            const harmonic1 = audioContext.createOscillator();
            harmonic1.type = 'sine';
            harmonic1.frequency.setValueAtTime(frequency * 2, audioContext.currentTime);

            const harmonic1Gain = audioContext.createGain();
            harmonic1Gain.gain.setValueAtTime(0, audioContext.currentTime);
            harmonic1Gain.gain.linearRampToValueAtTime(0.15, audioContext.currentTime + 0.5);

            harmonic1.connect(harmonic1Gain);
            harmonic1Gain.connect(masterGain);

            // Harmonic 2 (perfect fifth - adds depth)
            const harmonic2 = audioContext.createOscillator();
            harmonic2.type = 'sine';
            harmonic2.frequency.setValueAtTime(frequency * 1.5, audioContext.currentTime);

            const harmonic2Gain = audioContext.createGain();
            harmonic2Gain.gain.setValueAtTime(0, audioContext.currentTime);
            harmonic2Gain.gain.linearRampToValueAtTime(0.1, audioContext.currentTime + 0.5);

            harmonic2.connect(harmonic2Gain);
            harmonic2Gain.connect(masterGain);

            // Sub-harmonic (octave below - adds grounding)
            const subHarmonic = audioContext.createOscillator();
            subHarmonic.type = 'sine';
            subHarmonic.frequency.setValueAtTime(frequency / 2, audioContext.currentTime);

            const subGain = audioContext.createGain();
            subGain.gain.setValueAtTime(0, audioContext.currentTime);
            subGain.gain.linearRampToValueAtTime(0.2, audioContext.currentTime + 0.5);

            subHarmonic.connect(subGain);
            subGain.connect(masterGain);

            // Start all oscillators
            fundamental.start();
            harmonic1.start();
            harmonic2.start();
            subHarmonic.start();

            currentOscillators = [
                {osc: fundamental, gain: fundamentalGain},
                {osc: harmonic1, gain: harmonic1Gain},
                {osc: harmonic2, gain: harmonic2Gain},
                {osc: subHarmonic, gain: subGain}
            ];

            isPlaying = true;
            updatePlayButton();
        }

        async function stopSound() {
            if (currentOscillators.length > 0) {
                const fadeTime = 0.3;
                currentOscillators.forEach(({osc, gain}) => {
                    gain.gain.linearRampToValueAtTime(0, audioContext.currentTime + fadeTime);
                    osc.stop(audioContext.currentTime + fadeTime);
                });
                currentOscillators = [];

                // ðŸŽ¯ AWARD XP FOR CHAKRA HEALING SESSION
                if (window.progressSystem) {
                    const chakraData = CHAKRA_DATA[currentChakra];
                    await window.progressSystem.awardXP(40, `${chakraData.name} healing session`, 'chakras-auras');
                    await window.progressSystem.logActivity('chakra_healing', 'chakras-auras', {
                        chakra: currentChakra,
                        frequency: chakraData.frequency
                    });
                }
            }
            isPlaying = false;
            updatePlayButton();
        }

        function toggleSound() {
            if (isPlaying) {
                stopSound();
            } else {
                const chakraData = CHAKRA_DATA[currentChakra];
                createBeautifulTone(chakraData.frequency);
            }
        }

        function updatePlayButton() {
            const btn = document.getElementById('play-sound-btn');
            if (btn) {
                if (isPlaying) {
                    btn.innerHTML = 'ï¿½ Stop Sound';
                    btn.classList.add('playing');
                } else {
                    btn.innerHTML = 'ï¿½ Play Healing Tone';
                    btn.classList.remove('playing');
                }
            }
        }

        function updateVolume(value) {
            if (masterGain) {
                masterGain.gain.setValueAtTime(value / 100, audioContext.currentTime);
            }
        }

        // ========================================
        // CHAKRA SELECTION & DISPLAY
        // ========================================
        function selectChakra(chakraId) {
            currentChakra = chakraId;

            // Update active state
            document.querySelectorAll('.chakra-point').forEach(point => {
                point.classList.remove('active');
            });
            document.querySelector(`[data-chakra="${chakraId}"]`).classList.add('active');

            // Display chakra details
            displayChakraDetails(chakraId);

            // If sound is playing, switch to new frequency
            if (isPlaying) {
                stopSound();
                setTimeout(() => {
                    createBeautifulTone(CHAKRA_DATA[chakraId].frequency);
                }, 100);
            }
        }

        function displayChakraDetails(chakraId) {
            const chakra = CHAKRA_DATA[chakraId];
            const detailsContainer = document.getElementById('chakra-details');

            detailsContainer.innerHTML = `
                <div class="detail-header" style="color: ${chakra.color}">
                    <div class="detail-icon" style="color: ${chakra.color}">${chakra.icon}</div>
                    <div class="detail-info">
                        <h2 style="color: ${chakra.color}">${chakra.name}</h2>
                        <p class="sanskrit">${chakra.sanskrit}</p>
                    </div>
                </div>

                <div class="detail-content">
                    <div class="info-section">
                        <h3>=ï¿½ Location & Element</h3>
                        <p><strong>Location:</strong> ${chakra.location}</p>
                        <p><strong>Element:</strong> ${chakra.element}</p>
                        <p><strong>Color:</strong> <span style="color: ${chakra.color}">ï¿½</span> ${chakra.color}</p>
                    </div>

                    <div class="info-section">
                        <h3>( Description</h3>
                        <p>${chakra.description}</p>
                    </div>

                    <div class="info-section">
                        <h3>< Balanced Qualities</h3>
                        <ul>
                            ${chakra.qualities.map(q => `<li>${q}</li>`).join('')}
                        </ul>
                    </div>

                    <div class="info-section">
                        <h3>ï¿½ Signs of Blockage</h3>
                        <ul>
                            ${chakra.blockage.map(b => `<li>${b}</li>`).join('')}
                        </ul>
                    </div>

                    <div class="info-section">
                        <h3>=ï¿½ Healing Practices</h3>
                        <ul>
                            ${chakra.healing.map(h => `<li>${h}</li>`).join('')}
                        </ul>
                    </div>

                    <div class="info-section">
                        <h3>=ï¿½ Affirmations</h3>
                        <ul>
                            ${chakra.affirmations.map(a => `<li>"${a}"</li>`).join('')}
                        </ul>
                    </div>
                </div>

                <div class="sound-controls">
                    <div class="sound-header">
                        <h3><ï¿½ Healing Frequency</h3>
                        <button id="play-sound-btn" class="play-btn" onclick="toggleSound()">
                            ï¿½ Play Healing Tone
                        </button>
                    </div>

                    <div class="frequency-display">
                        <div class="frequency-value">${chakra.frequency} Hz</div>
                        <div class="frequency-label">Solfeggio Healing Frequency</div>
                    </div>

                    <div class="volume-control">
                        <label style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 0.5rem; display: block;">
                            =
 Volume
                        </label>
                        <input type="range" class="volume-slider" min="0" max="100" value="30"
                               onchange="updateVolume(this.value)" oninput="updateVolume(this.value)">
                    </div>

                    <p style="color: var(--text-secondary); font-size: 0.85rem; margin-top: 1rem; text-align: center; line-height: 1.6;">
                        This pure harmonic tone is designed to resonate with your ${chakra.name.toLowerCase()},
                        promoting balance and healing. Use headphones for the best experience.
                    </p>
                </div>
            `;
        }

        // ========================================
        // CHAKRA ASSESSMENT
        // ========================================
        function initChakraBars() {
            const barsContainer = document.getElementById('chakra-bars');

            // Get saved progress or use random values for demo
            const savedProgress = JSON.parse(localStorage.getItem('chakraProgress')) || {};

            Object.keys(CHAKRA_DATA).forEach(chakraId => {
                const chakra = CHAKRA_DATA[chakraId];
                const percentage = savedProgress[chakraId] || Math.floor(Math.random() * 40 + 50); // 50-90%

                const barHTML = `
                    <div class="chakra-bar">
                        <div class="bar-header">
                            <div class="bar-name">
                                <span style="color: ${chakra.color}">${chakra.icon}</span>
                                ${chakra.name}
                            </div>
                            <div class="bar-percentage">${percentage}%</div>
                        </div>
                        <div class="bar-track">
                            <div class="bar-fill" style="width: ${percentage}%; background: ${chakra.color}"></div>
                        </div>
                    </div>
                `;

                barsContainer.innerHTML += barHTML;
            });
        }

        // ========================================
        // MEDITATION FUNCTIONS
        // ========================================
        function startMeditation(type) {
            alert(`Starting ${type} meditation... (This feature will be fully implemented with guided audio and timer)`);
            // TODO: Implement full meditation system with audio guidance
        }

        function takeAssessment() {
            alert('Chakra Assessment Quiz coming soon! This will help you identify which chakras need attention.');
            // TODO: Implement assessment questionnaire
        }

        function viewHistory() {
            alert('Progress History coming soon! Track your chakra balance over time.');
            // TODO: Implement progress tracking
        }

        function generateReport() {
            alert('Personalized Chakra Report coming soon! Get detailed insights and recommendations.');
            // TODO: Implement PDF report generation
        }

        // ========================================
        // INITIALIZATION
        // ========================================
        document.addEventListener('DOMContentLoaded', () => {
            console.log('=I Chakras & Auras portal initialized');

            // Initialize with heart chakra
            selectChakra('heart');

            // Initialize chakra assessment bars
            initChakraBars();

            // Cleanup audio on page unload
            window.addEventListener('beforeunload', () => {
                stopSound();
            });
        });

        // Stop audio when navigating away
        window.addEventListener('blur', () => {
            if (isPlaying) {
                stopSound();
            }
        });
    </script>
</body>
</html>
