<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oracle & Divination - Divine Temple</title>
    
    <!-- Performance optimizations -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//fonts.gstatic.com">
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Critical CSS -->
    <link rel="preload" href="../css/critical.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="../css/critical.min.css"></noscript>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    
    <style>
        :root {
            --primary-bg: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
            --accent-purple: #8b5fbf;
            --accent-gold: #d4af37;
            --accent-rose: #f8bbd9;
            --accent-cyan: #00e5ff;
            --accent-warm: #ff6b6b;
            --accent-green: #4ade80;
            --accent-violet: #7c3aed;
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--primary-bg);
            color: white;
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
        }

        .oracle-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .back-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--glass-border);
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 2rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(-5px);
        }

        .oracle-header {
            text-align: center;
            margin-bottom: 3rem;
            padding: 3rem 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 25px;
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            position: relative;
            overflow: hidden;
        }

        .oracle-header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(from 0deg, transparent, rgba(139, 95, 191, 0.1), transparent);
            animation: mysticRotate 25s linear infinite;
            z-index: -1;
        }

        .oracle-title {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2.5rem, 5vw, 4rem);
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent-purple), var(--accent-gold));
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
            text-shadow: var(--text-shadow);
        }

        .oracle-subtitle {
            font-size: 1.3rem;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 2rem;
            font-weight: 300;
        }

        /* Enhanced Oracle Interface */
        .oracle-main-interface {
            display: grid;
            grid-template-columns: 1fr 280px;
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .oracle-tools-panel {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 2rem;
            backdrop-filter: blur(20px);
        }

        .tools-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            color: var(--accent-gold);
            text-align: center;
            margin-bottom: 0.5rem;
        }

        .tools-subtitle {
            text-align: center;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 2rem;
            font-size: 1rem;
        }

        .divination-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 1.5rem;
        }

        .divination-category {
            background: linear-gradient(135deg, rgba(139, 95, 191, 0.2), rgba(124, 58, 237, 0.2));
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 18px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .divination-category:hover {
            transform: translateY(-8px) scale(1.02);
            border-color: var(--accent-gold);
            box-shadow: 0 20px 40px rgba(139, 95, 191, 0.3);
        }

        .divination-category::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--accent-purple), var(--accent-gold));
            transform: scaleX(0);
            transition: transform 0.4s ease;
        }

        .divination-category:hover::before {
            transform: scaleX(1);
        }

        .divination-icon {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            display: block;
            animation: mysticGlow 4s ease-in-out infinite;
        }

        .divination-category h3 {
            color: var(--accent-purple);
            margin-bottom: 1rem;
            font-size: 1.4rem;
            font-family: 'Playfair Display', serif;
        }

        .divination-category p {
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .divination-btn {
            background: linear-gradient(135deg, var(--accent-purple), var(--accent-violet));
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 15px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .divination-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(139, 95, 191, 0.4);
        }

        /* Content Display Area */
        .content-display-area {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2rem;
            min-height: 600px;
            position: relative;
        }

        .welcome-content {
            text-align: center;
            padding: 3rem 2rem;
        }

        .welcome-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            display: block;
            animation: mysticPulse 3s ease-in-out infinite;
        }

        .welcome-content h3 {
            font-family: 'Playfair Display', serif;
            font-size: 2.2rem;
            color: var(--accent-gold);
            margin-bottom: 1rem;
        }

        .welcome-content p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.1rem;
            line-height: 1.6;
            max-width: 600px;
            margin: 0 auto 2rem;
        }

        .quick-stats {
            display: flex;
            justify-content: center;
            gap: 3rem;
            margin-top: 2rem;
        }

        .stat {
            text-align: center;
        }

        .stat-number {
            display: block;
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--accent-purple);
            font-family: 'Playfair Display', serif;
        }

        .stat-label {
            display: block;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            margin-top: 0.5rem;
        }

        /* Oracle Sidebar */
        .oracle-sidebar {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 1.5rem;
            height: fit-content;
            backdrop-filter: blur(20px);
        }

        .sidebar-title {
            color: var(--accent-gold);
            font-size: 1.2rem;
            margin-bottom: 1rem;
            text-align: center;
            font-family: 'Playfair Display', serif;
        }

        .sidebar-actions {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .sidebar-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1rem;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 1rem;
            font-size: 0.9rem;
        }

        .sidebar-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--accent-purple);
            transform: translateX(5px);
        }

        .btn-icon {
            font-size: 1.3rem;
        }

        .btn-label {
            font-weight: 500;
        }

        /* Card Display Styles */
        .card-display-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 2rem;
        }

        .card-deck {
            position: relative;
            margin-bottom: 2rem;
        }

        .oracle-card {
            width: 160px;
            height: 240px;
            background: linear-gradient(135deg, var(--accent-purple), var(--accent-violet));
            border: 3px solid var(--accent-gold);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.5s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .oracle-card:hover {
            transform: translateY(-10px) rotateY(5deg);
            box-shadow: 0 20px 40px rgba(139, 95, 191, 0.4);
        }

        .oracle-card.flipped {
            transform: rotateY(180deg);
        }

        .card-back {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #1a1a2e, #8b5fbf, #d4af37);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            backface-visibility: hidden;
        }

        .card-front {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            color: #212529;
            border-radius: 12px;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            backface-visibility: hidden;
            transform: rotateY(180deg);
        }

        .card-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .card-name {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            font-family: 'Playfair Display', serif;
        }

        .card-meaning {
            font-size: 0.8rem;
            line-height: 1.3;
        }

        /* Reading Display */
        .reading-display {
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid var(--accent-gold);
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem 0;
            text-align: center;
        }

        .reading-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            color: var(--accent-gold);
            margin-bottom: 1rem;
        }

        .reading-content {
            font-size: 1.1rem;
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.9);
        }

        /* Rune Display */
        .rune-display {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .rune-stone {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #6b7280, #374151);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid var(--accent-gold);
            position: relative;
        }

        .rune-stone:hover {
            transform: scale(1.1) rotateZ(5deg);
            box-shadow: 0 10px 20px rgba(212, 175, 55, 0.4);
        }

        .rune-stone.selected {
            background: linear-gradient(135deg, var(--accent-gold), var(--accent-warm));
            transform: scale(1.2);
        }

        /* I-Ching Hexagram */
        .hexagram-display {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 2rem 0;
        }

        .hexagram {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .hexagram-line {
            width: 60px;
            height: 8px;
            background: var(--accent-gold);
            border-radius: 4px;
            position: relative;
        }

        .hexagram-line.broken::before {
            content: '';
            position: absolute;
            top: 0;
            left: 25px;
            width: 10px;
            height: 8px;
            background: var(--primary-bg);
            border-radius: 4px;
        }

        /* History Panel */
        .history-panel {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .history-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.6rem;
            color: var(--accent-purple);
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .history-entries {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            max-height: 400px;
            overflow-y: auto;
        }

        .history-entry {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .history-entry:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--accent-purple);
            transform: translateX(5px);
        }

        .entry-date {
            font-size: 0.9rem;
            color: var(--accent-cyan);
            margin-bottom: 0.5rem;
        }

        .entry-type {
            font-weight: 600;
            color: var(--accent-gold);
            margin-bottom: 0.5rem;
        }

        .entry-summary {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.4;
        }

        /* Animations */
        @keyframes mysticRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes mysticGlow {
            0%, 100% { 
                filter: drop-shadow(0 0 10px rgba(139, 95, 191, 0.5));
                transform: scale(1);
            }
            50% { 
                filter: drop-shadow(0 0 20px rgba(212, 175, 55, 0.8));
                transform: scale(1.05);
            }
        }

        @keyframes mysticPulse {
            0%, 100% { 
                transform: scale(1);
                opacity: 0.8;
            }
            50% { 
                transform: scale(1.1);
                opacity: 1;
            }
        }

        @keyframes cardShuffle {
            0%, 100% { transform: translateX(0) rotate(0deg); }
            25% { transform: translateX(-10px) rotate(-2deg); }
            75% { transform: translateX(10px) rotate(2deg); }
        }

        /* Modal Styles */
        .oracle-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            padding: 2rem;
            backdrop-filter: blur(10px);
        }

        .oracle-modal {
            background: var(--primary-bg);
            border-radius: 25px;
            padding: 0;
            max-width: 1000px;
            max-height: 90vh;
            width: 100%;
            position: relative;
            border: 2px solid var(--accent-purple);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .modal-header {
            background: linear-gradient(135deg, var(--accent-purple), var(--accent-violet));
            padding: 2rem;
            text-align: center;
            position: relative;
        }

        .modal-title {
            font-family: 'Playfair Display', serif;
            font-size: 2.2rem;
            font-weight: 700;
            color: white;
            margin: 0;
            text-shadow: var(--text-shadow);
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg);
        }

        .modal-content {
            flex: 1;
            overflow-y: auto;
            padding: 2rem;
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .oracle-main-interface {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .oracle-sidebar {
                order: -1;
            }
            
            .sidebar-actions {
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .sidebar-btn {
                flex: 1;
                min-width: 120px;
                justify-content: center;
            }
        }

        @media (max-width: 768px) {
            .oracle-container {
                padding: 1rem;
            }
            
            .divination-categories {
                grid-template-columns: 1fr;
            }
            
            .quick-stats {
                flex-direction: column;
                gap: 1rem;
            }
            
            .oracle-card {
                width: 140px;
                height: 210px;
            }
            
            .rune-display {
                gap: 1rem;
            }
            
            .rune-stone {
                width: 60px;
                height: 60px;
                font-size: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .oracle-header {
                padding: 2rem 1rem;
            }
            
            .oracle-title {
                font-size: 2rem;
            }
            
            .divination-category {
                padding: 1.5rem;
            }
            
            .divination-icon {
                font-size: 2.5rem;
            }
            
            .oracle-card {
                width: 120px;
                height: 180px;
            }
        }
    </style>
</head>
<body>
    <div class="oracle-container">
        <button class="back-btn" onclick="window.parent.postMessage('back', '*')">
            ‚Üê Back to Temple
        </button>

        <div class="oracle-header">
            <div style="font-size: 4rem; margin-bottom: 1rem; animation: mysticGlow 4s ease-in-out infinite;">üîÆ</div>
            <h1 class="oracle-title">Oracle & Divination</h1>
            <p class="oracle-subtitle">Divine guidance through ancient wisdom and mystical arts</p>
        </div>

        <!-- Enhanced Oracle Interface -->
        <div class="oracle-main-interface">
            <!-- Oracle Tools Panel -->
            <div class="oracle-tools-panel">
                <h2 class="tools-title">Sacred Oracles</h2>
                <p class="tools-subtitle">üåü Choose your path to divine wisdom</p>
                
                <div class="divination-categories">
                    <!-- Tarot Cards -->
                    <div class="divination-category" onclick="openTarotReading()">
                        <div class="divination-icon">üÉè</div>
                        <h3>Tarot Reading</h3>
                        <p>Ancient wisdom through 78 sacred cards revealing your path, challenges, and destiny.</p>
                        <button class="divination-btn">Draw Cards</button>
                    </div>

                    <!-- I-Ching Oracle -->
                    <div class="divination-category" onclick="openIChingOracle()">
                        <div class="divination-icon">‚òØÔ∏è</div>
                        <h3>I-Ching Oracle</h3>
                        <p>The Book of Changes offers profound insights through ancient Chinese hexagrams.</p>
                        <button class="divination-btn">Cast Oracle</button>
                    </div>

                    <!-- Rune Casting -->
                    <div class="divination-category" onclick="openRuneCasting()">
                        <div class="divination-icon">·ö±</div>
                        <h3>Rune Casting</h3>
                        <p>Norse wisdom stones reveal guidance through ancient Germanic symbols and meanings.</p>
                        <button class="divination-btn">Cast Runes</button>
                    </div>

                    <!-- Angel Cards -->
                    <div class="divination-category" onclick="openAngelCards()">
                        <div class="divination-icon">üëº</div>
                        <h3>Angel Cards</h3>
                        <p>Receive divine messages and guidance from your guardian angels and spiritual guides.</p>
                        <button class="divination-btn">Angel Guidance</button>
                    </div>

                    <!-- Crystal Oracle -->
                    <div class="divination-category" onclick="openCrystalOracle()">
                        <div class="divination-icon">üíé</div>
                        <h3>Crystal Oracle</h3>
                        <p>Sacred gemstones channel Earth's wisdom for healing, guidance, and spiritual growth.</p>
                        <button class="divination-btn">Crystal Wisdom</button>
                    </div>

                    <!-- Astro Dice -->
                    <div class="divination-category" onclick="openAstroDice()">
                        <div class="divination-icon">üé≤</div>
                        <h3>Astro Dice</h3>
                        <p>Cosmic dice combine astrology and divination for celestial insights and timing.</p>
                        <button class="divination-btn">Roll Cosmic</button>
                    </div>
                </div>
            </div>

            <!-- Content Display Area -->
            <div class="content-display-area" id="content-display-area">
                <div class="welcome-content" id="welcome-content">
                    <div class="welcome-icon">‚ú®</div>
                    <h3>Welcome to Divine Oracles</h3>
                    <p>Select a divination method to receive guidance from the universe. Each oracle offers unique insights into your spiritual path, current challenges, and future possibilities.</p>
                    <div class="quick-stats">
                        <div class="stat">
                            <span class="stat-number">67</span>
                            <span class="stat-label">Readings Performed</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number">23</span>
                            <span class="stat-label">Insights Gained</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number">12</span>
                            <span class="stat-label">Accurate Predictions</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Oracle Sidebar -->
            <div class="oracle-sidebar">
                <h4 class="sidebar-title">üîÆ Quick Oracle</h4>
                <div class="sidebar-actions">
                    <button class="sidebar-btn" onclick="quickTarotCard()" title="Quick Tarot">
                        <span class="btn-icon">üÉè</span>
                        <span class="btn-label">Daily Card</span>
                    </button>
                    <button class="sidebar-btn" onclick="quickRune()" title="Quick Rune">
                        <span class="btn-icon">·ö±</span>
                        <span class="btn-label">Rune Guidance</span>
                    </button>
                    <button class="sidebar-btn" onclick="quickAngel()" title="Angel Message">
                        <span class="btn-icon">üëº</span>
                        <span class="btn-label">Angel Message</span>
                    </button>
                    <button class="sidebar-btn" onclick="quickCrystal()" title="Crystal Wisdom">
                        <span class="btn-icon">üíé</span>
                        <span class="btn-label">Crystal Pick</span>
                    </button>
                    <button class="sidebar-btn" onclick="viewHistory()" title="Reading History">
                        <span class="btn-icon">üìö</span>
                        <span class="btn-label">History</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Divination History Panel -->
        <div class="history-panel" id="history-panel" style="display: none;">
            <h3 class="history-title">üìö Your Divination Journey</h3>
            <div class="history-entries" id="history-entries">
                <!-- History entries will be loaded here -->
            </div>
        </div>
    </div>

    <script>
        // Oracle & Divination System Class
        class OracleDivinationSystem {
            constructor() {
                this.data = this.loadData();
                this.init();
            }

            init() {
                this.loadQuickStats();
                this.setupPerformanceMonitoring();
                console.log('üîÆ Oracle & Divination System initialized');
            }

            loadData() {
                const defaultData = {
                    readings: { tarot: 34, iching: 12, runes: 18, angel: 15, crystal: 8, astro: 5 },
                    insights: 23,
                    predictions: 12,
                    history: [],
                    progress: { level: 7, exp: 1680, nextLevel: 2500 },
                    favorites: []
                };

                try {
                    const saved = localStorage.getItem('oracle-divination-data');
                    return saved ? { ...defaultData, ...JSON.parse(saved) } : defaultData;
                } catch (error) {
                    console.warn('Error loading oracle data, using defaults:', error);
                    return defaultData;
                }
            }

            saveData() {
                try {
                    localStorage.setItem('oracle-divination-data', JSON.stringify(this.data));
                } catch (error) {
                    console.error('Error saving oracle data:', error);
                }
            }

            loadQuickStats() {
                const totalReadings = Object.values(this.data.readings).reduce((sum, count) => sum + count, 0);
                const stats = document.querySelectorAll('.stat-number');
                if (stats.length >= 3) {
                    this.animateNumber(stats[0], totalReadings);
                    this.animateNumber(stats[1], this.data.insights);
                    this.animateNumber(stats[2], this.data.predictions);
                }
            }

            animateNumber(element, targetValue) {
                const startValue = parseInt(element.textContent) || 0;
                const duration = 1000;
                const startTime = performance.now();
                
                const animate = (currentTime) => {
                    const elapsed = currentTime - startTime;
                    const progress = Math.min(elapsed / duration, 1);
                    
                    const easeOutQuart = 1 - Math.pow(1 - progress, 4);
                    const currentValue = Math.round(startValue + (targetValue - startValue) * easeOutQuart);
                    
                    element.textContent = currentValue;
                    
                    if (progress < 1) {
                        requestAnimationFrame(animate);
                    }
                };
                
                requestAnimationFrame(animate);
            }

            setupPerformanceMonitoring() {
                const observer = new PerformanceObserver((list) => {
                    for (const entry of list.getEntries()) {
                        if (entry.entryType === 'measure') {
                            console.log(`üéØ ${entry.name}: ${entry.duration.toFixed(2)}ms`);
                        }
                    }
                });
                observer.observe({ entryTypes: ['measure'] });
            }

            updateProgress(category, points = 15) {
                this.data.progress.exp += points;
                
                if (this.data.progress.exp >= this.data.progress.nextLevel) {
                    this.data.progress.level++;
                    this.data.progress.exp = 0;
                    this.data.progress.nextLevel = Math.floor(this.data.progress.nextLevel * 1.2);
                    this.showLevelUp();
                }

                this.saveData();
                this.updateUniversalProgress(category, points);
            }

            updateUniversalProgress(category, points) {
                if (typeof window.updateUniversalProgress === 'function') {
                    window.updateUniversalProgress('oracle', points);
                }
            }

            showLevelUp() {
                if (typeof window.showAchievement === 'function') {
                    window.showAchievement(
                        'Oracle Master Level Up!', 
                        `You've reached Oracle Level ${this.data.progress.level}!`,
                        'level-up'
                    );
                }
            }

            saveReading(type, details) {
                const reading = {
                    id: Date.now(),
                    type: type,
                    date: new Date().toLocaleDateString(),
                    time: new Date().toLocaleTimeString(),
                    details: details,
                    timestamp: Date.now()
                };

                this.data.history.unshift(reading);
                if (this.data.history.length > 50) {
                    this.data.history = this.data.history.slice(0, 50);
                }

                this.data.readings[type.toLowerCase()]++;
                this.saveData();
                this.updateProgress(type, 20);
            }
        }

        // Initialize system
        let oracleSystem;
        document.addEventListener('DOMContentLoaded', () => {
            oracleSystem = new OracleDivinationSystem();
        });

        // Tarot Data
        const tarotDeck = [
            // Major Arcana
            { name: "The Fool", meaning: "New beginnings, innocence, spontaneity", icon: "üÉè", type: "major" },
            { name: "The Magician", meaning: "Manifestation, resourcefulness, power", icon: "üé©", type: "major" },
            { name: "The High Priestess", meaning: "Intuition, sacred knowledge, divine feminine", icon: "üîÆ", type: "major" },
            { name: "The Empress", meaning: "Femininity, beauty, nature, abundance", icon: "üëë", type: "major" },
            { name: "The Emperor", meaning: "Authority, structure, control, fatherhood", icon: "‚öúÔ∏è", type: "major" },
            { name: "The Hierophant", meaning: "Spiritual wisdom, religious beliefs, conformity", icon: "üèõÔ∏è", type: "major" },
            { name: "The Lovers", meaning: "Love, harmony, relationships, values alignment", icon: "üíï", type: "major" },
            { name: "The Chariot", meaning: "Control, willpower, success, determination", icon: "üèá", type: "major" },
            { name: "Strength", meaning: "Strength, courage, persuasion, influence", icon: "ü¶Å", type: "major" },
            { name: "The Hermit", meaning: "Soul searching, introspection, inner guidance", icon: "üèÆ", type: "major" },
            { name: "Wheel of Fortune", meaning: "Good luck, karma, life cycles, destiny", icon: "‚ò∏Ô∏è", type: "major" },
            { name: "Justice", meaning: "Justice, fairness, truth, cause and effect", icon: "‚öñÔ∏è", type: "major" },
            { name: "The Hanged Man", meaning: "Surrender, letting go, new perspective", icon: "ü§∏", type: "major" },
            { name: "Death", meaning: "Endings, beginnings, change, transformation", icon: "ü¶ã", type: "major" },
            { name: "Temperance", meaning: "Balance, moderation, patience, purpose", icon: "‚öóÔ∏è", type: "major" },
            { name: "The Devil", meaning: "Shadow self, attachment, addiction, restriction", icon: "üëπ", type: "major" },
            { name: "The Tower", meaning: "Sudden change, upheaval, chaos, revelation", icon: "üóº", type: "major" },
            { name: "The Star", meaning: "Hope, faith, purpose, renewal, spirituality", icon: "‚≠ê", type: "major" },
            { name: "The Moon", meaning: "Illusion, fear, anxiety, subconscious, intuition", icon: "üåô", type: "major" },
            { name: "The Sun", meaning: "Positivity, fun, warmth, success, vitality", icon: "‚òÄÔ∏è", type: "major" },
            { name: "Judgement", meaning: "Rebirth, inner calling, absolution", icon: "üìØ", type: "major" },
            { name: "The World", meaning: "Completion, accomplishment, travel, fulfillment", icon: "üåç", type: "major" }
        ];

        // Rune Data
        const runeStones = [
            { symbol: "·ö†", name: "Fehu", meaning: "Wealth, cattle, prosperity, material success" },
            { symbol: "·ö¢", name: "Uruz", meaning: "Strength, vitality, wild ox, primal power" },
            { symbol: "·ö¶", name: "Thurisaz", meaning: "Giant, thorn, reactive force, conflict" },
            { symbol: "·ö®", name: "Ansuz", meaning: "God, communication, divine inspiration" },
            { symbol: "·ö±", name: "Raidho", meaning: "Journey, travel, rhythm, movement" },
            { symbol: "·ö≤", name: "Kenaz", meaning: "Torch, knowledge, creativity, inspiration" },
            { symbol: "·ö∑", name: "Gebo", meaning: "Gift, partnership, generosity, exchange" },
            { symbol: "·öπ", name: "Wunjo", meaning: "Joy, pleasure, harmony, prosperity" },
            { symbol: "·ö∫", name: "Hagalaz", meaning: "Hail, disruption, challenge, change" },
            { symbol: "·öæ", name: "Nauthiz", meaning: "Need, necessity, constraint, endurance" },
            { symbol: "·õÅ", name: "Isa", meaning: "Ice, standstill, stillness, clarity" },
            { symbol: "·õÉ", name: "Jera", meaning: "Year, harvest, cycle, patience" },
            { symbol: "·õá", name: "Eihwaz", meaning: "Yew tree, death, rebirth, transformation" },
            { symbol: "·õà", name: "Perthro", meaning: "Dice cup, fate, mystery, hidden knowledge" },
            { symbol: "·õâ", name: "Algiz", meaning: "Elk, protection, higher self, spiritual guidance" },
            { symbol: "·õä", name: "Sowilo", meaning: "Sun, success, vitality, enlightenment" },
            { symbol: "·õè", name: "Tiwaz", meaning: "God Tyr, justice, sacrifice, honor" },
            { symbol: "·õí", name: "Berkano", meaning: "Birch, growth, fertility, new beginnings" },
            { symbol: "·õñ", name: "Ehwaz", meaning: "Horse, partnership, trust, loyalty" },
            { symbol: "·õó", name: "Mannaz", meaning: "Man, humanity, self, community" },
            { symbol: "·õö", name: "Laguz", meaning: "Water, flow, intuition, psychic abilities" },
            { symbol: "·õú", name: "Ingwaz", meaning: "God Ing, fertility, internal growth" },
            { symbol: "·õû", name: "Dagaz", meaning: "Day, breakthrough, awakening, clarity" },
            { symbol: "·õü", name: "Othala", meaning: "Ancestral property, heritage, spiritual heritage" }
        ];

        // Angel Cards Data
        const angelCards = [
            { name: "Archangel Michael", message: "You are protected and safe. Have courage to follow your divine path.", icon: "‚öîÔ∏è" },
            { name: "Archangel Gabriel", message: "Important news is coming. Trust your intuitive messages.", icon: "üìØ" },
            { name: "Archangel Raphael", message: "Healing is occurring on all levels. Trust the process.", icon: "üåø" },
            { name: "Archangel Uriel", message: "Illumination comes through wisdom. Seek understanding.", icon: "üí°" },
            { name: "Guardian Angel", message: "You are never alone. Ask for help when you need it.", icon: "üëº" },
            { name: "Angel of Love", message: "Open your heart to give and receive love freely.", icon: "üíñ" },
            { name: "Angel of Peace", message: "Find peace within yourself. Let go of worry and fear.", icon: "üïäÔ∏è" },
            { name: "Angel of Abundance", message: "You are worthy of all good things. Abundance flows to you.", icon: "üåü" },
            { name: "Angel of Creativity", message: "Express your unique gifts. Your creativity blesses the world.", icon: "üé®" },
            { name: "Angel of Wisdom", message: "Trust your inner knowing. The answers are within you.", icon: "ü¶â" },
            { name: "Angel of Healing", message: "Send healing light to yourself and others. You are a healer.", icon: "‚ú®" },
            { name: "Angel of Joy", message: "Choose joy in every moment. Your happiness matters.", icon: "üòá" }
        ];

        // Crystal Oracle Data
        const crystalOracle = [
            { name: "Amethyst", message: "Spiritual awakening and psychic enhancement await you.", icon: "üíú", properties: "Intuition, spiritual growth, protection" },
            { name: "Rose Quartz", message: "Open your heart to love and compassion for yourself and others.", icon: "üå∏", properties: "Love, emotional healing, self-care" },
            { name: "Clear Quartz", message: "Clarity and amplification of your intentions are needed now.", icon: "üíé", properties: "Clarity, amplification, healing" },
            { name: "Citrine", message: "Abundance and manifestation energies are flowing your way.", icon: "üü°", properties: "Abundance, creativity, confidence" },
            { name: "Black Tourmaline", message: "Protection and grounding will help you feel secure.", icon: "‚ö´", properties: "Protection, grounding, cleansing" },
            { name: "Selenite", message: "Divine connection and purification bring peace to your soul.", icon: "ü§ç", properties: "Purification, divine connection, peace" },
            { name: "Labradorite", message: "Magic and transformation are awakening within you.", icon: "üåà", properties: "Magic, transformation, psychic abilities" },
            { name: "Carnelian", message: "Courage and motivation will help you take bold action.", icon: "üß°", properties: "Courage, motivation, creativity" },
            { name: "Moonstone", message: "Divine feminine energy and intuition guide your path.", icon: "üåô", properties: "Intuition, feminine energy, cycles" },
            { name: "Fluorite", message: "Mental clarity and focus will illuminate your next steps.", icon: "üíö", properties: "Mental clarity, focus, learning" }
        ];

        // I-Ching Hexagrams (simplified set)
        const iChingHexagrams = [
            { number: 1, name: "The Creative", meaning: "Original creative force, leadership, strength", trigrams: ["‚ò∞", "‚ò∞"] },
            { number: 2, name: "The Receptive", meaning: "Yielding, nurturing, supporting", trigrams: ["‚ò∑", "‚ò∑"] },
            { number: 11, name: "Peace", meaning: "Harmony, good fortune, prosperity", trigrams: ["‚ò∑", "‚ò∞"] },
            { number: 12, name: "Standstill", meaning: "Stagnation, obstacles, patience needed", trigrams: ["‚ò∞", "‚ò∑"] },
            { number: 25, name: "Innocence", meaning: "Natural action, spontaneity, authenticity", trigrams: ["‚ò∞", "‚ò≥"] },
            { number: 44, name: "Coming to Meet", meaning: "Temptation, careful decision-making", trigrams: ["‚ò∞", "‚ò¥"] },
            { number: 19, name: "Approach", meaning: "Advancement, progress, leadership", trigrams: ["‚ò∑", "‚ò±"] },
            { number: 20, name: "Contemplation", meaning: "Observation, understanding, wisdom", trigrams: ["‚ò¥", "‚ò∑"] }
        ];

        // Main Oracle Functions
        function openTarotReading() {
            const content = `
                <div class="card-display-area">
                    <h3 style="text-align: center; color: var(--accent-gold); margin-bottom: 2rem;">Choose Your Tarot Spread</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                        <button class="divination-btn" onclick="drawTarotCards(1)">
                            üÉè Single Card Reading
                        </button>
                        <button class="divination-btn" onclick="drawTarotCards(3)">
                            üÉè Three Card Spread
                        </button>
                        <button class="divination-btn" onclick="drawTarotCards(5)">
                            üÉè Five Card Cross
                        </button>
                    </div>
                    <div id="tarot-cards-display"></div>
                    <div id="tarot-reading-display"></div>
                </div>
            `;
            
            openOracleModal('üÉè Tarot Card Reading', content);
        }

        function drawTarotCards(count) {
            performance.mark('tarot-draw-start');
            
            const shuffledDeck = [...tarotDeck].sort(() => Math.random() - 0.5);
            const drawnCards = shuffledDeck.slice(0, count);
            
            const cardsDisplay = document.getElementById('tarot-cards-display');
            const readingDisplay = document.getElementById('tarot-reading-display');
            
            // Display cards
            cardsDisplay.innerHTML = `
                <div style="display: flex; justify-content: center; gap: 1rem; margin: 2rem 0; flex-wrap: wrap;">
                    ${drawnCards.map((card, index) => `
                        <div class="oracle-card" onclick="flipCard(${index})" id="card-${index}">
                            <div class="card-back">üîÆ</div>
                            <div class="card-front">
                                <div class="card-icon">${card.icon}</div>
                                <div class="card-name">${card.name}</div>
                                <div class="card-meaning">${card.meaning}</div>
                            </div>
                        </div>
                    `).join('')}
                </div>
                <p style="text-align: center; color: rgba(255, 255, 255, 0.8); margin-bottom: 2rem;">
                    Click each card to reveal your reading
                </p>
            `;
            
            // Generate reading interpretation
            let interpretation = '';
            if (count === 1) {
                interpretation = `Your single card reveals: ${drawnCards[0].meaning}. This card represents your current energy and the guidance you need right now.`;
            } else if (count === 3) {
                interpretation = `Your three-card spread reveals:
                    <br><strong>Past:</strong> ${drawnCards[0].name} - ${drawnCards[0].meaning}
                    <br><strong>Present:</strong> ${drawnCards[1].name} - ${drawnCards[1].meaning}
                    <br><strong>Future:</strong> ${drawnCards[2].name} - ${drawnCards[2].meaning}`;
            } else if (count === 5) {
                interpretation = `Your five-card cross reveals:
                    <br><strong>Present Situation:</strong> ${drawnCards[0].name} - ${drawnCards[0].meaning}
                    <br><strong>Challenge:</strong> ${drawnCards[1].name} - ${drawnCards[1].meaning}
                    <br><strong>Past Influence:</strong> ${drawnCards[2].name} - ${drawnCards[2].meaning}
                    <br><strong>Possible Outcome:</strong> ${drawnCards[3].name} - ${drawnCards[3].meaning}
                    <br><strong>Advice:</strong> ${drawnCards[4].name} - ${drawnCards[4].meaning}`;
            }
            
            readingDisplay.innerHTML = `
                <div class="reading-display">
                    <div class="reading-title">Your Tarot Reading</div>
                    <div class="reading-content">${interpretation}</div>
                    <div style="text-align: center; margin-top: 2rem;">
                        <button class="divination-btn" onclick="saveTarotReading('${JSON.stringify(drawnCards).replace(/"/g, '&quot;')}')">
                            üíæ Save Reading
                        </button>
                    </div>
                </div>
            `;
            
            // Save to history
            oracleSystem.saveReading('tarot', {
                cards: drawnCards,
                spread: count === 1 ? 'Single Card' : count === 3 ? 'Three Card' : 'Five Card Cross',
                interpretation: interpretation
            });
            
            performance.mark('tarot-draw-end');
            performance.measure('tarot-draw', 'tarot-draw-start', 'tarot-draw-end');
        }

        function flipCard(index) {
            const card = document.getElementById(`card-${index}`);
            if (card) {
                card.classList.toggle('flipped');
            }
        }

        function openRuneCasting() {
            const content = `
                <div class="card-display-area">
                    <h3 style="text-align: center; color: var(--accent-gold); margin-bottom: 2rem;">Cast the Ancient Runes</h3>
                    <p style="text-align: center; color: rgba(255, 255, 255, 0.8); margin-bottom: 2rem;">
                        Focus on your question and click to cast 3 runes for guidance
                    </p>
                    <div style="text-align: center; margin-bottom: 2rem;">
                        <button class="divination-btn" onclick="castRunes()">
                            ·ö± Cast Runes
                        </button>
                    </div>
                    <div id="rune-display"></div>
                    <div id="rune-reading-display"></div>
                </div>
            `;
            
            openOracleModal('·ö± Ancient Rune Casting', content);
        }

        function castRunes() {
            const shuffledRunes = [...runeStones].sort(() => Math.random() - 0.5);
            const castRunes = shuffledRunes.slice(0, 3);
            
            const runeDisplay = document.getElementById('rune-display');
            const readingDisplay = document.getElementById('rune-reading-display');
            
            runeDisplay.innerHTML = `
                <div class="rune-display">
                    ${castRunes.map((rune, index) => `
                        <div class="rune-stone selected" style="animation: cardShuffle 0.5s ease-in-out ${index * 0.2}s">
                            ${rune.symbol}
                        </div>
                    `).join('')}
                </div>
            `;
            
            const interpretation = `
                <strong>Past Influence:</strong> ${castRunes[0].name} (${castRunes[0].symbol}) - ${castRunes[0].meaning}
                <br><strong>Present Situation:</strong> ${castRunes[1].name} (${castRunes[1].symbol}) - ${castRunes[1].meaning}
                <br><strong>Future Guidance:</strong> ${castRunes[2].name} (${castRunes[2].symbol}) - ${castRunes[2].meaning}
            `;
            
            readingDisplay.innerHTML = `
                <div class="reading-display">
                    <div class="reading-title">Your Rune Reading</div>
                    <div class="reading-content">${interpretation}</div>
                    <div style="text-align: center; margin-top: 2rem;">
                        <button class="divination-btn" onclick="saveRuneReading('${JSON.stringify(castRunes).replace(/"/g, '&quot;')}')">
                            üíæ Save Reading
                        </button>
                    </div>
                </div>
            `;
            
            oracleSystem.saveReading('runes', {
                runes: castRunes,
                interpretation: interpretation
            });
        }

        function openAngelCards() {
            const content = `
                <div class="card-display-area">
                    <h3 style="text-align: center; color: var(--accent-gold); margin-bottom: 2rem;">Receive Angelic Guidance</h3>
                    <p style="text-align: center; color: rgba(255, 255, 255, 0.8); margin-bottom: 2rem;">
                        Ask your question and let the angels guide you to the perfect message
                    </p>
                    <div style="text-align: center; margin-bottom: 2rem;">
                        <button class="divination-btn" onclick="drawAngelCard()">
                            üëº Draw Angel Card
                        </button>
                    </div>
                    <div id="angel-card-display"></div>
                </div>
            `;
            
            openOracleModal('üëº Angel Card Guidance', content);
        }

        function drawAngelCard() {
            const randomAngel = angelCards[Math.floor(Math.random() * angelCards.length)];
            
            const angelDisplay = document.getElementById('angel-card-display');
            angelDisplay.innerHTML = `
                <div style="text-align: center;">
                    <div class="oracle-card" style="margin: 0 auto 2rem;">
                        <div class="card-front" style="transform: rotateY(0deg);">
                            <div class="card-icon">${randomAngel.icon}</div>
                            <div class="card-name">${randomAngel.name}</div>
                            <div class="card-meaning">${randomAngel.message}</div>
                        </div>
                    </div>
                    <div class="reading-display">
                        <div class="reading-title">Angel Message</div>
                        <div class="reading-content">
                            <strong>${randomAngel.name}</strong> brings you this message:<br>
                            "${randomAngel.message}"
                        </div>
                        <div style="margin-top: 2rem;">
                            <button class="divination-btn" onclick="saveAngelReading('${randomAngel.name}', '${randomAngel.message}')">
                                üíæ Save Message
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            oracleSystem.saveReading('angel', {
                angel: randomAngel.name,
                message: randomAngel.message
            });
        }

        function openIChingOracle() {
            const content = `
                <div class="card-display-area">
                    <h3 style="text-align: center; color: var(--accent-gold); margin-bottom: 2rem;">I-Ching Oracle Consultation</h3>
                    <p style="text-align: center; color: rgba(255, 255, 255, 0.8); margin-bottom: 2rem;">
                        Focus on your question and cast the ancient oracle of change
                    </p>
                    <div style="text-align: center; margin-bottom: 2rem;">
                        <button class="divination-btn" onclick="castIChingOracle()">
                            ‚òØÔ∏è Cast Oracle
                        </button>
                    </div>
                    <div id="iching-display"></div>
                </div>
            `;
            
            openOracleModal('‚òØÔ∏è I-Ching Oracle', content);
        }

        function castIChingOracle() {
            const randomHexagram = iChingHexagrams[Math.floor(Math.random() * iChingHexagrams.length)];
            
            const ichingDisplay = document.getElementById('iching-display');
            ichingDisplay.innerHTML = `
                <div class="hexagram-display">
                    <div class="hexagram">
                        ${Array.from({length: 6}, () => `
                            <div class="hexagram-line ${Math.random() > 0.5 ? 'broken' : ''}"></div>
                        `).join('')}
                    </div>
                    <div class="reading-display">
                        <div class="reading-title">Hexagram ${randomHexagram.number}: ${randomHexagram.name}</div>
                        <div class="reading-content">
                            ${randomHexagram.meaning}
                            <br><br>
                            This hexagram speaks to your current situation and the natural flow of change that surrounds you.
                        </div>
                        <div style="margin-top: 2rem; text-align: center;">
                            <button class="divination-btn" onclick="saveIChingReading('${randomHexagram.name}', '${randomHexagram.meaning}')">
                                üíæ Save Oracle
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            oracleSystem.saveReading('iching', {
                hexagram: randomHexagram.number,
                name: randomHexagram.name,
                meaning: randomHexagram.meaning
            });
        }

        function openCrystalOracle() {
            const content = `
                <div class="card-display-area">
                    <h3 style="text-align: center; color: var(--accent-gold); margin-bottom: 2rem;">Crystal Oracle Wisdom</h3>
                    <p style="text-align: center; color: rgba(255, 255, 255, 0.8); margin-bottom: 2rem;">
                        Let the Earth's crystalline wisdom guide your path
                    </p>
                    <div style="text-align: center; margin-bottom: 2rem;">
                        <button class="divination-btn" onclick="drawCrystalOracle()">
                            üíé Choose Crystal
                        </button>
                    </div>
                    <div id="crystal-display"></div>
                </div>
            `;
            
            openOracleModal('üíé Crystal Oracle', content);
        }

        function drawCrystalOracle() {
            const randomCrystal = crystalOracle[Math.floor(Math.random() * crystalOracle.length)];
            
            const crystalDisplay = document.getElementById('crystal-display');
            crystalDisplay.innerHTML = `
                <div style="text-align: center;">
                    <div style="font-size: 4rem; margin-bottom: 1rem;">${randomCrystal.icon}</div>
                    <div class="reading-display">
                        <div class="reading-title">${randomCrystal.name}</div>
                        <div class="reading-content">
                            <strong>Message:</strong> ${randomCrystal.message}
                            <br><br>
                            <strong>Properties:</strong> ${randomCrystal.properties}
                        </div>
                        <div style="margin-top: 2rem;">
                            <button class="divination-btn" onclick="saveCrystalReading('${randomCrystal.name}', '${randomCrystal.message}')">
                                üíæ Save Crystal Wisdom
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            oracleSystem.saveReading('crystal', {
                crystal: randomCrystal.name,
                message: randomCrystal.message,
                properties: randomCrystal.properties
            });
        }

        function openAstroDice() {
            const content = `
                <div class="card-display-area">
                    <h3 style="text-align: center; color: var(--accent-gold); margin-bottom: 2rem;">Cosmic Astro Dice</h3>
                    <p style="text-align: center; color: rgba(255, 255, 255, 0.8); margin-bottom: 2rem;">
                        Roll the cosmic dice for astrological guidance and timing
                    </p>
                    <div style="text-align: center; margin-bottom: 2rem;">
                        <button class="divination-btn" onclick="rollAstroDice()">
                            üé≤ Roll Cosmic Dice
                        </button>
                    </div>
                    <div id="astro-dice-display"></div>
                </div>
            `;
            
            openOracleModal('üé≤ Astro Dice Oracle', content);
        }

        function rollAstroDice() {
            const signs = ['‚ôà Aries', '‚ôâ Taurus', '‚ôä Gemini', '‚ôã Cancer', '‚ôå Leo', '‚ôç Virgo', '‚ôé Libra', '‚ôè Scorpio', '‚ôê Sagittarius', '‚ôë Capricorn', '‚ôí Aquarius', '‚ôì Pisces'];
            const planets = ['‚òâ Sun', '‚òΩ Moon', '‚òø Mercury', '‚ôÄ Venus', '‚ôÇ Mars', '‚ôÉ Jupiter', '‚ôÑ Saturn', '‚ôÖ Uranus', '‚ôÜ Neptune', '‚ôá Pluto'];
            const houses = ['1st House', '2nd House', '3rd House', '4th House', '5th House', '6th House', '7th House', '8th House', '9th House', '10th House', '11th House', '12th House'];
            
            const rolledSign = signs[Math.floor(Math.random() * signs.length)];
            const rolledPlanet = planets[Math.floor(Math.random() * planets.length)];
            const rolledHouse = houses[Math.floor(Math.random() * houses.length)];
            
            const astroDiceDisplay = document.getElementById('astro-dice-display');
            astroDiceDisplay.innerHTML = `
                <div style="text-align: center;">
                    <div style="display: flex; justify-content: center; gap: 2rem; margin-bottom: 2rem; flex-wrap: wrap;">
                        <div style="background: var(--accent-purple); padding: 1rem; border-radius: 10px; min-width: 100px;">
                            <div style="font-size: 2rem; margin-bottom: 0.5rem;">üé≤</div>
                            <div>${rolledSign}</div>
                        </div>
                        <div style="background: var(--accent-gold); color: black; padding: 1rem; border-radius: 10px; min-width: 100px;">
                            <div style="font-size: 2rem; margin-bottom: 0.5rem;">üé≤</div>
                            <div>${rolledPlanet}</div>
                        </div>
                        <div style="background: var(--accent-cyan); color: black; padding: 1rem; border-radius: 10px; min-width: 100px;">
                            <div style="font-size: 2rem; margin-bottom: 0.5rem;">üé≤</div>
                            <div>${rolledHouse}</div>
                        </div>
                    </div>
                    <div class="reading-display">
                        <div class="reading-title">Cosmic Dice Reading</div>
                        <div class="reading-content">
                            Your cosmic dice reveal: <strong>${rolledPlanet}</strong> in <strong>${rolledSign}</strong> in the <strong>${rolledHouse}</strong>
                            <br><br>
                            This combination suggests focusing on themes related to your planetary energy, sign qualities, and life area for guidance and timing.
                        </div>
                        <div style="margin-top: 2rem;">
                            <button class="divination-btn" onclick="saveAstroReading('${rolledSign}', '${rolledPlanet}', '${rolledHouse}')">
                                üíæ Save Cosmic Reading
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            oracleSystem.saveReading('astro', {
                sign: rolledSign,
                planet: rolledPlanet,
                house: rolledHouse
            });
        }

        // Quick Oracle Functions
        function quickTarotCard() {
            const randomCard = tarotDeck[Math.floor(Math.random() * tarotDeck.length)];
            
            if (typeof window.showNotification === 'function') {
                window.showNotification(`üÉè Daily Tarot: ${randomCard.name} - ${randomCard.meaning}`, 'info', 8000);
            }
            
            oracleSystem.saveReading('tarot', {
                cards: [randomCard],
                spread: 'Daily Card',
                interpretation: randomCard.meaning
            });
        }

        function quickRune() {
            const randomRune = runeStones[Math.floor(Math.random() * runeStones.length)];
            
            if (typeof window.showNotification === 'function') {
                window.showNotification(`·ö± Rune Guidance: ${randomRune.name} (${randomRune.symbol}) - ${randomRune.meaning}`, 'info', 8000);
            }
            
            oracleSystem.saveReading('runes', {
                runes: [randomRune],
                interpretation: randomRune.meaning
            });
        }

        function quickAngel() {
            const randomAngel = angelCards[Math.floor(Math.random() * angelCards.length)];
            
            if (typeof window.showNotification === 'function') {
                window.showNotification(`üëº Angel Message: ${randomAngel.name} says "${randomAngel.message}"`, 'info', 8000);
            }
            
            oracleSystem.saveReading('angel', {
                angel: randomAngel.name,
                message: randomAngel.message
            });
        }

        function quickCrystal() {
            const randomCrystal = crystalOracle[Math.floor(Math.random() * crystalOracle.length)];
            
            if (typeof window.showNotification === 'function') {
                window.showNotification(`üíé Crystal Wisdom: ${randomCrystal.name} - ${randomCrystal.message}`, 'info', 8000);
            }
            
            oracleSystem.saveReading('crystal', {
                crystal: randomCrystal.name,
                message: randomCrystal.message,
                properties: randomCrystal.properties
            });
        }

        // History Functions
        function viewHistory() {
            const historyPanel = document.getElementById('history-panel');
            const historyEntries = document.getElementById('history-entries');
            
            if (oracleSystem.data.history.length === 0) {
                historyEntries.innerHTML = `
                    <div class="history-entry">
                        <div class="entry-type">No readings yet</div>
                        <div class="entry-summary">Start your divination journey by choosing an oracle above</div>
                    </div>
                `;
            } else {
                historyEntries.innerHTML = oracleSystem.data.history.slice(0, 10).map(entry => `
                    <div class="history-entry" onclick="viewHistoryDetails('${entry.id}')">
                        <div class="entry-date">${entry.date} at ${entry.time}</div>
                        <div class="entry-type">${entry.type.toUpperCase()} Reading</div>
                        <div class="entry-summary">
                            ${entry.type === 'tarot' ? `${entry.details.spread} - ${entry.details.cards.length} cards` :
                              entry.type === 'runes' ? `${entry.details.runes.length} runes cast` :
                              entry.type === 'angel' ? `Message from ${entry.details.angel}` :
                              entry.type === 'crystal' ? `${entry.details.crystal} crystal guidance` :
                              entry.type === 'iching' ? `Hexagram: ${entry.details.name}` :
                              'Cosmic dice reading'}
                        </div>
                    </div>
                `).join('');
            }
            
            historyPanel.style.display = historyPanel.style.display === 'none' ? 'block' : 'none';
        }

        // Save Reading Functions
        function saveTarotReading(cardsJson) {
            if (typeof window.showNotification === 'function') {
                window.showNotification('Tarot reading saved to your history! üÉè', 'success');
            }
        }

        function saveRuneReading(runesJson) {
            if (typeof window.showNotification === 'function') {
                window.showNotification('Rune reading saved to your history! ·ö±', 'success');
            }
        }

        function saveAngelReading(angelName, message) {
            if (typeof window.showNotification === 'function') {
                window.showNotification('Angel message saved to your history! üëº', 'success');
            }
        }

        function saveCrystalReading(crystalName, message) {
            if (typeof window.showNotification === 'function') {
                window.showNotification('Crystal wisdom saved to your history! üíé', 'success');
            }
        }

        function saveIChingReading(name, meaning) {
            if (typeof window.showNotification === 'function') {
                window.showNotification('I-Ching oracle saved to your history! ‚òØÔ∏è', 'success');
            }
        }

        function saveAstroReading(sign, planet, house) {
            if (typeof window.showNotification === 'function') {
                window.showNotification('Astro dice reading saved to your history! üé≤', 'success');
            }
        }

        // Modal Functions
        function openOracleModal(title, content) {
            const modal = document.getElementById('oracle-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalContent = document.getElementById('modal-content');
            
            modalTitle.textContent = title;
            modalContent.innerHTML = content;
            modal.style.display = 'flex';
            
            // Prevent body scroll
            document.body.style.overflow = 'hidden';
        }

        function closeOracleModal() {
            const modal = document.getElementById('oracle-modal');
            modal.style.display = 'none';
            
            // Restore body scroll
            document.body.style.overflow = 'auto';
        }

        // Close modal when clicking outside
        document.addEventListener('click', (e) => {
            const modal = document.getElementById('oracle-modal');
            if (e.target === modal) {
                closeOracleModal();
            }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeOracleModal();
            }
        });

        // Performance monitoring
        window.addEventListener('load', () => {
            setTimeout(() => {
                if (performance.getEntriesByType) {
                    const navigationEntries = performance.getEntriesByType('navigation');
                    if (navigationEntries.length > 0) {
                        const loadTime = navigationEntries[0].loadEventEnd - navigationEntries[0].loadEventStart;
                        console.log(`üöÄ Oracle & Divination loaded in ${loadTime.toFixed(2)}ms`);
                    }
                }
            }, 0);
        });
    </script>
</body>
</html>

        .selection-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            color: var(--accent-gold);
            text-align: center;
            margin-bottom: 0.5rem;
        }

        .selection-subtitle {
            text-align: center;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 2rem;
            font-size: 1.1rem;
        }

        .reading-types-horizontal {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .reading-option.compact {
            background: linear-gradient(135deg, rgba(139, 95, 191, 0.2), rgba(212, 175, 55, 0.2));
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .reading-option.compact:hover {
            transform: translateY(-5px);
            border-color: var(--accent-gold);
            box-shadow: 0 10px 30px rgba(212, 175, 55, 0.3);
        }

        .reading-option .reading-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            display: block;
        }

        .reading-content h3 {
            color: var(--accent-gold);
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            font-family: 'Playfair Display', serif;
        }

        .reading-content p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .oracle-action-btn {
            background: linear-gradient(135deg, var(--accent-gold), #F59E0B);
            border: none;
            border-radius: 25px;
            padding: 0.8rem 1.5rem;
            color: #1a1a2e;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .oracle-action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(245, 158, 11, 0.4);
        }

        .card-display-area {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2rem;
            min-height: 500px;
            position: relative;
        }

        .welcome-message {
            text-align: center;
            padding: 3rem 2rem;
        }

        .welcome-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            display: block;
        }

        .welcome-message h3 {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            color: var(--accent-gold);
            margin-bottom: 1rem;
        }

        .welcome-message p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.1rem;
            line-height: 1.6;
            max-width: 600px;
            margin: 0 auto 2rem;
        }

        .oracle-stats {
            display: flex;
            justify-content: center;
            gap: 3rem;
            margin-top: 2rem;
        }

        .stat {
            text-align: center;
        }

        .stat-number {
            display: block;
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--accent-purple);
            font-family: 'Playfair Display', serif;
        }

        .stat-label {
            display: block;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            margin-top: 0.5rem;
        }

        .cards-container {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            padding: 2rem 0;
        }

        .oracle-card-revealed {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 252, 0.9));
            border: 3px solid var(--accent-gold);
            border-radius: 20px;
            padding: 2rem;
            max-width: 350px;
            min-height: 450px;
            color: #1a1a2e;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            transform: translateY(-10px);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .oracle-card-revealed::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--accent-purple), var(--accent-gold));
        }

        .card-header {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .card-image {
            font-size: 4rem;
            margin-bottom: 1rem;
            display: block;
        }

        .card-name {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            color: var(--accent-purple);
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .card-message {
            background: rgba(139, 95, 191, 0.1);
            border-left: 4px solid var(--accent-purple);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 10px 10px 0;
            font-style: italic;
            font-size: 1.1rem;
            line-height: 1.5;
        }

        .card-meaning {
            color: #4a5568;
            line-height: 1.6;
            margin: 1rem 0;
        }

        .card-affirmation {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.2), rgba(245, 158, 11, 0.2));
            border: 2px solid var(--accent-gold);
            border-radius: 15px;
            padding: 1rem;
            margin-top: 1.5rem;
            text-align: center;
            font-weight: 600;
            color: #2d3748;
        }

        .reading-actions {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .action-btn {
            border: none;
            border-radius: 25px;
            padding: 0.8rem 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .action-btn.primary {
            background: linear-gradient(135deg, var(--accent-gold), #F59E0B);
            color: #1a1a2e;
        }

        .action-btn.secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .quick-access-sidebar {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 1.5rem;
            height: fit-content;
            backdrop-filter: blur(20px);
        }

        .quick-access-sidebar h4 {
            color: var(--accent-gold);
            font-size: 1.1rem;
            margin-bottom: 1rem;
            text-align: center;
            font-family: 'Playfair Display', serif;
        }

        .sidebar-actions {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }

        .sidebar-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 0.8rem;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            font-size: 0.85rem;
        }

        .sidebar-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--accent-gold);
            transform: translateX(5px);
        }

        .btn-icon {
            font-size: 1.2rem;
        }

        .btn-label {
            font-weight: 500;
        }

        /* Responsive Design for Streamlined Interface */
        @media (max-width: 1024px) {
            .oracle-main-interface {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .quick-access-sidebar {
                order: -1;
            }
            
            .sidebar-actions {
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .sidebar-btn {
                flex: 1;
                min-width: 120px;
                justify-content: center;
            }
        }

        @media (max-width: 768px) {
            .reading-types-horizontal {
                grid-template-columns: 1fr;
            }
            
            .oracle-stats {
                flex-direction: column;
                gap: 1rem;
            }
            
            .cards-container {
                flex-direction: column;
                align-items: center;
            }
            
            .oracle-card-revealed {
                max-width: 100%;
            }
            
            .reading-actions {
                flex-direction: column;
                align-items: center;
            }
            
            .oracle-main-interface {
                padding: 1rem;
            }
            
            .reading-selection-panel {
                padding: 1.5rem;
            }
        }

        /* Animations */
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }

        /* Card reveal animation */
        .oracle-card-revealed {
            animation: cardReveal 0.8s ease-out;
        }

        @keyframes cardReveal {
            from {
                transform: scale(0.8) rotateY(180deg);
                opacity: 0;
            }
            to {
                transform: scale(1) rotateY(0deg);
                opacity: 1;
            }
        }

        .card-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            display: block;
            text-align: center;
        }

        .card-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--accent-gold);
            margin-bottom: 1rem;
            text-align: center;
        }

        .card-description {
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .card-features {
            list-style: none;
            margin-bottom: 2rem;
        }

        .card-features li {
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 0.5rem;
            padding-left: 1.5rem;
            position: relative;
        }

        .card-features li::before {
            content: '‚ú®';
            position: absolute;
            left: 0;
            color: var(--accent-gold);
        }

        .oracle-btn {
            background: linear-gradient(135deg, var(--accent-purple), var(--accent-gold));
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .oracle-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(139, 92, 246, 0.4);
        }

        /* Oracle Cards Modal Styles */
        .oracle-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            padding: 2rem;
            backdrop-filter: blur(10px);
        }

        .oracle-modal {
            background: var(--primary-bg);
            border-radius: 25px;
            padding: 0;
            max-width: 1400px;
            max-height: 900px;
            width: 100%;
            height: 90vh;
            position: relative;
            border: 2px solid var(--accent-gold);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .oracle-modal-header {
            background: linear-gradient(135deg, var(--accent-purple), var(--accent-gold));
            padding: 2rem;
            text-align: center;
            position: relative;
        }

        .oracle-modal-title {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: white;
            margin: 0;
            text-shadow: var(--text-shadow);
        }

        .oracle-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .oracle-close:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg);
        }

        .oracle-modal-content {
            flex: 1;
            overflow-y: auto;
            padding: 2rem;
        }

        .back-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--glass-border);
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 2rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(-5px);
        }

        /* Reading interface styles */
        .reading-types h3 {
            text-align: center;
            color: var(--accent-gold);
            font-family: 'Playfair Display', serif;
            font-size: 2.2rem;
            margin-bottom: 2rem;
        }

        .reading-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        .reading-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.04));
            border: 2px solid var(--glass-border);
            border-radius: 20px;
            padding: 2.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            min-height: 220px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .reading-card:hover {
            transform: translateY(-8px);
            border-color: var(--accent-gold);
            box-shadow: 0 20px 40px rgba(212, 175, 55, 0.3);
        }

        .reading-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-purple), var(--accent-gold));
            transform: scaleX(0);
            transition: transform 0.4s ease;
        }

        .reading-card:hover::before {
            transform: scaleX(1);
        }

        .reading-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .reading-card h4 {
            color: var(--accent-purple);
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        .reading-card p {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
        }

        .card-selection h3 {
            text-align: center;
            color: var(--accent-gold);
            font-family: 'Playfair Display', serif;
            font-size: 2.2rem;
            margin-bottom: 1rem;
        }

        .card-selection p {
            text-align: center;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 2rem;
            font-size: 1.2rem;
        }

        .card-deck {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 200px));
            gap: 2rem;
            margin: 3rem 0;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
            padding: 3rem;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 20px;
            border: 1px solid var(--glass-border);
            justify-content: center;
        }

        .oracle-card-back {
            aspect-ratio: 2/3;
            background: linear-gradient(135deg, var(--accent-purple), var(--accent-gold));
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            border: 3px solid var(--glass-border);
            min-height: 240px;
            width: 100%;
            max-width: 200px;
            margin: 0 auto;
        }

        .oracle-card-back:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 30px rgba(212, 175, 55, 0.4);
        }

        .card-back-design {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }

        .card-symbol {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
        }

        .card-pattern {
            width: 35px;
            height: 35px;
            border: 3px solid rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            margin-top: 0.5rem;
        }

        .oracle-card-back.selected {
            background: linear-gradient(135deg, var(--accent-gold), #fbbf24);
            animation: pulse 1s infinite;
            transform: scale(1.1);
        }

        .card-selected {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: var(--accent-gold);
            background: linear-gradient(135deg, rgba(139, 95, 191, 0.9), rgba(212, 175, 55, 0.8));
            border-radius: 20px;
            animation: cardReveal 0.8s ease-out;
            position: relative;
            overflow: hidden;
        }

        .card-selected::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(
                from 0deg,
                transparent,
                rgba(212, 175, 55, 0.3),
                transparent,
                rgba(139, 95, 191, 0.3),
                transparent
            );
            animation: mysticalRotate 3s linear infinite;
            z-index: -1;
        }

        .selection-number {
            font-size: 3.5rem;
            font-weight: bold;
            margin-bottom: 1rem;
            text-shadow: 0 0 25px rgba(212, 175, 55, 0.9);
            animation: pulseGold 2s ease-in-out infinite;
        }

        .selection-text {
            font-size: 1.4rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 2px;
            opacity: 0.9;
            text-shadow: 0 0 15px rgba(212, 175, 55, 0.6);
            padding: 0 1rem;
            text-align: center;
        }

        .selection-progress {
            text-align: center;
            margin: 2rem 0;
            font-size: 1.4rem;
            color: var(--accent-gold);
            padding: 1rem;
            background: rgba(212, 175, 55, 0.1);
            border-radius: 15px;
            border: 1px solid var(--accent-gold);
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }

        .reading-results {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 252, 0.95));
            border-radius: 25px;
            padding: 3rem;
            margin: 2rem 0;
            border: 2px solid var(--accent-gold);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
        }

        .reading-results h3 {
            text-align: center;
            color: var(--accent-purple);
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            margin-bottom: 2.5rem;
            padding-bottom: 1rem;
            border-bottom: 3px solid var(--accent-gold);
            font-weight: 700;
        }

        .revealed-cards {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .revealed-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.08));
            border: 3px solid var(--accent-gold);
            border-radius: 25px;
            padding: 2.5rem;
            display: grid;
            grid-template-columns: 1fr 180px 2fr;
            gap: 2.5rem;
            align-items: start;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4), 0 0 30px rgba(212, 175, 55, 0.2);
            backdrop-filter: blur(20px);
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .revealed-card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, 
                rgba(212, 175, 55, 0.3), 
                rgba(139, 95, 191, 0.3), 
                rgba(212, 175, 55, 0.3));
            border-radius: 25px;
            z-index: -1;
            animation: mysticalGlow 4s ease-in-out infinite;
        }

        .revealed-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 35px 70px rgba(0, 0, 0, 0.5), 0 0 50px rgba(212, 175, 55, 0.3);
        }

        .card-position h4 {
            color: var(--accent-purple);
            margin-bottom: 0.8rem;
            font-size: 1.4rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .position-meaning {
            color: rgba(255, 255, 255, 0.7);
            font-style: italic;
            font-size: 0.9rem;
        }

        .card-reveal {
            text-align: center;
            padding: 1.5rem;
            background: linear-gradient(135deg, var(--accent-purple), var(--accent-gold));
            border-radius: 20px;
            color: white;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
            transform: translateY(-5px);
        }

        .card-image {
            font-size: 4rem;
            margin-bottom: 1.2rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .card-name {
            font-family: 'Playfair Display', serif;
            font-size: 1.6rem;
            margin: 0;
            font-weight: 700;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }

        .card-message {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .message-section h5 {
            color: var(--accent-gold);
            margin-bottom: 0.8rem;
            font-size: 1.2rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .message-section p {
            color: rgba(255, 255, 255, 0.95);
            line-height: 1.8;
            margin: 0;
            font-size: 1.1rem;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            border-left: 4px solid var(--accent-gold);
        }

        .affirmation {
            font-style: italic;
            color: var(--accent-gold) !important;
            font-weight: 600;
            font-size: 1.2rem !important;
            text-align: center;
            padding: 1.5rem !important;
            background: rgba(212, 175, 55, 0.15) !important;
            border: 2px solid var(--accent-gold) !important;
            border-radius: 15px !important;
        }

        .reading-actions {
            text-align: center;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid var(--glass-border);
        }

        .reading-summary {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem 0;
            border: 1px solid var(--accent-gold);
        }

        .summary-header h3 {
            color: var(--accent-purple);
            margin-bottom: 1rem;
        }

        .reading-type {
            color: var(--accent-gold);
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .reading-date {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
        }

        .summary-content p {
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .meditation-prompt h4 {
            color: var(--accent-gold);
            margin-bottom: 1rem;
        }

        .meditation-prompt ul {
            list-style: none;
            padding: 0;
        }

        .meditation-prompt li {
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 0.5rem;
            padding-left: 1.5rem;
            position: relative;
        }

        .meditation-prompt li::before {
            content: 'üåü';
            position: absolute;
            left: 0;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(212, 175, 55, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(212, 175, 55, 0); }
            100% { box-shadow: 0 0 0 0 rgba(212, 175, 55, 0); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .oracle-container {
                padding: 1rem;
            }

            .oracle-modal {
                margin: 1rem;
                height: calc(100vh - 2rem);
            }

            .oracle-modal-header {
                padding: 1.5rem;
            }

            .oracle-modal-title {
                font-size: 2rem;
            }

            .oracle-modal-content {
                padding: 1rem;
            }

            .revealed-card {
                grid-template-columns: 1fr;
                gap: 1.5rem;
                text-align: center;
            }

            .card-deck {
                grid-template-columns: repeat(auto-fill, minmax(140px, 180px));
                gap: 1.5rem;
                padding: 2rem;
                justify-content: center;
            }

            .oracle-card-back {
                min-height: 210px;
                max-width: 180px;
            }

            .card-symbol {
                font-size: 3rem;
            }

            .selection-number {
                font-size: 3rem;
            }

            .selection-text {
                font-size: 1.2rem;
            }

            .reading-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
        }

        /* Loading animation */
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(212, 175, 55, 0.3);
            border-top: 4px solid var(--accent-gold);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes mysticalRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes cardFlip {
            0% { transform: perspective(1000px) rotateY(0deg); }
            50% { transform: perspective(1000px) rotateY(90deg); }
            100% { transform: perspective(1000px) rotateY(0deg); }
        }

        @keyframes mysticalGlow {
            0%, 100% { 
                box-shadow: 0 0 20px rgba(139, 95, 191, 0.3);
                border-color: rgba(139, 95, 191, 0.5);
            }
            50% { 
                box-shadow: 0 0 40px rgba(212, 175, 55, 0.6);
                border-color: var(--accent-gold);
            }
        }

        @keyframes cardReveal {
            0% { 
                opacity: 0;
                transform: scale(0.8) rotateY(180deg);
            }
            50% {
                transform: scale(1.1) rotateY(90deg);
            }
            100% { 
                opacity: 1;
                transform: scale(1) rotateY(0deg);
            }
        }

        @keyframes pulseGold {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
        }

        .card-flipping {
            animation: cardFlip 1s ease-in-out;
        }

        .card-revealing {
            animation: cardReveal 1.2s ease-out;
        }

        .mystical-glow {
            animation: mysticalGlow 3s ease-in-out infinite;
        }

        .oracle-pulse {
            animation: pulseGold 2s ease-in-out infinite;
        }
    </style>
</head>
<body>
    <div class="oracle-container">
        <button class="back-btn" onclick="window.parent.postMessage('back', '*')">
            ‚Üê Back to Temple
        </button>

        <div class="oracle-header">
            <div class="card-icon">üîÆ</div>
            <h1 class="oracle-title">Sacred Oracle Cards</h1>
            <p class="oracle-subtitle">52 Powerful Cards ‚Ä¢ Speak Your Future Into Existence</p>
        </div>

        <!-- Streamlined Single-Page Oracle Interface -->
        <div class="oracle-main-interface">
            <!-- Reading Type Selection - Always Visible -->
            <div class="reading-selection-panel">
                <h2 class="selection-title">Choose Your Sacred Reading</h2>
                <p class="selection-subtitle">üåø Close your eyes. Take a deep breath. Let your spirit guide your choice.</p>
                
                <div class="reading-types-horizontal">
                    <div class="reading-option compact" onclick="startSingleReading()">
                        <div class="reading-icon">üåü</div>
                        <div class="reading-content">
                            <h3>Single Card</h3>
                            <p>One powerful declaration</p>
                        </div>
                        <button class="oracle-action-btn">Draw One</button>
                    </div>

                    <div class="reading-option compact" onclick="startThreeReading()">
                        <div class="reading-icon">üîÆ</div>
                        <div class="reading-content">
                            <h3>Three Card Spread</h3>
                            <p>Past ‚Ä¢ Present ‚Ä¢ Future</p>
                        </div>
                        <button class="oracle-action-btn">Draw Three</button>
                    </div>

                    <div class="reading-option compact" onclick="randomCard()">
                        <div class="reading-icon">ÔøΩ</div>
                        <div class="reading-content">
                            <h3>Quick Oracle</h3>
                            <p>Instant guidance</p>
                        </div>
                        <button class="oracle-action-btn">Random</button>
                    </div>
                </div>
            </div>

            <!-- Card Display Area -->
            <div class="card-display-area" id="card-display-area">
                <div class="welcome-message" id="welcome-message">
                    <div class="welcome-icon">‚ú®</div>
                    <h3>Welcome to Your Sacred Oracle</h3>
                    <p>Select a reading type above to begin your divine guidance session. Each card contains prophetic declarations to help you speak your future into existence.</p>
                    <div class="oracle-stats">
                        <div class="stat">
                            <span class="stat-number">52</span>
                            <span class="stat-label">Sacred Cards</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number">‚àû</span>
                            <span class="stat-label">Possibilities</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number">1</span>
                            <span class="stat-label">Divine Truth</span>
                        </div>
                    </div>
                </div>
                
                <div class="cards-container" id="cards-container" style="display: none;">
                    <!-- Cards will be displayed here -->
                </div>
                
                <div class="reading-actions" id="reading-actions" style="display: none;">
                    <button class="action-btn secondary" onclick="resetReading()">üîÑ New Reading</button>
                    <button class="action-btn primary" onclick="saveReading()">üíæ Save Reading</button>
                    <button class="action-btn secondary" onclick="shareReading()">üì§ Share</button>
                </div>
            </div>

            <!-- Quick Access Sidebar -->
            <div class="quick-access-sidebar">
                <h4>üéØ Quick Actions</h4>
                <div class="sidebar-actions">
                    <button class="sidebar-btn" onclick="dailyCard()" title="Daily Card">
                        <span class="btn-icon">üìÖ</span>
                        <span class="btn-label">Daily</span>
                    </button>
                    <button class="sidebar-btn" onclick="viewHistory()" title="Reading History">
                        <span class="btn-icon">üìú</span>
                        <span class="btn-label">History</span>
                    </button>
                    <button class="sidebar-btn" onclick="cardMeditation()" title="Card Meditation">
                        <span class="btn-icon">üßò‚Äç‚ôÄÔ∏è</span>
                        <span class="btn-label">Meditate</span>
                    </button>
                    <button class="sidebar-btn" onclick="oracleSettings()" title="Oracle Settings">
                        <span class="btn-icon">‚öôÔ∏è</span>
                        <span class="btn-label">Settings</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Oracle Cards Modal -->
    <div id="oracle-modal" class="oracle-modal-overlay">
        <div class="oracle-modal">
            <div class="oracle-modal-header">
                <h2 class="oracle-modal-title">Sacred Oracle Cards</h2>
                <button class="oracle-close" onclick="closeOracleModal()">√ó</button>
            </div>
            <div class="oracle-modal-content">
                <div class="loading-spinner"></div>
                <p style="text-align: center; margin-top: 1rem;">Loading sacred Oracle Cards experience...</p>
            </div>
        </div>
    </div>

    <!-- Performance Scripts -->
    <script src="../js/performance.js" defer></script>
    <script src="../js/image-optimizer.js" defer></script>

    <script>
        // Oracle Cards functionality
        function openOracleCards() {
            try {
                const modal = document.getElementById('oracle-modal');
                if (!modal) {
                    throw new Error('Oracle modal not found');
                }
                modal.style.display = 'flex';

                // Start sacred ambient sounds
                playGongSound(136.1, 3);
                setTimeout(() => startAmbientSounds(), 2000);

                // Load the Oracle Cards content
                setTimeout(() => {
                    loadOracleCardsContent();
                }, 500);
            } catch (error) {
                handleOracleError('opening oracle cards', error);
            }
        }

        function closeOracleModal() {
            try {
                const modal = document.getElementById('oracle-modal');
                if (modal) {
                    modal.style.display = 'none';
                    stopAmbientSounds();
                }
            } catch (error) {
                handleOracleError('closing oracle modal', error);
            }
        }

        let currentReading = {
            type: '',
            selectedCards: [],
            revealedCards: []
        };

        // EXPANDED ORACLE CARD DATABASE - 52 Cards for Spiritual Development
        // Focus: Speaking Your Future Into Existence - Words Create Reality
        const oracleCardDatabase = [
            // IDENTITY & DIVINE NATURE Cards (1-10)
            {
                name: "I AM Divine",
                image: "üëë",
                message: "Speak this truth: I AM a divine being having a human experience. My words create my reality.",
                meaning: "Your identity is not found in circumstances, but in who you declare yourself to be. Speak your divine nature into existence.",
                affirmation: "I AM divine. I AM powerful. I AM creating my reality with every word I speak."
            },
            {
                name: "Prophetic Voice",
                image: "üìØ",
                message: "Your words carry prophetic power. What you speak over your life is coming to pass. Choose wisely.",
                meaning: "You are not just predicting the future‚Äîyou are creating it. Every declaration is a prophecy being fulfilled.",
                affirmation: "I speak my future into existence. My words are prophetic declarations that manifest reality."
            },
            {
                name: "Eden Consciousness",
                image: "üåø",
                message: "You never left Eden. Speak this reality until you see it: Paradise is your natural state.",
                meaning: "The fall was a lie. Your words have the power to restore Eden consciousness in your life right now.",
                affirmation: "I live in Eden NOW. I speak paradise into my present reality."
            },
            {
                name: "Mountain Mover",
                image: "‚õ∞Ô∏è",
                message: "Speak to the mountain and it MUST move. Your words command reality to shift.",
                meaning: "Stop talking about the obstacle. Speak TO it. Command it to move. Your words have authority.",
                affirmation: "I speak to mountains and they move. Obstacles bow to my declared word."
            },
            {
                name: "Life & Death Power",
                image: "‚ö°",
                message: "Life and death are in the power of your tongue. You are speaking life over your future NOW.",
                meaning: "Every word is either building your future or destroying it. Speak life. Speak power. Speak destiny.",
                affirmation: "I speak LIFE. My tongue carries creative power and my words build my glorious future."
            },
            {
                name: "God-Frequency",
                image: "üì°",
                message: "You are tuned to God-frequency. What you speak aligns heaven and earth.",
                meaning: "Your words create vibrational alignment. Speaking divine truth tunes you to higher realms.",
                affirmation: "I AM aligned with God-frequency. My words resonate with divine truth and power."
            },
            {
                name: "Decree Authority",
                image: "‚öñÔ∏è",
                message: "You shall decree a thing and it shall be established. This is your authority.",
                meaning: "Decreeing is not hoping or wishing‚Äîit's commanding reality to align with your words.",
                affirmation: "I decree my future and it IS established. My word is law in my reality."
            },
            {
                name: "Light Bearer",
                image: "üî•",
                message: "You ARE the light of the world. Stop asking to be light‚ÄîDECLARE that you are.",
                meaning: "You don't become light, you recognize and declare what you already are. Speak it boldly.",
                affirmation: "I AM the light of the world. My presence illuminates every space I enter."
            },
            {
                name: "Abundance Architect",
                image: "üí∞",
                message: "You are designing your abundance with your words. Speak prosperity as a present reality.",
                meaning: "Abundance is not coming‚Äîit IS. Speak it in present tense. Architect it with declarations.",
                affirmation: "I AM abundantly blessed. Wealth flows to me effortlessly and continuously."
            },
            {
                name: "Limitless Being",
                image: "‚àû",
                message: "Limits exist only in your speech. Delete limitation from your vocabulary. Speak limitlessness.",
                meaning: "Every time you say 'I can't,' you create that reality. Speak 'I AM limitless' instead.",
                affirmation: "I AM limitless in power, possibility, and potential. Nothing can restrict my divine nature."
            },

            // TRANSFORMATION & MANIFESTATION Cards (11-20)
            {
                name: "Reality Sculptor",
                image: "üé®",
                message: "Your words are sculpting tools. Every sentence shapes reality. Sculpt magnificence.",
                meaning: "You are not discovering your future‚Äîyou are sculpting it with declarations and decrees.",
                affirmation: "I sculpt my reality with powerful words. I create beauty, power, and purpose daily."
            },
            {
                name: "Quantum Shifter",
                image: "üåÄ",
                message: "Your declarations collapse quantum possibilities into your chosen reality. Speak and shift.",
                meaning: "Multiple realities exist. Your words determine which one manifests. Choose consciously.",
                affirmation: "I shift reality with my words. I call forth my highest timeline NOW."
            },
            {
                name: "Faith Activator",
                image: "üí´",
                message: "Faith is calling things that are not as though they were. Speak the invisible into visibility.",
                meaning: "Don't wait to see it to believe it. Speak it until you see it. This is faith in action.",
                affirmation: "I call forth things that are not seen. I speak my invisible dreams into visible reality."
            },
            {
                name: "Breakthrough Declaration",
                image: "üö™",
                message: "Breakthrough is not coming‚Äîit's HERE. Change your tense. Speak it present.",
                meaning: "Stop saying 'I will breakthrough.' Say 'I AM breaking through RIGHT NOW.' Feel the shift.",
                affirmation: "I AM breaking through every barrier. Doors of opportunity fly open before me."
            },
            {
                name: "Healing Stream",
                image: "üåä",
                message: "Healing flows through your words. Speak health over every cell. Your body listens.",
                meaning: "Your body responds to your declarations. Speak healing, wholeness, and vitality constantly.",
                affirmation: "I AM healed and whole. Divine health flows through every cell of my being."
            },
            {
                name: "Transformation Code",
                image: "üß¨",
                message: "Your DNA responds to your words. You are reprogramming yourself with each declaration.",
                meaning: "Epigenetics proves words affect biology. Speak transformation into your very cells.",
                affirmation: "I AM transforming at the cellular level. My DNA responds to my powerful declarations."
            },
            {
                name: "Phoenix Fire",
                image: "üî•ü¶Ö",
                message: "From the ashes of old identity, you rise. Speak your resurrection boldly.",
                meaning: "Don't mourn the old you. Declare the new you rising in power and glory.",
                affirmation: "I rise from every ending more powerful. I AM reborn in divine fire and glory."
            },
            {
                name: "Abundance Magnet",
                image: "üß≤",
                message: "You don't chase abundance‚Äîyou magnetize it with declarations. Speak and attract.",
                meaning: "Stop pursuing. Start declaring. Abundance is attracted to powerful, aligned words.",
                affirmation: "I AM a magnet for abundance. Wealth, opportunity, and blessing rush toward me."
            },
            {
                name: "Vision Architect",
                image: "üèóÔ∏è",
                message: "Your vision becomes reality through consistent declaration. Build it with words daily.",
                meaning: "Vision without declaration is fantasy. Speak your vision daily and watch it materialize.",
                affirmation: "I build my vision with words. What I consistently declare becomes my lived reality."
            },
            {
                name: "Miracle Worker",
                image: "‚ú®",
                message: "Miracles follow those who speak them. Declare the miraculous as your new normal.",
                meaning: "Miracles aren't rare‚Äîthey're waiting for your declaration to activate them.",
                affirmation: "I AM a miracle worker. The supernatural is my natural. Miracles are my daily bread."
            },

            // POWER & AUTHORITY Cards (21-30)
            {
                name: "Kingdom Authority",
                image: "‚öúÔ∏è",
                message: "You have been given kingdom authority. Exercise it through powerful decrees.",
                meaning: "Authority unused is authority lost. Speak with the authority you've been given.",
                affirmation: "I walk in kingdom authority. My words carry the weight of divine backing."
            },
            {
                name: "Dominion Voice",
                image: "ü¶Å",
                message: "You were created to have dominion. Let your voice roar with authority.",
                meaning: "Dominion is not passive. It's active declaration of your God-given authority over your life.",
                affirmation: "I have dominion over my life, my mind, and my future. I roar my authority."
            },
            {
                name: "Prophetic Destiny",
                image: "üåü",
                message: "Your destiny is not fixed‚Äîit's prophetically spoken into being by you.",
                meaning: "Stop waiting for destiny. Prophesy it. Speak it. Create it with your words.",
                affirmation: "I prophesy my own destiny. I speak my future into glorious existence."
            },
            {
                name: "Warrior Spirit",
                image: "‚öîÔ∏è",
                message: "You are a spiritual warrior. Your weapon is your tongue. Wield it with precision.",
                meaning: "Words are weapons against limitation, fear, and opposition. Speak with warrior precision.",
                affirmation: "I AM a warrior. My words defeat every enemy and establish my victory."
            },
            {
                name: "Champion Mindset",
                image: "üèÜ",
                message: "Champions don't hope to win‚Äîthey declare victory before the battle. Speak your win.",
                meaning: "Your words before the fight determine the outcome. Declare your championship now.",
                affirmation: "I AM a champion. I win before I enter the arena. Victory is my identity."
            },
            {
                name: "Uncommon Favor",
                image: "üéÅ",
                message: "Favor is attracted to those who boldly declare it. Speak uncommon favor over your life.",
                meaning: "Favor isn't luck‚Äîit's the result of aligning your speech with divine blessing.",
                affirmation: "I walk in uncommon favor. People want to bless me and doors open effortlessly."
            },
            {
                name: "Overcomer Identity",
                image: "üõ°Ô∏è",
                message: "You are not overcoming‚Äîyou ARE an overcomer. It's identity, not effort. Declare it.",
                meaning: "Overcoming is who you are, not what you do. Speak your overcomer identity daily.",
                affirmation: "I AM an overcomer. I conquer every challenge because it's my divine nature."
            },
            {
                name: "Royal Priesthood",
                image: "üëëüî•",
                message: "You are royalty and priest. Speak blessings like royalty. Intercede like a priest.",
                meaning: "Your dual authority as royal priest gives your words double power. Use both.",
                affirmation: "I AM royal priesthood. I speak with authority and intercede with power."
            },
            {
                name: "Wisdom Speaker",
                image: "ü¶â",
                message: "Wisdom flows through those who speak truth. Your words carry divine intelligence.",
                meaning: "When you speak aligned truth, wisdom flows through you and impacts everyone listening.",
                affirmation: "I speak with divine wisdom. My words carry revelation and transformative power."
            },
            {
                name: "Anointed Voice",
                image: "üïäÔ∏è",
                message: "Your voice carries anointing. When you speak, the atmosphere shifts. Use it intentionally.",
                meaning: "Anointing isn't just feeling‚Äîit's the power in your words to change environments.",
                affirmation: "My voice is anointed. When I speak, atmospheres shift and breakthrough manifests."
            },

            // SPIRITUAL ADVANCEMENT Cards (31-40)
            {
                name: "Higher Realms Access",
                image: "üåå",
                message: "Your words grant access to higher realms. Speak heavenly realities into earth.",
                meaning: "As above, so below‚Äîbut only when you speak it. Your words bridge heaven and earth.",
                affirmation: "I access higher realms through my words. I speak heaven into my earthly reality."
            },
            {
                name: "Divine Blueprint",
                image: "üìê",
                message: "There's a divine blueprint for your life. Speak it into manifestation daily.",
                meaning: "Your original design is perfect. Speak alignment with your divine blueprint constantly.",
                affirmation: "I align with my divine blueprint. I speak my perfect design into full manifestation."
            },
            {
                name: "Frequency Elevator",
                image: "üì∂",
                message: "Your words elevate your frequency. Speak higher. Vibrate higher. Manifest higher.",
                meaning: "Every word carries frequency. Choose words that elevate you to manifestation frequency.",
                affirmation: "I elevate my frequency with high-vibration words. I speak myself to new levels."
            },
            {
                name: "Spiritual Authority",
                image: "‚ö°üëë",
                message: "You have been given all spiritual authority. Exercise it through bold declaration.",
                meaning: "Spiritual authority is activated by speech. Silent authority is dormant authority.",
                affirmation: "I walk in complete spiritual authority. I speak and demonic forces flee."
            },
            {
                name: "Enlightenment Path",
                image: "üí°",
                message: "Enlightenment comes through speaking truth until you embody it. Speak your awakening.",
                meaning: "Enlightenment isn't mystical silence‚Äîit's declaring truth until you become it.",
                affirmation: "I AM enlightened. I speak truth and embody divine consciousness."
            },
            {
                name: "Sacred Remembrance",
                image: "üß†‚ú®",
                message: "You are remembering who you truly are. Speak it: 'I AM divine. I never fell.'",
                meaning: "The fall was amnesia. Remembrance is speaking your true identity until you know it.",
                affirmation: "I remember who I AM. I never left Eden. I AM divine consciousness embodied."
            },
            {
                name: "Ascension Codes",
                image: "üîê",
                message: "Ascension codes are activated by specific declarations. Speak your elevation.",
                meaning: "Your DNA carries ascension codes unlocked by declaring your divine identity.",
                affirmation: "I activate my ascension codes. I speak elevation and my entire being responds."
            },
            {
                name: "Portal Opener",
                image: "üåÄüö™",
                message: "Your words open portals to new dimensions. Speak and watch doorways appear.",
                meaning: "Portals to opportunity, provision, and power open when you decree them open.",
                affirmation: "I open portals with my words. Doors to new dimensions swing wide before me."
            },
            {
                name: "Christos Consciousness",
                image: "‚òÄÔ∏è",
                message: "Christ consciousness is declaring 'I and the Father are one.' Speak your oneness.",
                meaning: "Christos means anointed. Declare your anointing and oneness with Source.",
                affirmation: "I AM one with Source. Christ consciousness flows through my words and being."
            },
            {
                name: "Awakened One",
                image: "üëÅÔ∏èüî•",
                message: "You ARE awakened. Not becoming‚Äîyou ARE. Speak it until every cell knows it.",
                meaning: "Awakening is not a process‚Äîit's a declaration. Speak 'I AM awake' until it's embodied.",
                affirmation: "I AM fully awakened. I see clearly. I speak powerfully. I create consciously."
            },

            // MANIFESTATION & CREATION Cards (41-52)
            {
                name: "Creative Word",
                image: "üé®üåç",
                message: "In the beginning was the Word. You create worlds with your words. Speak worlds.",
                meaning: "Words don't describe reality‚Äîthey create it. You are a world-builder through speech.",
                affirmation: "I create with my words. I speak and worlds form. My tongue is a creative force."
            },
            {
                name: "Prosperity Declaration",
                image: "üíé",
                message: "Prosperity responds to declaration, not desperation. Decree abundance confidently.",
                meaning: "Begging repels abundance. Declaring attracts it. Speak prosperity as one who owns it.",
                affirmation: "I decree prosperity. Wealth is mine by declaration and divine right."
            },
            {
                name: "Health Commander",
                image: "üí™‚ú®",
                message: "Command health into your body. Don't ask‚Äîdecree. Your body listens to authority.",
                meaning: "Your body is waiting for commands, not requests. Speak health with authority.",
                affirmation: "I command perfect health. Every organ, system, and cell obeys my decree."
            },
            {
                name: "Relationship Builder",
                image: "üíï",
                message: "Speak the relationships you desire into existence. Your words attract your tribe.",
                meaning: "Divine connections are magnetized by declaring the quality of relationships you deserve.",
                affirmation: "I speak divine relationships into my life. My tribe is finding me NOW."
            },
            {
                name: "Purpose Activator",
                image: "üéØ",
                message: "Your purpose activates when you speak it boldly. Declare your mission daily.",
                meaning: "Purpose isn't found‚Äîit's activated through declaration and aligned action.",
                affirmation: "I activate my purpose through declaration. My mission is clear and manifesting."
            },
            {
                name: "Joy Fountain",
                image: "üòäüí¶",
                message: "Joy flows from speaking gratitude and declaring goodness. Speak joy into being.",
                meaning: "Joy isn't circumstantial‚Äîit's created by declaring thankfulness and blessing.",
                affirmation: "I AM overflowing with joy. I speak gratitude and joy fountains from within."
            },
            {
                name: "Peace Establisher",
                image: "üïäÔ∏è‚òÆÔ∏è",
                message: "Speak peace to your storms. Command calm. Peace is established by decree.",
                meaning: "Peace isn't passive waiting‚Äîit's active declaration of 'Peace, be still.'",
                affirmation: "I establish peace with my words. I speak to chaos and it becomes calm."
            },
            {
                name: "Energy Alchemist",
                image: "‚öóÔ∏è‚ú®",
                message: "You transmute energy with words. Speak transformation and watch energy shift.",
                meaning: "Alchemy isn't chemistry‚Äîit's using words to transform energy and matter.",
                affirmation: "I AM an energy alchemist. I speak transformation and reality shifts."
            },
            {
                name: "Timeline Shifter",
                image: "‚è∞üåÄ",
                message: "You can shift timelines with declarations. Speak yourself onto your highest path.",
                meaning: "Multiple timelines exist. Your words determine which one you experience.",
                affirmation: "I shift to my highest timeline NOW. I speak and quantum possibilities align."
            },
            {
                name: "Legacy Creator",
                image: "üèõÔ∏è",
                message: "Your words today create your legacy tomorrow. Speak generational blessing.",
                meaning: "Legacy isn't what you leave‚Äîit's what you speak that outlives you.",
                affirmation: "I create a powerful legacy. My words echo through generations and create blessing."
            },
            {
                name: "Overflow Life",
                image: "üåäüí´",
                message: "Overflow is your portion. Not just enough‚ÄîOVERFLOW. Speak abundance in every area.",
                meaning: "God's economy is overflow. Speak it. Expect it. Receive it in every area.",
                affirmation: "I live in overflow. More than enough is my reality in every area of life."
            },
            {
                name: "Glory Carrier",
                image: "üëë‚ú®",
                message: "You carry glory everywhere. Speak it. Shine it. Let it radiate through your words.",
                meaning: "Glory isn't something you seek‚Äîit's something you ARE. Declare it and radiate it.",
                affirmation: "I AM a glory carrier. Divine radiance shines through me and my words."
            }
        ];

        // ============================================
        // SACRED SOUND SYSTEM - Natural Outdoor Spiritual Atmosphere
        // ============================================

        let audioContext = null;
        let backgroundSoundInterval = null;

        // Initialize Web Audio API
        function initAudioContext() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
            return audioContext;
        }

        // Play Tibetan Singing Bowl / Gong Sound
        function playGongSound(frequency = 136.1, duration = 2.5) {
            const ctx = initAudioContext();
            const now = ctx.currentTime;

            // Create oscillators for rich harmonic sound
            const oscillator1 = ctx.createOscillator();
            const oscillator2 = ctx.createOscillator();
            const oscillator3 = ctx.createOscillator();

            const gainNode = ctx.createGain();
            const filter = ctx.createBiquadFilter();

            // Fundamental and harmonics
            oscillator1.frequency.value = frequency;
            oscillator2.frequency.value = frequency * 2.0;
            oscillator3.frequency.value = frequency * 3.0;

            // Sine waves for pure tone
            oscillator1.type = 'sine';
            oscillator2.type = 'sine';
            oscillator3.type = 'sine';

            // Low-pass filter for warmth
            filter.type = 'lowpass';
            filter.frequency.value = 800;
            filter.Q.value = 1;

            // Volume envelope (bell/gong decay)
            gainNode.gain.setValueAtTime(0.4, now);
            gainNode.gain.exponentialRampToValueAtTime(0.01, now + duration);

            // Connect audio graph
            oscillator1.connect(gainNode);
            oscillator2.connect(gainNode);
            oscillator3.connect(gainNode);
            gainNode.connect(filter);
            filter.connect(ctx.destination);

            // Play
            oscillator1.start(now);
            oscillator2.start(now);
            oscillator3.start(now);

            oscillator1.stop(now + duration);
            oscillator2.stop(now + duration);
            oscillator3.stop(now + duration);
        }

        // Play Wind Chime Sound
        function playChimeSound(baseFreq = 523.25) {
            const ctx = initAudioContext();
            const now = ctx.currentTime;

            // Multiple chime tones (like wind chimes)
            const frequencies = [baseFreq, baseFreq * 1.5, baseFreq * 2, baseFreq * 2.5];
            const delays = [0, 0.05, 0.1, 0.15];

            frequencies.forEach((freq, index) => {
                const oscillator = ctx.createOscillator();
                const gainNode = ctx.createGain();

                oscillator.frequency.value = freq;
                oscillator.type = 'sine';

                // Gentle chime envelope
                const startTime = now + delays[index];
                gainNode.gain.setValueAtTime(0, startTime);
                gainNode.gain.linearRampToValueAtTime(0.15, startTime + 0.01);
                gainNode.gain.exponentialRampToValueAtTime(0.01, startTime + 1.2);

                oscillator.connect(gainNode);
                gainNode.connect(ctx.destination);

                oscillator.start(startTime);
                oscillator.stop(startTime + 1.2);
            });
        }

        // Play Card Flip Sound (whoosh + chime)
        function playFlipSound() {
            const ctx = initAudioContext();
            const now = ctx.currentTime;

            // Whoosh sound (filtered white noise)
            const bufferSize = ctx.sampleRate * 0.3;
            const buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
            const data = buffer.getChannelData(0);

            for (let i = 0; i < bufferSize; i++) {
                data[i] = Math.random() * 2 - 1;
            }

            const noise = ctx.createBufferSource();
            noise.buffer = buffer;

            const noiseFilter = ctx.createBiquadFilter();
            noiseFilter.type = 'bandpass';
            noiseFilter.frequency.value = 1000;
            noiseFilter.Q.value = 1;

            const noiseGain = ctx.createGain();
            noiseGain.gain.setValueAtTime(0.1, now);
            noiseGain.gain.exponentialRampToValueAtTime(0.01, now + 0.3);

            noise.connect(noiseFilter);
            noiseFilter.connect(noiseGain);
            noiseGain.connect(ctx.destination);

            noise.start(now);
            noise.stop(now + 0.3);

            // Add gentle chime at the end
            setTimeout(() => playChimeSound(659.25), 150);
        }

        // Play Card Selection Sound (higher chime)
        function playSelectSound() {
            playChimeSound(783.99);
        }

        // Play Hover Sound (very subtle high chime)
        function playHoverSound() {
            const ctx = initAudioContext();
            const now = ctx.currentTime;

            const oscillator = ctx.createOscillator();
            const gainNode = ctx.createGain();

            oscillator.frequency.value = 1046.50;
            oscillator.type = 'sine';

            gainNode.gain.setValueAtTime(0, now);
            gainNode.gain.linearRampToValueAtTime(0.08, now + 0.01);
            gainNode.gain.exponentialRampToValueAtTime(0.01, now + 0.4);

            oscillator.connect(gainNode);
            gainNode.connect(ctx.destination);

            oscillator.start(now);
            oscillator.stop(now + 0.4);
        }

        // Play Card Reveal Sound (deep mystical gong)
        function playRevealSound() {
            playGongSound(136.1, 3);
            setTimeout(() => playChimeSound(523.25), 300);
        }

        // Play Bird Chirp (occasional ambient)
        function playBirdChirp() {
            const ctx = initAudioContext();
            const now = ctx.currentTime;

            const oscillator = ctx.createOscillator();
            const gainNode = ctx.createGain();
            const filter = ctx.createBiquadFilter();

            // Bird-like frequency modulation
            oscillator.frequency.setValueAtTime(2000, now);
            oscillator.frequency.exponentialRampToValueAtTime(3000, now + 0.05);
            oscillator.frequency.exponentialRampToValueAtTime(2500, now + 0.1);

            oscillator.type = 'sine';

            filter.type = 'bandpass';
            filter.frequency.value = 2500;
            filter.Q.value = 10;

            gainNode.gain.setValueAtTime(0, now);
            gainNode.gain.linearRampToValueAtTime(0.05, now + 0.01);
            gainNode.gain.linearRampToValueAtTime(0, now + 0.1);

            oscillator.connect(filter);
            filter.connect(gainNode);
            gainNode.connect(ctx.destination);

            oscillator.start(now);
            oscillator.stop(now + 0.15);
        }

        // Play Wind Sound (soft ambient)
        function playWindSound() {
            const ctx = initAudioContext();
            const now = ctx.currentTime;

            const bufferSize = ctx.sampleRate * 2;
            const buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
            const data = buffer.getChannelData(0);

            for (let i = 0; i < bufferSize; i++) {
                data[i] = (Math.random() * 2 - 1) * 0.02;
            }

            const noise = ctx.createBufferSource();
            noise.buffer = buffer;

            const filter = ctx.createBiquadFilter();
            filter.type = 'lowpass';
            filter.frequency.value = 400;
            filter.Q.value = 1;

            const gainNode = ctx.createGain();
            gainNode.gain.setValueAtTime(0, now);
            gainNode.gain.linearRampToValueAtTime(0.08, now + 0.5);
            gainNode.gain.setValueAtTime(0.08, now + 1.5);
            gainNode.gain.linearRampToValueAtTime(0, now + 2);

            noise.connect(filter);
            filter.connect(gainNode);
            gainNode.connect(ctx.destination);

            noise.start(now);
            noise.stop(now + 2);
        }

        // Start ambient nature sounds when modal opens
        function startAmbientSounds() {
            stopAmbientSounds(); // Clear any existing

            // Play gentle wind every 15-25 seconds
            const playRandomWind = () => {
                playWindSound();
                const nextWind = 15000 + Math.random() * 10000;
                setTimeout(playRandomWind, nextWind);
            };

            // Play bird chirps every 20-40 seconds
            const playRandomBird = () => {
                if (Math.random() > 0.3) { // 70% chance
                    playBirdChirp();
                    setTimeout(() => {
                        if (Math.random() > 0.5) playBirdChirp(); // Double chirp sometimes
                    }, 150);
                }
                const nextBird = 20000 + Math.random() * 20000;
                setTimeout(playRandomBird, nextBird);
            };

            setTimeout(playRandomWind, 3000);
            setTimeout(playRandomBird, 8000);
        }

        function stopAmbientSounds() {
            if (backgroundSoundInterval) {
                clearInterval(backgroundSoundInterval);
                backgroundSoundInterval = null;
            }
        }

        // Wrapper function for reading selection with sound
        function playSoundAndStart(type) {
            playGongSound(136.1, 2);
            setTimeout(() => startReading(type), 300);
        }

        // ============================================
        // END SOUND SYSTEM
        // ============================================

        function loadOracleCardsContent() {
            const content = document.querySelector('#oracle-modal .oracle-modal-content');
            
            content.innerHTML = `
                <!-- Reading Type Selection -->
                <div class="reading-types" id="reading-types">
                    <h3>Choose Your Sacred Reading</h3>
                    <p style="text-align: center; color: rgba(255, 255, 255, 0.7); margin-bottom: 2rem; font-size: 1.1rem;">
                        üåø Close your eyes. Take a deep breath. Listen to the sacred sounds and let your spirit guide your choice.
                    </p>
                    <div class="reading-grid">
                        <div class="reading-card" onclick="playSoundAndStart('single')" onmouseover="playHoverSound()">
                            <div class="reading-icon">üåü</div>
                            <h4>Single Card Guidance</h4>
                            <p>One powerful declaration for your present moment. Clear. Direct. Transformative.</p>
                        </div>

                        <div class="reading-card" onclick="playSoundAndStart('three')" onmouseover="playHoverSound()">
                            <div class="reading-icon">üîÆ</div>
                            <h4>Three Card Spread</h4>
                            <p>Past ‚Ä¢ Present ‚Ä¢ Future - See the flow of your spiritual journey through time.</p>
                        </div>
                    </div>
                </div>
                
                <!-- Card Selection Interface -->
                <div class="card-selection" id="card-selection" style="display: none;">
                    <h3 id="selection-title">Select Your Cards</h3>
                    <p id="selection-instruction">Take a deep breath and choose the cards that call to you</p>
                    
                    <div class="card-deck" id="card-deck">
                        <!-- Cards will be generated here -->
                    </div>
                    
                    <div class="selection-progress">
                        <span id="cards-selected">0</span> / <span id="cards-needed">1</span> cards selected
                    </div>
                    
                    <button id="reveal-cards" onclick="revealSelectedCards()" style="display: none;" class="oracle-btn">
                        ‚ú® Reveal Divine Messages ‚ú®
                    </button>
                </div>
                
                <!-- Reading Results -->
                <div class="reading-results" id="reading-results" style="display: none;">
                    <h3>Your Divine Reading</h3>
                    <div id="revealed-cards" class="revealed-cards">
                        <!-- Revealed cards will appear here -->
                    </div>
                    
                    <div class="reading-actions">
                        <button onclick="saveReading()" class="oracle-btn secondary">üìñ Save Reading</button>
                        <button onclick="shareReading()" class="oracle-btn secondary">ü§ù Share Insight</button>
                        <button onclick="newReading()" class="oracle-btn">üîÆ New Reading</button>
                    </div>
                </div>
            `;
            
            generateCardDeck();
        }

        function generateCardDeck() {
            const deck = document.getElementById('card-deck');
            if (!deck) return;
            
            deck.innerHTML = '';
            
            // Create shuffled deck
            const shuffledCards = [...oracleCardDatabase].sort(() => Math.random() - 0.5);

            // Generate 52 cards in a sacred arrangement (full deck)
            for (let i = 0; i < 52; i++) {
                const cardElement = document.createElement('div');
                cardElement.className = 'oracle-card-back';
                cardElement.onclick = () => selectCard(i, shuffledCards[i]);
                cardElement.onmouseover = () => playHoverSound();
                cardElement.ontouchstart = () => playHoverSound();
                cardElement.innerHTML = `
                    <div class="card-back-design">
                        <div class="card-symbol">üîÆ</div>
                        <div class="card-pattern"></div>
                    </div>
                `;
                deck.appendChild(cardElement);
            }
        }

        function startReading(type) {
            currentReading.type = type;
            currentReading.selectedCards = [];
            currentReading.revealedCards = [];
            
            document.getElementById('reading-types').style.display = 'none';
            document.getElementById('card-selection').style.display = 'block';
            
            const titles = {
                'single': 'Select One Card',
                'three': 'Select Three Cards'
            };

            const instructions = {
                'single': 'Close your eyes, breathe deeply, and choose the card that calls to your spirit',
                'three': 'Choose three cards for Past ‚Ä¢ Present ‚Ä¢ Future insight into your journey'
            };

            const cardsNeeded = {
                'single': 1,
                'three': 3
            };
            
            document.getElementById('selection-title').textContent = titles[type];
            document.getElementById('selection-instruction').textContent = instructions[type];
            document.getElementById('cards-needed').textContent = cardsNeeded[type];
            
            generateCardDeck();
        }

        function selectCard(index, cardData) {
            const cardElement = document.querySelectorAll('.oracle-card-back')[index];
            const neededCards = parseInt(document.getElementById('cards-needed').textContent);

            if (currentReading.selectedCards.length >= neededCards) {
                return; // Max cards selected
            }

            // Play card flip sound immediately
            playFlipSound();

            // Add magical selection animation
            cardElement.classList.add('card-flipping');

            // Play selection sound after flip completes
            setTimeout(() => {
                cardElement.classList.remove('card-flipping');
                cardElement.classList.add('selected', 'mystical-glow');

                // Play selection confirmation sound
                playSelectSound();

                cardElement.innerHTML = `
                    <div class="card-selected">
                        <div class="selection-number">${currentReading.selectedCards.length + 1}</div>
                        <div class="card-symbol">‚ú®</div>
                        <div class="selection-text">Selected</div>
                    </div>
                `;

                // Add pulse effect
                cardElement.classList.add('oracle-pulse');
            }, 500);
            
            currentReading.selectedCards.push({
                index: index,
                data: cardData,
                element: cardElement
            });
            
            document.getElementById('cards-selected').textContent = currentReading.selectedCards.length;
            
            if (currentReading.selectedCards.length === neededCards) {
                setTimeout(() => {
                    const revealBtn = document.getElementById('reveal-cards');
                    revealBtn.style.display = 'block';
                    revealBtn.classList.add('oracle-pulse');
                }, 800);
            }
        }

        function revealSelectedCards() {
            // Play deep mystical reveal sound
            playRevealSound();

            // Smooth transition with fade effects
            const cardSelection = document.getElementById('card-selection');
            const readingResults = document.getElementById('reading-results');

            cardSelection.style.opacity = '0';
            cardSelection.style.transform = 'translateY(-20px)';

            setTimeout(() => {
                cardSelection.style.display = 'none';
                readingResults.style.display = 'block';
                readingResults.style.opacity = '0';
                readingResults.style.transform = 'translateY(20px)';

                // Smooth fade in
                setTimeout(() => {
                    readingResults.style.transition = 'all 0.8s ease-out';
                    readingResults.style.opacity = '1';
                    readingResults.style.transform = 'translateY(0)';
                }, 100);
            }, 400);
            
            const revealedContainer = document.getElementById('revealed-cards');
            revealedContainer.innerHTML = '';
            
            const positions = getReadingPositions(currentReading.type);
            
            // Staggered card reveal animation
            currentReading.selectedCards.forEach((card, index) => {
                setTimeout(() => {
                    const cardReveal = document.createElement('div');
                    cardReveal.className = 'revealed-card';
                    cardReveal.style.opacity = '0';
                    cardReveal.style.transform = 'translateY(30px) scale(0.9)';
                    
                    const position = positions[index] || { name: `Card ${index + 1}`, meaning: 'General guidance' };
                    
                    cardReveal.innerHTML = `
                        <div class="card-position">
                            <h4>${position.name}</h4>
                            <p class="position-meaning">${position.meaning}</p>
                        </div>
                        
                        <div class="card-reveal">
                            <div class="card-image mystical-glow">${card.data.image}</div>
                            <h3 class="card-name">${card.data.name}</h3>
                        </div>
                        
                        <div class="card-message">
                            <div class="message-section">
                                <h5>üí´ Divine Message</h5>
                                <p>${card.data.message}</p>
                            </div>
                            
                            <div class="message-section">
                                <h5>üîç Meaning</h5>
                                <p>${card.data.meaning}</p>
                            </div>
                            
                            <div class="message-section">
                                <h5>üåü Affirmation</h5>
                                <p class="affirmation">"${card.data.affirmation}"</p>
                            </div>
                        </div>
                    `;
                    
                    revealedContainer.appendChild(cardReveal);
                    
                    // Animate card into view
                    setTimeout(() => {
                        cardReveal.style.transition = 'all 0.8s ease-out';
                        cardReveal.style.opacity = '1';
                        cardReveal.style.transform = 'translateY(0) scale(1)';
                        cardReveal.classList.add('card-revealing');
                    }, 100);
                    
                }, index * 600); // Stagger each card by 600ms
            });
            
            // Add overall reading summary after all cards are revealed
            setTimeout(() => {
                addReadingSummary();
            }, currentReading.selectedCards.length * 600 + 800);
        }

        function getReadingPositions(type) {
            const positions = {
                'single': [
                    { name: 'Your Prophetic Declaration', meaning: 'Speak this word over your life NOW' }
                ],
                'three': [
                    { name: 'Past Foundation', meaning: 'What you\'ve spoken into existence' },
                    { name: 'Present Power', meaning: 'The word you are speaking NOW' },
                    { name: 'Future Manifestation', meaning: 'What your declarations are creating' }
                ]
            };

            return positions[type] || [];
        }

        function addReadingSummary() {
            const summary = document.createElement('div');
            summary.className = 'reading-summary';
            
            const readingTypes = {
                'single': 'Single Card Prophetic Declaration',
                'three': 'Three Card Power Spread'
            };
            
            summary.innerHTML = `
                <div class="summary-header">
                    <h3>‚ú® Reading Summary</h3>
                    <p class="reading-type">${readingTypes[currentReading.type]}</p>
                    <p class="reading-date">${new Date().toLocaleDateString()}</p>
                </div>
                
                <div class="summary-content">
                    <p>Your divine oracle reading reveals important guidance for your spiritual journey. Meditate on these messages and allow their wisdom to integrate into your consciousness.</p>
                    
                    <div class="meditation-prompt">
                        <h4>üßò Reflection Questions</h4>
                        <ul>
                            <li>How do these messages resonate with my current life situation?</li>
                            <li>What actions can I take based on this guidance?</li>
                            <li>Which affirmation speaks most strongly to my heart?</li>
                            <li>How can I apply this wisdom in my daily spiritual practice?</li>
                        </ul>
                    </div>
                </div>
            `;
            
            document.getElementById('revealed-cards').appendChild(summary);
        }

        function saveReading() {
            const readingData = {
                type: currentReading.type,
                date: new Date().toISOString(),
                cards: currentReading.selectedCards.map(card => ({
                    name: card.data.name,
                    message: card.data.message,
                    meaning: card.data.meaning,
                    affirmation: card.data.affirmation
                }))
            };
            
            const savedReadings = JSON.parse(localStorage.getItem('oracleReadings') || '[]');
            savedReadings.push(readingData);
            localStorage.setItem('oracleReadings', JSON.stringify(savedReadings));
            
            alert('üîÆ Reading saved to your spiritual journal! ‚ú®');
        }

        function shareReading() {
            const readingText = currentReading.selectedCards.map(card => 
                `${card.data.name}: ${card.data.message}`
            ).join('\n\n');
            
            if (navigator.share) {
                navigator.share({
                    title: 'Divine Oracle Reading',
                    text: `My Oracle Card Reading:\n\n${readingText}`,
                    url: window.location.href
                });
            } else {
                navigator.clipboard.writeText(readingText).then(() => {
                    alert('ü§ù Reading copied to clipboard for sharing! ‚ú®');
                });
            }
        }

        function newReading() {
            document.getElementById('reading-results').style.display = 'none';
            document.getElementById('reading-types').style.display = 'block';
            currentReading = { type: '', selectedCards: [], revealedCards: [] };
        }

        function openTarotCards() {
            alert('üåü Tarot Wisdom coming soon! Stay tuned for this powerful divination tool.');
        }

        function openRuneCasting() {
            alert('·ö± Ancient Runes coming soon! The old wisdom awaits.');
        }

        function openPendulum() {
            alert('üîÆ Pendulum Guidance coming soon! Divine answers await.');
        }

        function openIChing() {
            alert('‚òØ I Ching Oracle coming soon! Ancient Chinese wisdom will be available.');
        }

        function openNumerology() {
            alert('üî¢ Sacred Numerology coming soon! Discover your numbers\' power.');
        }

        // Close modal when clicking outside
        document.getElementById('oracle-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeOracleModal();
            }
        });

        // Handle escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeOracleModal();
            }
        });

        // Phase 9: Theme System Integration
        window.addEventListener('message', function(event) {
            if (event.data.type === 'themeUpdate') {
                console.log(`üé® Oracle section receiving theme update: ${event.data.theme}`);
                applyThemeToSection(event.data.theme);
            }
        });

        function applyThemeToSection(themeName) {
            // Apply theme classes to body
            document.body.className = document.body.className.replace(/theme-\w+/g, '');
            document.body.classList.add(`theme-${themeName}`);
            
            console.log(`‚ú® Oracle section theme applied: ${themeName}`);
        }

        // Performance tracking
        window.addEventListener('load', () => {
            console.log('üîÆ Oracle & Divination tools with Phase 9 theming loaded successfully');
            validateOracleFunctions();
        });

        // Oracle Function Validation System
        function validateOracleFunctions() {
            const requiredFunctions = [
                'openOracleCards', 'closeOracleModal', 'loadOracleCardsContent',
                'generateCardDeck', 'startReading', 'selectCard', 'revealSelectedCards',
                'saveReading', 'shareReading', 'newReading'
            ];
            
            const missing = [];
            requiredFunctions.forEach(funcName => {
                if (typeof window[funcName] !== 'function') {
                    missing.push(funcName);
                }
            });
            
            if (missing.length > 0) {
                console.warn('‚ö†Ô∏è Oracle: Missing functions:', missing);
                return false;
            }
            
            console.log('‚úÖ Oracle: All functions validated successfully');
            return true;
        }

        // Enhanced Error Handling for Oracle Operations
        function handleOracleError(operation, error) {
            console.error(`üîÆ Oracle Error in ${operation}:`, error);
            
            // Show user-friendly notification
            const notification = document.createElement('div');
            notification.className = 'oracle-error-notification';
            notification.innerHTML = `
                <div style="
                    position: fixed; top: 20px; right: 20px; z-index: 10000;
                    background: linear-gradient(135deg, #DC2626, #B91C1C);
                    color: white; padding: 1rem; border-radius: 12px;
                    box-shadow: 0 10px 30px rgba(220, 38, 38, 0.3);
                    animation: slideInRight 0.5s ease;
                ">
                    <div style="font-weight: 600; margin-bottom: 0.5rem;">üîÆ Oracle System Notice</div>
                    <div style="font-size: 0.9rem; opacity: 0.9;">
                        The oracle energies are realigning. Please try again in a moment.
                    </div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Auto-remove notification
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.5s ease';
                setTimeout(() => notification.remove(), 500);
            }, 3000);
        }

        // Oracle-specific Event Listener Optimization
        document.addEventListener('DOMContentLoaded', function() {
            // Prevent multiple event listeners
            if (window.oracleListenersInitialized) return;
            window.oracleListenersInitialized = true;
            
            // Add enhanced keyboard shortcuts for oracle section
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    const modal = document.getElementById('oracle-modal');
                    if (modal && modal.style.display === 'flex') {
                        closeOracleModal();
                    }
                }
                
                // Oracle-specific shortcuts
                if ((e.ctrlKey || e.metaKey) && e.key === 'n') {
                    e.preventDefault();
                    newReading();
                }
                
                if ((e.ctrlKey || e.metaKey) && e.key === 's') {
                    e.preventDefault();
                    saveReading();
                }
            });
            
            console.log('üîÆ Oracle enhanced event listeners initialized');
        });

        // Theme Integration with Error Recovery
        function applyOracleTheme(themeName) {
            try {
                // Apply theme with fallback
                if (!themeName || typeof themeName !== 'string') {
                    themeName = 'sacred-sunset'; // Default theme
                }
                
                document.body.className = document.body.className.replace(/theme-\w+/g, '');
                document.body.classList.add(`theme-${themeName}`);
                
                console.log(`‚ú® Oracle section theme applied: ${themeName}`);
                
                // Update oracle card styling if active
                const oracleModal = document.getElementById('oracle-modal');
                if (oracleModal && oracleModal.style.display === 'flex') {
                    // Refresh card styling for new theme
                    const cards = document.querySelectorAll('.oracle-card-deck .oracle-card');
                    cards.forEach(card => {
                        card.style.transition = 'all 0.3s ease';
                    });
                }
                
            } catch (error) {
                handleOracleError('theme application', error);
            }
        }

        // Override original function with enhanced version
        if (typeof window.applyTheme === 'function') {
            window.applyTheme = applyOracleTheme;
        }

        // Streamlined Oracle Functions
        function startSingleReading() {
            hideWelcomeMessage();
            playSelectionSound();
            const card = getRandomCard();
            displayCard(card, 'Single Card Guidance');
        }

        function startThreeReading() {
            hideWelcomeMessage();
            playSelectionSound();
            const cards = [getRandomCard(), getRandomCard(), getRandomCard()];
            displayThreeCards(cards);
        }

        function randomCard() {
            hideWelcomeMessage();
            playSelectionSound();
            const card = getRandomCard();
            displayCard(card, 'Quick Oracle');
        }

        function dailyCard() {
            hideWelcomeMessage();
            playSelectionSound();
            const card = getDailyCard();
            displayCard(card, 'Daily Guidance Card');
        }

        function hideWelcomeMessage() {
            document.getElementById('welcome-message').style.display = 'none';
            document.getElementById('cards-container').style.display = 'flex';
            document.getElementById('reading-actions').style.display = 'flex';
        }

        function showWelcomeMessage() {
            document.getElementById('welcome-message').style.display = 'block';
            document.getElementById('cards-container').style.display = 'none';
            document.getElementById('reading-actions').style.display = 'none';
        }

        function getRandomCard() {
            const randomIndex = Math.floor(Math.random() * oracleCardDatabase.length);
            return oracleCardDatabase[randomIndex];
        }

        function getDailyCard() {
            // Use date to get consistent daily card
            const today = new Date();
            const dayOfYear = Math.floor((today - new Date(today.getFullYear(), 0, 0)) / 1000 / 60 / 60 / 24);
            const cardIndex = dayOfYear % oracleCardDatabase.length;
            return oracleCardDatabase[cardIndex];
        }

        function displayCard(card, readingType) {
            const container = document.getElementById('cards-container');
            container.innerHTML = '';
            
            const cardElement = createCardElement(card);
            container.appendChild(cardElement);
            
            // Update title
            const title = document.querySelector('.selection-title');
            if (title) title.textContent = readingType;
            
            // Play reveal sound
            setTimeout(() => playChimeSound(), 500);
        }

        function displayThreeCards(cards) {
            const container = document.getElementById('cards-container');
            container.innerHTML = '';
            
            const positions = ['Past', 'Present', 'Future'];
            
            cards.forEach((card, index) => {
                const cardElement = createCardElement(card, positions[index]);
                container.appendChild(cardElement);
            });
            
            // Update title
            const title = document.querySelector('.selection-title');
            if (title) title.textContent = 'Three Card Spread';
            
            // Play reveal sounds with delay
            cards.forEach((_, index) => {
                setTimeout(() => playChimeSound(523.25 + (index * 50)), 500 + (index * 300));
            });
        }

        function createCardElement(card, position = null) {
            const cardDiv = document.createElement('div');
            cardDiv.className = 'oracle-card-revealed';
            
            cardDiv.innerHTML = `
                ${position ? `<div class="card-position" style="text-align: center; font-weight: bold; color: var(--accent-gold); margin-bottom: 1rem; font-size: 1.1rem;">${position}</div>` : ''}
                <div class="card-header">
                    <div class="card-image">${card.image}</div>
                    <h3 class="card-name">${card.name}</h3>
                </div>
                <div class="card-message">${card.message}</div>
                <div class="card-meaning">${card.meaning}</div>
                <div class="card-affirmation">
                    <strong>Affirmation:</strong><br>
                    ${card.affirmation}
                </div>
            `;
            
            return cardDiv;
        }

        function resetReading() {
            showWelcomeMessage();
            const title = document.querySelector('.selection-title');
            if (title) title.textContent = 'Choose Your Sacred Reading';
            playSelectionSound();
        }

        function saveReading() {
            const cards = document.querySelectorAll('.oracle-card-revealed');
            if (cards.length === 0) return;
            
            const reading = {
                date: new Date().toLocaleDateString(),
                time: new Date().toLocaleTimeString(),
                cards: Array.from(cards).map(card => ({
                    name: card.querySelector('.card-name').textContent,
                    message: card.querySelector('.card-message').textContent,
                    affirmation: card.querySelector('.card-affirmation').textContent
                }))
            };
            
            // Save to localStorage
            const savedReadings = JSON.parse(localStorage.getItem('oracleReadings') || '[]');
            savedReadings.unshift(reading);
            savedReadings.splice(10); // Keep only last 10 readings
            localStorage.setItem('oracleReadings', JSON.stringify(savedReadings));
            
            showNotification('üìø Reading saved successfully!');
        }

        function shareReading() {
            const cards = document.querySelectorAll('.oracle-card-revealed');
            if (cards.length === 0) return;
            
            let shareText = 'üîÆ My Sacred Oracle Reading:\\n\\n';
            cards.forEach((card, index) => {
                const name = card.querySelector('.card-name').textContent;
                const message = card.querySelector('.card-message').textContent;
                shareText += `${index + 1}. ${name}\\n${message}\\n\\n`;
            });
            shareText += '‚ú® From Divine Temple Sacred Oracle';
            
            if (navigator.share) {
                navigator.share({
                    title: 'Sacred Oracle Reading',
                    text: shareText
                });
            } else {
                navigator.clipboard.writeText(shareText);
                showNotification('üìã Reading copied to clipboard!');
            }
        }

        function viewHistory() {
            const savedReadings = JSON.parse(localStorage.getItem('oracleReadings') || '[]');
            if (savedReadings.length === 0) {
                showNotification('üìú No saved readings yet. Complete a reading to build your history!');
                return;
            }
            
            showNotification(`üìú You have ${savedReadings.length} saved readings. Full history viewer coming soon!`);
        }

        function cardMeditation() {
            const cards = document.querySelectorAll('.oracle-card-revealed');
            if (cards.length === 0) {
                showNotification('üßò‚Äç‚ôÄÔ∏è Draw a card first to begin meditation');
                return;
            }
            
            const cardName = cards[0].querySelector('.card-name').textContent;
            showNotification(`üßò‚Äç‚ôÄÔ∏è Beginning meditation with "${cardName}". Focus on the affirmation for 5 minutes.`);
        }

        function oracleSettings() {
            showNotification('‚öôÔ∏è Oracle settings coming soon! Customize card themes, reading preferences, and more.');
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'oracle-notification';
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, var(--accent-gold), #F59E0B);
                color: #1a1a2e;
                padding: 1rem 1.5rem;
                border-radius: 15px;
                font-weight: 600;
                z-index: 10000;
                animation: slideInRight 0.5s ease;
                max-width: 300px;
                box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.5s ease';
                setTimeout(() => notification.remove(), 500);
            }, 3000);
        }

        // Audio functions
        function playSelectionSound() {
            if (typeof playHoverSound === 'function') {
                playHoverSound();
            }
        }
    </script>
</body>
</html>