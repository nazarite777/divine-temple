<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spiritual Tools - Divine Temple</title>
    <style>
        :root {
            --accent-gold: #d4af37;
            --accent-purple: #8b5cf6;
            --accent-blue: #3b82f6;
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
            min-height: 100vh;
            margin: 0;
            font-family: 'Inter', sans-serif;
            color: white;
        }
        .section-container {
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .section-header {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .section-header h1 {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--accent-gold), var(--accent-purple));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }
        
        .tool-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 2.5rem 2rem;
            cursor: pointer;
            transition: all 0.4s;
            text-align: center;
        }
        
        .tool-card:hover {
            transform: translateY(-10px) scale(1.02);
            border-color: var(--accent-gold);
            box-shadow: 0 20px 60px rgba(0,0,0,0.4), 0 0 0 1px var(--accent-gold);
        }
        
        .tool-card:active {
            transform: translateY(-5px) scale(1.01);
        }
        
        .tool-card.implemented {
            border-color: rgba(16, 185, 129, 0.3);
        }
        
        .tool-card.implemented:hover {
            border-color: var(--accent-gold);
            box-shadow: 0 20px 60px rgba(16, 185, 129, 0.2), 0 0 0 1px var(--accent-gold);
        }
        
        .tool-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            display: block;
        }
        
        .tool-status {
            margin-top: 1rem;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            display: inline-block;
        }
        
        .status-complete {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .status-placeholder {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }
        
        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem 2rem;
            background: linear-gradient(135deg, rgba(255,255,255,0.08), rgba(255,255,255,0.04));
            backdrop-filter: blur(20px);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 25px;
            color: white;
            text-decoration: none;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            margin-bottom: 2.5rem;
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            font-size: 1rem;
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
        }
        
        .back-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            transition: left 0.6s;
        }
        
        .back-btn:hover::before {
            left: 100%;
        }
        
        .back-btn:hover {
            background: linear-gradient(135deg, var(--accent-gold), var(--accent-purple));
            border-color: var(--accent-gold);
            box-shadow: 0 12px 40px rgba(212, 175, 55, 0.3);
            transform: translateY(-2px);
        }
        
        .back-btn .back-icon {
            font-size: 1.2rem;
            transition: transform 0.3s;
        }
        
        .back-btn:hover .back-icon {
            transform: translateX(-3px);
        }
        
        /* Modal Styles */
        .tool-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 10000;
        }
        
        .tool-modal {
            background: var(--glass-bg);
            backdrop-filter: blur(30px);
            border: 2px solid var(--glass-border);
            border-radius: 20px;
            max-width: 90vw;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }
        
        .tool-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 2rem;
            border-bottom: 1px solid var(--glass-border);
        }
        
        .tool-header h2 {
            font-family: 'Playfair Display', serif;
            color: var(--accent-gold);
            margin: 0;
        }
        
        .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            padding: 0;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            transition: all 0.3s;
        }
        
        .close-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.1);
        }
        
        .tool-content {
            padding: 2rem;
        }
        
        .tool-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .tool-section h3 {
            color: var(--accent-gold);
            margin-bottom: 1rem;
        }
        
        /* Mystic Arts Styles */
        #sacred-canvas {
            border: 2px solid var(--accent-gold);
            border-radius: 10px;
            background: white;
            cursor: crosshair;
            display: block;
            margin: 1rem 0;
        }
        
        .canvas-tools {
            display: flex;
            gap: 1rem;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .canvas-tools input, .canvas-tools button {
            padding: 0.5rem 1rem;
            border: 1px solid var(--glass-border);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }
        
        .inspiration-btn, .pattern-btn, .shadow-btn {
            background: linear-gradient(135deg, var(--accent-purple), var(--accent-gold));
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin: 0.5rem;
        }
        
        .inspiration-btn:hover, .pattern-btn:hover, .shadow-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(139, 92, 246, 0.4);
        }
        
        .inspiration-display {
            margin-top: 1rem;
            padding: 1rem;
            background: rgba(212, 175, 55, 0.1);
            border-left: 3px solid var(--accent-gold);
            border-radius: 8px;
            font-style: italic;
            color: var(--accent-gold);
        }
        
        .pattern-gallery {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        /* Shadow Integration Styles */
        .assessment-area, .exercise-area, .practice-area {
            margin-top: 1rem;
        }
        
        .question-card, .completion-card, .exercise-card, .practice-card {
            background: rgba(255, 255, 255, 0.05);
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1rem 0;
        }
        
        .question-text {
            font-size: 1.1rem;
            color: var(--accent-gold);
            margin-bottom: 1rem;
        }
        
        .question-card textarea, #shadow-journal {
            width: 100%;
            min-height: 100px;
            padding: 1rem;
            border: 1px solid var(--glass-border);
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.3);
            color: white;
            resize: vertical;
            font-family: inherit;
        }
        
        .insight-card {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(212, 175, 55, 0.2));
            padding: 1.5rem;
            border-radius: 12px;
            margin-top: 1rem;
        }
        
        .insight-text {
            font-style: italic;
            color: var(--accent-gold);
            text-align: center;
            font-size: 1.1rem;
        }
        
        .timer-display {
            font-size: 2rem;
            text-align: center;
            color: var(--accent-gold);
            font-weight: bold;
            margin: 1rem 0;
        }
        
        .timer-complete {
            text-align: center;
            color: var(--accent-gold);
            font-size: 1.2rem;
            font-weight: bold;
        }
        
        @media (max-width: 768px) {
            .tool-modal {
                width: 95vw;
                height: 95vh;
            }
            
            .tool-content {
                padding: 1rem;
            }
            
            .canvas-tools {
                flex-direction: column;
                align-items: stretch;
            }
            
            #sacred-canvas {
                width: 100%;
                max-width: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="section-container">
        <button class="back-btn" onclick="goBackToDashboard()">
            <span class="back-icon">←</span>
            <span>Back to Dashboard</span>
        </button>
        
        <div class="section-header">
            <h1>🔮 Spiritual Tools</h1>
            <p>Access powerful spiritual instruments for your divine journey</p>
        </div>
        
        <div class="tools-grid">
            <div class="tool-card implemented" onclick="openOracleCards()">
                <div class="tool-icon">🔮</div>
                <h3>Divine Oracle Cards</h3>
                <p>Receive spiritual guidance through sacred divination cards based on divine principles</p>
                <div class="tool-status status-complete">✅ Fully Implemented</div>
            </div>
            
            <div class="tool-card implemented" onclick="openMeditationCenter()">
                <div class="tool-icon">🧘</div>
                <h3>Meditation Center</h3>
                <p>Choose environment, adjust natural sounds, set timer, begin practice</p>
                <div style="margin-top: 1rem; font-size: 0.9rem; opacity: 0.8;">
                    🌲 Forest sounds • 🌊 Ocean waves • 🔥 Crackling fire • ⏰ Custom timers
                </div>
                <div class="tool-status status-complete">✅ Fully Implemented</div>
            </div>
            
            <div class="tool-card implemented" onclick="openEnergyHealing()">
                <div class="tool-icon">⚡</div>
                <h3>Energy Healing</h3>
                <p>Chakra balancing, aura cleansing, crystal guidance, energy assessment</p>
                <div class="tool-status status-complete">✅ Fully Implemented</div>
            </div>
            
            <div class="tool-card implemented" onclick="openDailyDevotions()">
                <div class="tool-icon">📿</div>
                <h3>Daily Devotions</h3>
                <p>Morning prayers, evening reflections, sacred affirmations, gratitude journaling</p>
                <div class="tool-status status-complete">✅ Fully Implemented</div>
            </div>
            
            <div class="tool-card implemented" onclick="openSacredSound()">
                <div class="tool-icon">🎵</div>
                <h3>Sacred Sound</h3>
                <p>Frequency healing, sound baths, singing bowls, mantra chanting, binaural beats</p>
                <div style="margin-top: 1rem; font-size: 0.9rem; opacity: 0.8;">
                    🔊 Nature sounds • 🎼 Healing frequencies • 🔔 Tibetan bowls • 🎧 Binaural beats
                </div>
                <div class="tool-status status-complete">✅ Fully Implemented</div>
            </div>
            
            <div class="tool-card implemented" onclick="openMysticArts()">
                <div class="tool-icon">🎨</div>
                <h3>Mystic Arts</h3>
                <p>Sacred art creation, spiritual expression, divine creativity, digital painting</p>
                <div style="margin-top: 1rem; font-size: 0.9rem; opacity: 0.8;">
                    🎨 Digital Canvas • 🌟 Sacred Patterns • 💫 Divine Inspiration • 🖌️ Spiritual Expression
                </div>
                <div class="tool-status status-complete">✅ Fully Implemented</div>
            </div>
            
            <div class="tool-card implemented" onclick="openShadowIntegration()">
                <div class="tool-icon">🌑</div>
                <h3>Shadow Integration</h3>
                <p>Inner healing work, shadow exploration, light-dark balance, emotional release</p>
                <div style="margin-top: 1rem; font-size: 0.9rem; opacity: 0.8;">
                    🌑 Shadow Assessment • 💡 Integration Exercises • 🔄 Balance Practices • 📖 Reflection Journal
                </div>
                <div class="tool-status status-complete">✅ Fully Implemented</div>
            </div>
        </div>
    </div>
    
    <script>
        // Enhanced back navigation with feedback
        function goBackToDashboard() {
            try {
                if (window.parent && window.parent.showSection) {
                    window.parent.showSection('dashboard');
                } else {
                    // Fallback for direct access
                    window.location.href = '../members.html';
                }
            } catch (error) {
                console.error('Navigation error:', error);
                window.location.href = '../members.html';
            }
        }
        
        // Enhanced tool opening functions with loading feedback
        function openTool(toolName, fallbackFunction) {
            try {
                if (window.parent && window.parent[fallbackFunction]) {
                    window.parent[fallbackFunction]();
                } else {
                    console.warn(`${toolName} function not found in parent window`);
                    // Could add a modal here showing tool is loading
                }
            } catch (error) {
                console.error(`Error opening ${toolName}:`, error);
            }
        }
        
        function openOracleCards() {
            openTool('Oracle Cards', 'openOracleCards');
        }
        
        function openMeditationCenter() {
            openTool('Meditation Center', 'openMeditationCenter');
        }
        
        function openEnergyHealing() {
            openTool('Energy Healing', 'openEnergyHealing');
        }
        
        function openDailyDevotions() {
            openTool('Daily Devotions', 'openDailyDevotions');
        }
        
        function openSacredSound() {
            openTool('Sacred Sound', 'openSacredSound');
        }
        
        function openMysticArts() {
            openTool('Mystic Arts', 'openMysticArts');
        }
        
        function openShadowIntegration() {
            openTool('Shadow Integration', 'openShadowIntegration');
        }
        
        // Add loading animation when tools are clicked
        document.addEventListener('DOMContentLoaded', function() {
            const toolCards = document.querySelectorAll('.tool-card');
            
            toolCards.forEach(card => {
                card.addEventListener('click', function() {
                    // Add visual feedback for tool activation
                    this.style.transform = 'translateY(-5px) scale(1.01)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 200);
                });
            });
            
            // Initialize tools
            initializeMysticArts();
            initializeShadowIntegration();
        });
        
        // Mystic Arts Implementation
        function initializeMysticArts() {
            // Create Mystic Arts modal container
            const mysticModal = document.createElement('div');
            mysticModal.id = 'mystic-arts-modal';
            mysticModal.innerHTML = `
                <div class="tool-modal-overlay" onclick="closeMysticArts()">
                    <div class="tool-modal" onclick="event.stopPropagation()">
                        <div class="tool-header">
                            <h2>🎨 Mystic Arts Studio</h2>
                            <button onclick="closeMysticArts()" class="close-btn">×</button>
                        </div>
                        <div class="tool-content">
                            <div class="art-tools">
                                <div class="tool-section">
                                    <h3>🌟 Sacred Canvas</h3>
                                    <canvas id="sacred-canvas" width="400" height="300"></canvas>
                                    <div class="canvas-tools">
                                        <input type="color" id="brush-color" value="#d4af37">
                                        <input type="range" id="brush-size" min="1" max="20" value="5">
                                        <button onclick="clearCanvas()">Clear</button>
                                        <button onclick="saveArt()">Save Art</button>
                                    </div>
                                </div>
                                <div class="tool-section">
                                    <h3>💫 Divine Inspiration</h3>
                                    <div class="inspiration-cards">
                                        <button onclick="generateInspiration()" class="inspiration-btn">Get Divine Inspiration</button>
                                        <div id="inspiration-text" class="inspiration-display"></div>
                                    </div>
                                </div>
                                <div class="tool-section">
                                    <h3>🖌️ Sacred Patterns</h3>
                                    <div class="pattern-gallery">
                                        <button onclick="drawMandala()" class="pattern-btn">Draw Mandala</button>
                                        <button onclick="drawSacredGeometry()" class="pattern-btn">Sacred Geometry</button>
                                        <button onclick="drawFlowerOfLife()" class="pattern-btn">Flower of Life</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(mysticModal);
        }
        
        function openMysticArts() {
            document.getElementById('mystic-arts-modal').style.display = 'flex';
            setupCanvas();
        }
        
        function closeMysticArts() {
            document.getElementById('mystic-arts-modal').style.display = 'none';
        }
        
        function setupCanvas() {
            const canvas = document.getElementById('sacred-canvas');
            const ctx = canvas.getContext('2d');
            let isDrawing = false;
            
            canvas.addEventListener('mousedown', (e) => {
                isDrawing = true;
                draw(e);
            });
            
            canvas.addEventListener('mousemove', (e) => {
                if (isDrawing) draw(e);
            });
            
            canvas.addEventListener('mouseup', () => {
                isDrawing = false;
                ctx.beginPath();
            });
            
            function draw(e) {
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                const color = document.getElementById('brush-color').value;
                const size = document.getElementById('brush-size').value;
                
                ctx.lineWidth = size;
                ctx.lineCap = 'round';
                ctx.strokeStyle = color;
                
                ctx.lineTo(x, y);
                ctx.stroke();
                ctx.beginPath();
                ctx.moveTo(x, y);
            }
        }
        
        function clearCanvas() {
            const canvas = document.getElementById('sacred-canvas');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
        
        function saveArt() {
            const canvas = document.getElementById('sacred-canvas');
            const link = document.createElement('a');
            link.download = 'sacred-art-' + Date.now() + '.png';
            link.href = canvas.toDataURL();
            link.click();
        }
        
        function generateInspiration() {
            const inspirations = [
                "Let your soul express its divine light through colors that speak your truth.",
                "Draw from the infinite well of cosmic creativity within your being.",
                "Channel the sacred feminine and masculine energies through your artistic expression.",
                "Create patterns that reflect the divine geometry of your soul's blueprint.",
                "Allow your higher self to guide each stroke, each color, each sacred symbol.",
                "Express the unity of all creation through your divine artistic vision.",
                "Paint your prayers, draw your dreams, create your healing.",
                "Let divine inspiration flow through you like rivers of liquid gold."
            ];
            
            const randomInspiration = inspirations[Math.floor(Math.random() * inspirations.length)];
            document.getElementById('inspiration-text').innerHTML = `<p>"${randomInspiration}"</p>`;
        }
        
        function drawMandala() {
            const canvas = document.getElementById('sacred-canvas');
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            
            ctx.strokeStyle = '#d4af37';
            ctx.lineWidth = 2;
            
            // Draw concentric circles
            for (let r = 20; r < 120; r += 20) {
                ctx.beginPath();
                ctx.arc(centerX, centerY, r, 0, 2 * Math.PI);
                ctx.stroke();
                
                // Draw radial lines
                for (let i = 0; i < 8; i++) {
                    const angle = (i * Math.PI) / 4;
                    ctx.beginPath();
                    ctx.moveTo(centerX, centerY);
                    ctx.lineTo(centerX + Math.cos(angle) * r, centerY + Math.sin(angle) * r);
                    ctx.stroke();
                }
            }
        }
        
        function drawSacredGeometry() {
            const canvas = document.getElementById('sacred-canvas');
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            
            ctx.strokeStyle = '#8b5cf6';
            ctx.lineWidth = 2;
            
            // Draw hexagon
            ctx.beginPath();
            for (let i = 0; i < 6; i++) {
                const angle = (i * Math.PI) / 3;
                const x = centerX + Math.cos(angle) * 80;
                const y = centerY + Math.sin(angle) * 80;
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.closePath();
            ctx.stroke();
            
            // Draw inner triangles
            for (let i = 0; i < 6; i++) {
                const angle1 = (i * Math.PI) / 3;
                const angle2 = ((i + 2) * Math.PI) / 3;
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.lineTo(centerX + Math.cos(angle1) * 80, centerY + Math.sin(angle1) * 80);
                ctx.lineTo(centerX + Math.cos(angle2) * 80, centerY + Math.sin(angle2) * 80);
                ctx.closePath();
                ctx.stroke();
            }
        }
        
        function drawFlowerOfLife() {
            const canvas = document.getElementById('sacred-canvas');
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = 30;
            
            ctx.strokeStyle = '#3b82f6';
            ctx.lineWidth = 2;
            
            // Center circle
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
            ctx.stroke();
            
            // Surrounding circles
            for (let i = 0; i < 6; i++) {
                const angle = (i * Math.PI) / 3;
                const x = centerX + Math.cos(angle) * radius;
                const y = centerY + Math.sin(angle) * radius;
                ctx.beginPath();
                ctx.arc(x, y, radius, 0, 2 * Math.PI);
                ctx.stroke();
            }
        }
        
        // Shadow Integration Implementation
        function initializeShadowIntegration() {
            const shadowModal = document.createElement('div');
            shadowModal.id = 'shadow-integration-modal';
            shadowModal.innerHTML = `
                <div class="tool-modal-overlay" onclick="closeShadowIntegration()">
                    <div class="tool-modal" onclick="event.stopPropagation()">
                        <div class="tool-header">
                            <h2>🌑 Shadow Integration Portal</h2>
                            <button onclick="closeShadowIntegration()" class="close-btn">×</button>
                        </div>
                        <div class="tool-content">
                            <div class="shadow-tools">
                                <div class="tool-section">
                                    <h3>🌑 Shadow Assessment</h3>
                                    <button onclick="startShadowAssessment()" class="shadow-btn">Begin Assessment</button>
                                    <div id="assessment-questions" class="assessment-area"></div>
                                </div>
                                <div class="tool-section">
                                    <h3>💡 Integration Exercises</h3>
                                    <button onclick="loadIntegrationExercise()" class="shadow-btn">Get Exercise</button>
                                    <div id="integration-exercise" class="exercise-area"></div>
                                </div>
                                <div class="tool-section">
                                    <h3>🔄 Balance Practices</h3>
                                    <button onclick="beginBalancePractice()" class="shadow-btn">Start Practice</button>
                                    <div id="balance-practice" class="practice-area"></div>
                                </div>
                                <div class="tool-section">
                                    <h3>📖 Reflection Journal</h3>
                                    <textarea id="shadow-journal" placeholder="Write your shadow integration insights here..."></textarea>
                                    <button onclick="saveShadowJournal()" class="shadow-btn">Save Entry</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(shadowModal);
        }
        
        function openShadowIntegration() {
            document.getElementById('shadow-integration-modal').style.display = 'flex';
        }
        
        function closeShadowIntegration() {
            document.getElementById('shadow-integration-modal').style.display = 'none';
        }
        
        let currentQuestion = 0;
        const shadowQuestions = [
            "What emotions do you try to avoid or suppress most often?",
            "What aspects of your personality do you judge or criticize?",
            "What triggers anger or frustration in you about others?",
            "What do you fear others might discover about you?",
            "When do you feel most ashamed or embarrassed?"
        ];
        
        function startShadowAssessment() {
            currentQuestion = 0;
            showNextQuestion();
        }
        
        function showNextQuestion() {
            const questionsArea = document.getElementById('assessment-questions');
            if (currentQuestion < shadowQuestions.length) {
                questionsArea.innerHTML = `
                    <div class="question-card">
                        <p class="question-text">${shadowQuestions[currentQuestion]}</p>
                        <textarea id="answer-${currentQuestion}" placeholder="Reflect deeply and write your honest response..."></textarea>
                        <button onclick="nextQuestion()" class="shadow-btn">Next Question</button>
                    </div>
                `;
            } else {
                questionsArea.innerHTML = `
                    <div class="completion-card">
                        <h4>🌟 Assessment Complete</h4>
                        <p>You've taken the first brave step in shadow integration. Your responses are stored for reflection.</p>
                        <button onclick="generateShadowInsight()" class="shadow-btn">Get Insight</button>
                        <div id="shadow-insight"></div>
                    </div>
                `;
            }
        }
        
        function nextQuestion() {
            const answer = document.getElementById(`answer-${currentQuestion}`).value;
            if (answer.trim()) {
                localStorage.setItem(`shadowAnswer_${currentQuestion}`, answer);
                currentQuestion++;
                showNextQuestion();
            } else {
                alert('Please write your response before continuing.');
            }
        }
        
        function generateShadowInsight() {
            const insights = [
                "Your shadows are not flaws but unexplored gifts waiting to be integrated.",
                "What you resist in others often reflects what you resist in yourself.",
                "Shadow work is love work - loving all parts of yourself unconditionally.",
                "Your greatest wounds often contain your greatest wisdom.",
                "Integration happens through compassionate witnessing, not judgment."
            ];
            
            const insight = insights[Math.floor(Math.random() * insights.length)];
            document.getElementById('shadow-insight').innerHTML = `
                <div class="insight-card">
                    <p class="insight-text">"${insight}"</p>
                </div>
            `;
        }
        
        function loadIntegrationExercise() {
            const exercises = [
                {
                    title: "Mirror Work",
                    description: "Look into a mirror for 5 minutes. Notice any judgments that arise about your appearance. Send love to each part you criticize.",
                    steps: ["Find a quiet space with a mirror", "Look into your eyes for 1 minute", "Scan your face without judgment", "Send love to any parts you criticize", "End with 'I love and accept all of myself'"]
                },
                {
                    title: "Trigger Transmutation",
                    description: "Transform your triggers into teachers by exploring what they reflect about your inner world.",
                    steps: ["Identify a recent trigger", "Ask: What quality in them triggered me?", "Explore: Where do I have this quality?", "Find the gift in this quality", "Thank the trigger for the teaching"]
                },
                {
                    title: "Shadow Dialogue",
                    description: "Have a conversation with your shadow self to understand its needs and wisdom.",
                    steps: ["Write a letter to your shadow", "Ask what it needs from you", "Listen for its response", "Write back with compassion", "Find ways to honor its needs"]
                }
            ];
            
            const exercise = exercises[Math.floor(Math.random() * exercises.length)];
            document.getElementById('integration-exercise').innerHTML = `
                <div class="exercise-card">
                    <h4>${exercise.title}</h4>
                    <p>${exercise.description}</p>
                    <ol>
                        ${exercise.steps.map(step => `<li>${step}</li>`).join('')}
                    </ol>
                </div>
            `;
        }
        
        function beginBalancePractice() {
            const practices = [
                {
                    name: "Light-Shadow Breathing",
                    instruction: "Breathe in light, breathe out shadow. Let them dance together in harmony.",
                    duration: "5 minutes"
                },
                {
                    name: "Polarity Integration",
                    instruction: "Hold both your light and shadow with equal love and acceptance.",
                    duration: "10 minutes"
                },
                {
                    name: "Wholeness Meditation",
                    instruction: "Visualize all parts of yourself - light and shadow - as one complete being.",
                    duration: "15 minutes"
                }
            ];
            
            const practice = practices[Math.floor(Math.random() * practices.length)];
            document.getElementById('balance-practice').innerHTML = `
                <div class="practice-card">
                    <h4>${practice.name}</h4>
                    <p>${practice.instruction}</p>
                    <p><strong>Duration:</strong> ${practice.duration}</p>
                    <button onclick="startPracticeTimer('${practice.duration}')" class="shadow-btn">Start Timer</button>
                    <div id="practice-timer"></div>
                </div>
            `;
        }
        
        function startPracticeTimer(duration) {
            const minutes = parseInt(duration);
            let seconds = minutes * 60;
            const timerDiv = document.getElementById('practice-timer');
            
            const timer = setInterval(() => {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                timerDiv.innerHTML = `<div class="timer-display">${mins}:${secs.toString().padStart(2, '0')}</div>`;
                
                if (seconds <= 0) {
                    clearInterval(timer);
                    timerDiv.innerHTML = '<div class="timer-complete">✨ Practice Complete! ✨</div>';
                }
                seconds--;
            }, 1000);
        }
        
        function saveShadowJournal() {
            const journal = document.getElementById('shadow-journal').value;
            if (journal.trim()) {
                const timestamp = new Date().toISOString();
                const entries = JSON.parse(localStorage.getItem('shadowJournalEntries') || '[]');
                entries.push({ timestamp, entry: journal });
                localStorage.setItem('shadowJournalEntries', JSON.stringify(entries));
                
                alert('Journal entry saved! 📖');
                document.getElementById('shadow-journal').value = '';
            }
        }
    </script>
</body>
</html>