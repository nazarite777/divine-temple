class SystemValidator{constructor(){this.results={passed:[],failed:[],warnings:[],totalTests:0,passedTests:0,failedTests:0},this.systemDefinitions=this.getSystemDefinitions()}getSystemDefinitions(){return{SocialSharingSystem:{file:"js/social-sharing-system.js",requiredMethods:["showShareModal","generateShareCard","shareToSocial"],xpIntegration:!0,requiresFirebase:!1},ChallengeCalendar:{file:"js/challenge-calendar.js",requiredMethods:["init","completeTask","renderCalendar"],xpIntegration:!0,requiresFirebase:!1},JournalingSystem:{file:"js/journaling-system.js",requiredMethods:["createEntry","loadEntries","exportToJSON","exportToPDF"],xpIntegration:!0,requiresFirebase:!1},FriendSystem:{file:"js/friend-system.js",requiredMethods:["sendFriendRequest","acceptFriendRequest","giftXP","getActivityFeed"],xpIntegration:!0,requiresFirebase:!0},GuildsSystem:{file:"js/guilds-system.js",requiredMethods:["createCircle","joinCircle","sendMessage","loadCircles"],xpIntegration:!0,requiresFirebase:!0},LeaderboardsSystem:{file:"js/leaderboards-system.js",requiredMethods:["loadGlobalLeaderboard","loadWeeklyLeaderboard","loadFriendLeaderboard"],xpIntegration:!0,requiresFirebase:!0},PushNotificationSystem:{file:"js/push-notifications.js",requiredMethods:["requestPermission","showNotification","setupEventListeners"],xpIntegration:!0,requiresFirebase:!0},AudioContentSystem:{file:"js/audio-content-system.js",requiredMethods:["init","playTrack","setPlaybackSpeed","setSleepTimer"],xpIntegration:!0,requiresFirebase:!1},VideoLibrarySystem:{file:"js/video-library-system.js",requiredMethods:["init","playVideo","enrollInCourse","saveProgress"],xpIntegration:!0,requiresFirebase:!1},MultiLanguageSystem:{file:"js/multi-language-system.js",requiredMethods:["setLanguage","t","getSupportedLanguages","translatePage"],xpIntegration:!1,requiresFirebase:!1},PWAInstallSystem:{file:"js/pwa-install-system.js",requiredMethods:["init","promptInstall","trackAppLaunch"],xpIntegration:!0,requiresFirebase:!1},MentorshipProgram:{file:"js/mentorship-program.js",requiredMethods:["becomeMentor","requestMentor","scheduleSession","completeSession"],xpIntegration:!0,requiresFirebase:!0},IntegrationsSystem:{file:"js/integrations-system.js",requiredMethods:["connectSpotify","connectYouTube","connectGoogleCalendar"],xpIntegration:!0,requiresFirebase:!1},PersonalizationAI:{file:"js/personalization-ai.js",requiredMethods:["init","generateDailyRecommendations","getAdaptiveDifficulty"],xpIntegration:!1,requiresFirebase:!1},InAppPurchases:{file:"js/in-app-purchases.js",requiredMethods:["init","purchaseSubscription","purchaseOneTime","showPricingModal"],xpIntegration:!0,requiresFirebase:!0},AIChatbot:{file:"js/ai-chatbot.js",requiredMethods:["init","sendMessage","getAIResponse","getDailyInspiration"],xpIntegration:!0,requiresFirebase:!1}}}async runAllTests(){console.log("ðŸ§ª Starting Divine Temple System Validation...\n"),console.log("=".repeat(60)),await this.testFileExistence(),await this.testClassDefinitions(),await this.testRequiredMethods(),await this.testXPIntegration(),await this.testFirebaseIntegration(),await this.testErrorHandling(),this.generateReport()}async testFileExistence(){console.log("\nðŸ“ Testing File Existence...");for(const[s,e]of Object.entries(this.systemDefinitions)){this.results.totalTests++;try{const s=await fetch(e.file);s.ok?(this.pass(`âœ… ${e.file} exists`),this.results.passedTests++):(this.fail(`âŒ ${e.file} not found (${s.status})`),this.results.failedTests++)}catch(s){this.fail(`âŒ ${e.file} - Error: ${s.message}`),this.results.failedTests++}}}async testClassDefinitions(){console.log("\nðŸ—ï¸ Testing Class Definitions...");for(const[s,e]of Object.entries(this.systemDefinitions))this.results.totalTests++,void 0!==window[s]?(this.pass(`âœ… ${s} class is defined`),this.results.passedTests++):(this.fail(`âŒ ${s} class not found in global scope`),this.results.failedTests++)}async testRequiredMethods(){console.log("\nðŸ”§ Testing Required Methods...");for(const[s,e]of Object.entries(this.systemDefinitions))if(void 0!==window[s])try{const t=new window[s];for(const i of e.requiredMethods)this.results.totalTests++,"function"==typeof t[i]?(this.pass(`âœ… ${s}.${i}() exists`),this.results.passedTests++):(this.fail(`âŒ ${s}.${i}() not found`),this.results.failedTests++)}catch(e){this.fail(`âŒ ${s} initialization failed: ${e.message}`),this.results.failedTests++}else this.warn(`âš ï¸ Skipping ${s} - class not loaded`)}async testXPIntegration(){if(console.log("\nðŸŽ¯ Testing XP Integration..."),this.results.totalTests++,!window.progressSystem)return this.fail("âŒ Global progressSystem not found"),void this.results.failedTests++;this.pass("âœ… Global progressSystem is available"),this.results.passedTests++;const s=["awardXP","updateXP","checkLevelUp"];for(const e of s)this.results.totalTests++,"function"==typeof window.progressSystem[e]?(this.pass(`âœ… progressSystem.${e}() exists`),this.results.passedTests++):(this.fail(`âŒ progressSystem.${e}() not found`),this.results.failedTests++);this.results.totalTests++;try{const s=window.progressSystem.xp||0;window.progressSystem.awardXP(10,"Test Award","validation");(window.progressSystem.xp||0)>s?(this.pass("âœ… XP award functionality works"),this.results.passedTests++):(this.fail("âŒ XP not awarded correctly"),this.results.failedTests++)}catch(s){this.fail(`âŒ XP award test failed: ${s.message}`),this.results.failedTests++}}async testFirebaseIntegration(){if(console.log("\nðŸ”¥ Testing Firebase Integration..."),this.results.totalTests++,"undefined"==typeof firebase)return this.fail("âŒ Firebase SDK not loaded"),void this.results.failedTests++;this.pass("âœ… Firebase SDK loaded"),this.results.passedTests++;const s=["auth","firestore"];for(const e of s){this.results.totalTests++;try{firebase[e]?(this.pass(`âœ… Firebase ${e} available`),this.results.passedTests++):(this.fail(`âŒ Firebase ${e} not initialized`),this.results.failedTests++)}catch(s){this.fail(`âŒ Firebase ${e} error: ${s.message}`),this.results.failedTests++}}this.results.totalTests++,firebase.apps.length>0?(this.pass("âœ… Firebase app initialized"),this.results.passedTests++):(this.fail("âŒ Firebase app not initialized"),this.results.failedTests++)}async testErrorHandling(){console.log("\nðŸ›¡ï¸ Testing Error Handling...");for(const[s,e]of Object.entries(this.systemDefinitions))if(void 0!==window[s]){this.results.totalTests++;try{const t=new window[s],i=e.requiredMethods[0];if("function"==typeof t[i])try{await t[i](null),this.pass(`âœ… ${s}.${i}() handles null input`),this.results.passedTests++}catch(e){e.message&&!e.message.includes("undefined")?(this.pass(`âœ… ${s}.${i}() has error handling`),this.results.passedTests++):(this.warn(`âš ï¸ ${s}.${i}() may need better error handling`),this.results.passedTests++)}}catch(e){this.fail(`âŒ ${s} error handling test failed: ${e.message}`),this.results.failedTests++}}}pass(s){console.log(`%c${s}`,"color: #10B981"),this.results.passed.push(s)}fail(s){console.log(`%c${s}`,"color: #EF4444; font-weight: bold"),this.results.failed.push(s)}warn(s){console.log(`%c${s}`,"color: #F59E0B"),this.results.warnings.push(s)}generateReport(){console.log("\n"+"=".repeat(60)),console.log("ðŸ“Š VALIDATION REPORT"),console.log("=".repeat(60));const s=(this.results.passedTests/this.results.totalTests*100).toFixed(1);return console.log("\nðŸ“ˆ Summary:"),console.log(`   Total Tests: ${this.results.totalTests}`),console.log(`   âœ… Passed: ${this.results.passedTests}`),console.log(`   âŒ Failed: ${this.results.failedTests}`),console.log(`   âš ï¸  Warnings: ${this.results.warnings.length}`),console.log(`   ðŸ“Š Pass Rate: ${s}%`),this.results.failedTests>0&&(console.log(`\nâŒ Failed Tests (${this.results.failed.length}):`),this.results.failed.forEach(s=>console.log(`   ${s}`))),this.results.warnings.length>0&&(console.log(`\nâš ï¸  Warnings (${this.results.warnings.length}):`),this.results.warnings.forEach(s=>console.log(`   ${s}`))),console.log("\n"+"=".repeat(60)),s>=90?console.log("%cðŸŽ‰ EXCELLENT! Divine Temple systems are working great!","color: #10B981; font-size: 16px; font-weight: bold"):s>=70?console.log("%câœ… GOOD! Some systems need attention.","color: #F59E0B; font-size: 16px; font-weight: bold"):console.log("%câš ï¸  ATTENTION NEEDED! Several systems require fixes.","color: #EF4444; font-size: 16px; font-weight: bold"),console.log("=".repeat(60)+"\n"),this.results}async testSystem(s){console.log(`\nðŸ” Testing ${s}...`);const e=this.systemDefinitions[s];if(e)if(void 0!==window[s])try{const t=new window[s];return console.log(`âœ… ${s} instantiated successfully`),e.requiredMethods.forEach(s=>{"function"==typeof t[s]?console.log(`   âœ… ${s}() available`):console.log(`   âŒ ${s}() missing`)}),t}catch(e){console.error(`âŒ ${s} initialization failed:`,e)}else console.error(`âŒ ${s} not loaded`);else console.error(`âŒ Unknown system: ${s}`)}}window.SystemValidator=SystemValidator,window.location.search.includes("validate=true")&&document.addEventListener("DOMContentLoaded",async()=>{const s=new SystemValidator;await s.runAllTests()}),window.validateSystem=async s=>{const e=new SystemValidator;return await e.testSystem(s)},window.validateAllSystems=async()=>{const s=new SystemValidator;return await s.runAllTests()},console.log("âœ… System Validator loaded. Use validateAllSystems() to test all systems.");