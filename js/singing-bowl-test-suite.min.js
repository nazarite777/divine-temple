const TEST_CONFIG={timeout:5e3,retries:3,verbose:!0};class SingingBowlTestSuite{constructor(){this.results={passed:0,failed:0,total:0,details:[]}}async runAllTests(){console.log("ðŸ§ª Starting Singing Bowl Harmony Garden Test Suite"),console.log("=".repeat(60));const e=[{name:"Container Initialization",test:this.testContainerInit},{name:"Game Instance Creation",test:this.testGameInstance},{name:"Audio System",test:this.testAudioSystem},{name:"Chakra Bowls Configuration",test:this.testChakraBowls},{name:"Garden Canvas",test:this.testGardenCanvas},{name:"User Interface Elements",test:this.testUIElements},{name:"Event Listeners",test:this.testEventListeners},{name:"Progress System",test:this.testProgressSystem},{name:"Achievement System",test:this.testAchievements},{name:"Mobile Compatibility",test:this.testMobileSupport},{name:"Audio Controls",test:this.testAudioControls},{name:"Error Handling",test:this.testErrorHandling}];for(const t of e)await this.runTest(t.name,t.test.bind(this));return this.showResults(),this.results}async runTest(e,t){this.results.total++;try{console.log(`ðŸ”¬ Testing: ${e}`);const n=await Promise.race([t(),new Promise((e,t)=>setTimeout(()=>t(new Error("Test timeout")),TEST_CONFIG.timeout))]);if(!1===n)throw new Error("Test returned false");this.results.passed++,this.results.details.push({name:e,status:"PASS",message:n||"OK"}),console.log(`âœ… ${e}: PASS`)}catch(t){this.results.failed++,this.results.details.push({name:e,status:"FAIL",message:t.message}),console.log(`âŒ ${e}: FAIL - ${t.message}`)}}async testContainerInit(){if(!document.getElementById("singingBowlContainer"))throw new Error("Container not found");return"Container element exists"}async testGameInstance(){if(!window.singingBowlHarmonyGarden)throw new Error("Game instance not created");if("function"!=typeof window.singingBowlHarmonyGarden.init)throw new Error("Game instance missing init method");return"Game instance created with required methods"}async testAudioSystem(){const e=window.singingBowlHarmonyGarden;if(!e)throw new Error("Game instance not available");if(!e.audioContext&&e.soundEnabled)throw new Error("Audio context not initialized");if(e.soundEnabled&&!e.masterGain)throw new Error("Master gain not configured");return"Audio system "+(e.soundEnabled?"enabled":"disabled (fallback mode)")}async testChakraBowls(){const e=window.singingBowlHarmonyGarden;if(!e.chakraBowls||!Array.isArray(e.chakraBowls))throw new Error("Chakra bowls not initialized");if(7!==e.chakraBowls.length)throw new Error(`Expected 7 chakra bowls, found ${e.chakraBowls.length}`);const t=["id","name","frequency","color","position"];for(const n of e.chakraBowls)for(const e of t)if(!n[e])throw new Error(`Bowl missing property: ${e}`);return"7 chakra bowls configured with all properties"}async testGardenCanvas(){const e=document.getElementById("zenGardenCanvas");if(!e)throw new Error("Garden canvas not found");if(!e.getContext("2d"))throw new Error("Canvas context not available");return"Garden canvas initialized with 2D context"}async testUIElements(){const e=["timerToggle","masterVolume","ambientToggle","spatialToggle","feedbackToggle","harmonyBtn"];for(const t of e){if(!document.getElementById(t))throw new Error(`UI element not found: ${t}`)}return`All ${e.length} UI elements present`}async testEventListeners(){window.singingBowlHarmonyGarden;const e=document.getElementById("timerToggle");if(!e)throw new Error("Timer button not found");try{const t=new Event("click");e.dispatchEvent(t)}catch(e){throw new Error("Event listener test failed")}return"Event listeners responsive"}async testProgressSystem(){const e=window.singingBowlHarmonyGarden;if(!e.userProgress)throw new Error("Progress system not initialized");const t=["level","experience","bowlsMastered","gardensCreated"];for(const n of t)if(void 0===e.userProgress[n])throw new Error(`Progress missing property: ${n}`);return"Progress system initialized with all properties"}async testAchievements(){const e=window.singingBowlHarmonyGarden;if(!e.achievements||!Array.isArray(e.achievements))throw new Error("Achievements system not initialized");if(0===e.achievements.length)throw new Error("No achievements defined");return`${e.achievements.length} achievements defined`}async testMobileSupport(){return document.querySelector('meta[name="viewport"]')?"ontouchstart"in window?"Mobile compatibility features detected":"Touch events not supported (desktop environment)":"Warning: No viewport meta tag (mobile compatibility may be limited)"}async testAudioControls(){const e=["ambientToggle","spatialToggle","feedbackToggle","harmonyBtn"];for(const t of e){const e=document.getElementById(t);if(!e)throw new Error(`Audio control not found: ${t}`);if(!e.onclick&&!e.addEventListener)throw new Error(`Audio control not interactive: ${t}`)}return"All audio controls present and interactive"}async testErrorHandling(){const e=window.singingBowlHarmonyGarden;if(!window.AudioContext&&!window.webkitAudioContext){if(e.soundEnabled)throw new Error("Game should disable audio when Web Audio API unavailable");return"Graceful audio degradation working"}return"Error handling systems in place"}showResults(){console.log("=".repeat(60)),console.log("ðŸŽ¯ TEST RESULTS"),console.log("=".repeat(60)),console.log(`âœ… Passed: ${this.results.passed}`),console.log(`âŒ Failed: ${this.results.failed}`),console.log(`ðŸ“Š Total: ${this.results.total}`),console.log(`ðŸ“ˆ Success Rate: ${(this.results.passed/this.results.total*100).toFixed(1)}%`),this.results.failed>0&&(console.log("\nâŒ FAILED TESTS:"),this.results.details.filter(e=>"FAIL"===e.status).forEach(e=>console.log(`   â€¢ ${e.name}: ${e.message}`))),this.results.passed===this.results.total?console.log("\nðŸŽ‰ ALL TESTS PASSED! Singing Bowl Harmony Garden is ready for production."):console.log("\nâš ï¸  Some tests failed. Please review and fix issues before deployment.")}}document.addEventListener("DOMContentLoaded",()=>{setTimeout(async()=>{const e=new SingingBowlTestSuite;window.testResults=await e.runAllTests()},3e3)}),window.SingingBowlTestSuite=SingingBowlTestSuite;