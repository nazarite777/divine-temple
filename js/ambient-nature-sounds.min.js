class AmbientNatureSounds{constructor(){this.audioContext=null,this.isPlaying=!1,this.activeNodes=[],this.windNodes={oscillators:[],filters:[],gains:[]},this.birdIntervals=[],this.masterVolume=.1,this.windVolume=.08,this.birdVolume=.15,this.enabled=!0,this.init()}init(){try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),console.log("üåø Ambient Nature Sounds initialized")}catch(e){console.error("Failed to initialize nature sounds:",e)}}startGentleBreeze(){if(!this.enabled||!this.audioContext)return;console.log("üå¨Ô∏è Starting gentle breeze...");const e=this.audioContext.currentTime,t=2*this.audioContext.sampleRate,i=this.audioContext.createBuffer(1,t,this.audioContext.sampleRate),n=i.getChannelData(0);let a=0;for(let e=0;e<t;e++){const t=2*Math.random()-1;n[e]=(a+.02*t)/1.02,a=n[e],n[e]*=3.5}const o=this.audioContext.createBufferSource();o.buffer=i,o.loop=!0;const s=this.audioContext.createBiquadFilter();s.type="bandpass",s.frequency.setValueAtTime(150,e),s.Q.setValueAtTime(.5,e);const r=this.audioContext.createBiquadFilter();r.type="bandpass",r.frequency.setValueAtTime(400,e),r.Q.setValueAtTime(.3,e);const l=this.audioContext.createBiquadFilter();l.type="highpass",l.frequency.setValueAtTime(800,e);const u=this.audioContext.createGain();u.gain.setValueAtTime(0,e),u.gain.linearRampToValueAtTime(this.windVolume*this.masterVolume,e+3);const c=this.audioContext.createOscillator();c.frequency.setValueAtTime(.1,e);const d=this.audioContext.createGain();d.gain.setValueAtTime(.3*this.windVolume,e),c.connect(d),d.connect(u.gain),o.connect(s),o.connect(r),o.connect(l),s.connect(u),r.connect(u),l.connect(u),u.connect(this.audioContext.destination),o.start(e),c.start(e),this.windNodes.oscillators.push(o,c),this.windNodes.filters.push(s,r,l),this.windNodes.gains.push(u,d)}stopGentleBreeze(){if(!this.audioContext)return;console.log("üå¨Ô∏è Stopping gentle breeze...");const e=this.audioContext.currentTime;this.windNodes.gains.forEach(t=>{try{t.gain.linearRampToValueAtTime(0,e+2)}catch(e){}}),setTimeout(()=>{this.windNodes.oscillators.forEach(e=>{try{e.stop()}catch(e){}}),this.windNodes.oscillators=[],this.windNodes.filters=[],this.windNodes.gains=[]},2100)}playBirdChirp(e="robin"){if(!this.enabled||!this.audioContext)return;const t=this.audioContext.currentTime;let i,n,a,o;switch(e){case"robin":i=2e3,n=3200,a=.15,o="up";break;case"sparrow":i=3500,n=2800,a=.08,o="down";break;case"dove":i=400,n=350,a=.25,o="down-gentle";break;case"cardinal":i=3e3,n=4500,a=.2,o="up";break;case"chickadee":i=3800,n=3200,a=.12,o="warble";break;default:i=2500,n=3e3,a=.15,o="up"}const s=this.audioContext.createOscillator();s.type="sine",s.frequency.setValueAtTime(i,t),"warble"===o?(s.frequency.linearRampToValueAtTime(1.1*i,t+.25*a),s.frequency.linearRampToValueAtTime(.9*i,t+.5*a),s.frequency.linearRampToValueAtTime(n,t+a)):"down-gentle"===o?s.frequency.exponentialRampToValueAtTime(n,t+a):"up"===o?(s.frequency.exponentialRampToValueAtTime(n,t+.6*a),s.frequency.exponentialRampToValueAtTime(.95*n,t+a)):s.frequency.exponentialRampToValueAtTime(n,t+a);const r=this.audioContext.createGain(),l=this.birdVolume*this.masterVolume*(.8+.4*Math.random());r.gain.setValueAtTime(0,t),r.gain.linearRampToValueAtTime(l,t+.01),r.gain.exponentialRampToValueAtTime(.5*l,t+.5*a),r.gain.exponentialRampToValueAtTime(.001,t+a);const u=this.audioContext.createOscillator();u.frequency.setValueAtTime(5+3*Math.random(),t);const c=this.audioContext.createGain();c.gain.setValueAtTime(.015*i,t),u.connect(c),c.connect(s.frequency);const d=this.audioContext.createBiquadFilter();d.type="bandpass",d.frequency.setValueAtTime((i+n)/2,t),d.Q.setValueAtTime(2,t);const h=this.audioContext.createStereoPanner?this.audioContext.createStereoPanner():null;h&&h.pan.setValueAtTime(.7*(2*Math.random()-1),t),s.connect(d),d.connect(r),h?(r.connect(h),h.connect(this.audioContext.destination)):r.connect(this.audioContext.destination),s.start(t),u.start(t),s.stop(t+a+.1),u.stop(t+a+.1)}playBirdSong(e="robin"){if(!this.enabled)return;const t={robin:[0,150,300,500],sparrow:[0,80,160],cardinal:[0,200,400,800,1e3],chickadee:[0,120,240,360,480],dove:[0,400,800]};(t[e]||t.robin).forEach(t=>{setTimeout(()=>{this.playBirdChirp(e)},t)})}startAmbientBirds(){if(this.isPlaying||!this.enabled)return;console.log("üê¶ Starting ambient bird sounds..."),this.isPlaying=!0;const e=["robin","sparrow","cardinal","chickadee","dove"],t=()=>{if(!this.isPlaying)return;const i=5e3+1e4*Math.random();setTimeout(()=>{if(!this.isPlaying)return;const i=e[Math.floor(Math.random()*e.length)];Math.random()<.7?this.playBirdChirp(i):this.playBirdSong(i),t()},i)};this.playBirdChirp("robin"),t()}stopAmbientBirds(){this.isPlaying&&(console.log("üê¶ Stopping ambient bird sounds..."),this.isPlaying=!1,this.birdIntervals.forEach(e=>clearInterval(e)),this.birdIntervals=[])}startNatureAmbience(){this.enabled&&(console.log("üåø Starting full nature ambience..."),this.startGentleBreeze(),setTimeout(()=>{this.startAmbientBirds()},2e3))}stopNatureAmbience(){console.log("üåø Stopping nature ambience..."),this.stopGentleBreeze(),this.stopAmbientBirds()}setVolume(e){this.masterVolume=Math.max(0,Math.min(1,e))}setWindVolume(e){this.windVolume=Math.max(0,Math.min(1,e))}setBirdVolume(e){this.birdVolume=Math.max(0,Math.min(1,e))}setEnabled(e){this.enabled=e,e||this.stopNatureAmbience()}}"undefined"!=typeof window&&(window.natureSounds=new AmbientNatureSounds);