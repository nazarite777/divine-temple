class DailyQuestsWidget{constructor(n="daily-quests-widget"){this.containerId=n,this.quests=[],this.init()}async init(){console.log("‚≠ê Initializing Daily Quests Widget..."),await this.waitForQuestsSystem(),this.loadQuests(),window.addEventListener("questsUpdated",()=>this.refresh()),this.render(),console.log("‚úÖ Daily Quests Widget ready")}async waitForQuestsSystem(){return new Promise(n=>{const e=()=>{window.dailyQuests&&window.dailyQuests.isInitialized?n():setTimeout(e,100)};e()})}loadQuests(){window.dailyQuests&&(this.quests=window.dailyQuests.getQuests())}refresh(){this.loadQuests(),this.render()}render(){const n=document.getElementById(this.containerId);if(!n)return;const e=window.dailyQuests?.getQuestsProgress()||{completed:0,total:3,percentage:0},t=window.dailyQuests?.getStats()||{};n.innerHTML=`\n            ${this.getStyles()}\n            <div class="daily-quests-widget">\n                <div class="quests-header">\n                    <div class="quests-title">\n                        <span class="quests-icon">‚≠ê</span>\n                        <span>Daily Quests</span>\n                    </div>\n                    <div class="quests-count">${e.completed}/${e.total}</div>\n                </div>\n\n                <div class="quests-progress-bar">\n                    <div class="quests-progress-fill" style="width: ${e.percentage}%"></div>\n                </div>\n\n                <div class="quests-list">\n                    ${this.quests.map(n=>this.renderQuest(n)).join("")}\n                </div>\n\n                ${e.completed===e.total?'\n                    <div class="perfect-day-banner">\n                        üåü Perfect Day! +300 Bonus XP!\n                    </div>\n                ':""}\n\n                <div class="quests-stats">\n                    <div class="quest-stat">\n                        <div class="quest-stat-value">${t.totalQuestsCompleted||0}</div>\n                        <div class="quest-stat-label">Total Completed</div>\n                    </div>\n                    <div class="quest-stat">\n                        <div class="quest-stat-value">${t.perfectDays||0}</div>\n                        <div class="quest-stat-label">Perfect Days</div>\n                    </div>\n                    <div class="quest-stat">\n                        <div class="quest-stat-value">${t.currentStreak||0}</div>\n                        <div class="quest-stat-label">Quest Streak</div>\n                    </div>\n                </div>\n            </div>\n        `}renderQuest(n){const e=Math.min(100,n.progress/n.target*100),t=n.completed;return`\n            <div class="quest-item ${t?"completed":""}">\n                <div class="quest-checkbox">\n                    ${t?"‚úì":""}\n                </div>\n                <div class="quest-content">\n                    <div class="quest-header">\n                        <div class="quest-name">\n                            <span class="quest-emoji">${n.icon}</span>\n                            <span>${n.name}</span>\n                        </div>\n                        <div class="quest-xp">+${n.xp} XP</div>\n                    </div>\n                    <div class="quest-desc">${n.desc}</div>\n                    <div class="quest-progress-container">\n                        <div class="quest-progress-bar-mini">\n                            <div class="quest-progress-fill-mini" style="width: ${e}%"></div>\n                        </div>\n                        <div class="quest-progress-text">${n.progress}/${n.target}</div>\n                    </div>\n                </div>\n            </div>\n        `}getStyles(){return"\n            <style>\n                .daily-quests-widget {\n                    background: linear-gradient(135deg, rgba(79, 195, 247, 0.1), rgba(102, 187, 106, 0.1));\n                    backdrop-filter: blur(20px);\n                    border: 1px solid rgba(255, 255, 255, 0.1);\n                    border-radius: 20px;\n                    padding: 2rem;\n                    margin-bottom: 2rem;\n                }\n\n                .quests-header {\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: center;\n                    margin-bottom: 1rem;\n                }\n\n                .quests-title {\n                    display: flex;\n                    align-items: center;\n                    gap: 0.5rem;\n                    font-size: 1.5rem;\n                    font-weight: 700;\n                    color: #4fc3f7;\n                }\n\n                .quests-icon {\n                    font-size: 1.8rem;\n                }\n\n                .quests-count {\n                    font-size: 1.5rem;\n                    font-weight: 700;\n                    color: #FFD700;\n                }\n\n                .quests-progress-bar {\n                    height: 12px;\n                    background: rgba(255, 255, 255, 0.1);\n                    border-radius: 10px;\n                    overflow: hidden;\n                    margin-bottom: 1.5rem;\n                }\n\n                .quests-progress-fill {\n                    height: 100%;\n                    background: linear-gradient(90deg, #4fc3f7, #66bb6a);\n                    border-radius: 10px;\n                    transition: width 0.5s ease;\n                }\n\n                .quests-list {\n                    display: flex;\n                    flex-direction: column;\n                    gap: 1rem;\n                    margin-bottom: 1.5rem;\n                }\n\n                .quest-item {\n                    display: flex;\n                    gap: 1rem;\n                    background: rgba(255, 255, 255, 0.05);\n                    border: 1px solid rgba(255, 255, 255, 0.1);\n                    border-radius: 15px;\n                    padding: 1rem;\n                    transition: all 0.3s ease;\n                }\n\n                .quest-item:hover {\n                    background: rgba(255, 255, 255, 0.08);\n                    transform: translateX(5px);\n                }\n\n                .quest-item.completed {\n                    opacity: 0.7;\n                    border-color: #66bb6a;\n                }\n\n                .quest-checkbox {\n                    width: 32px;\n                    height: 32px;\n                    border: 2px solid rgba(255, 255, 255, 0.3);\n                    border-radius: 8px;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    font-size: 1.2rem;\n                    color: #66bb6a;\n                    flex-shrink: 0;\n                }\n\n                .quest-item.completed .quest-checkbox {\n                    background: #66bb6a;\n                    border-color: #66bb6a;\n                    color: white;\n                }\n\n                .quest-content {\n                    flex: 1;\n                }\n\n                .quest-header {\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: center;\n                    margin-bottom: 0.5rem;\n                }\n\n                .quest-name {\n                    display: flex;\n                    align-items: center;\n                    gap: 0.5rem;\n                    font-weight: 600;\n                    color: white;\n                }\n\n                .quest-emoji {\n                    font-size: 1.2rem;\n                }\n\n                .quest-xp {\n                    font-weight: 700;\n                    color: #FFD700;\n                    font-size: 0.9rem;\n                }\n\n                .quest-desc {\n                    color: rgba(255, 255, 255, 0.7);\n                    font-size: 0.9rem;\n                    margin-bottom: 0.75rem;\n                }\n\n                .quest-progress-container {\n                    display: flex;\n                    align-items: center;\n                    gap: 0.75rem;\n                }\n\n                .quest-progress-bar-mini {\n                    flex: 1;\n                    height: 6px;\n                    background: rgba(255, 255, 255, 0.1);\n                    border-radius: 3px;\n                    overflow: hidden;\n                }\n\n                .quest-progress-fill-mini {\n                    height: 100%;\n                    background: linear-gradient(90deg, #4fc3f7, #66bb6a);\n                    border-radius: 3px;\n                    transition: width 0.5s ease;\n                }\n\n                .quest-progress-text {\n                    font-size: 0.85rem;\n                    color: rgba(255, 255, 255, 0.6);\n                    min-width: 50px;\n                    text-align: right;\n                }\n\n                .perfect-day-banner {\n                    background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 193, 7, 0.2));\n                    border: 2px solid #FFD700;\n                    border-radius: 12px;\n                    padding: 1rem;\n                    text-align: center;\n                    font-weight: 700;\n                    font-size: 1.1rem;\n                    color: #FFD700;\n                    margin-bottom: 1.5rem;\n                    animation: perfectDayPulse 2s ease-in-out infinite;\n                }\n\n                @keyframes perfectDayPulse {\n                    0%, 100% { transform: scale(1); box-shadow: 0 0 10px rgba(255, 215, 0, 0.3); }\n                    50% { transform: scale(1.02); box-shadow: 0 0 20px rgba(255, 215, 0, 0.5); }\n                }\n\n                .quests-stats {\n                    display: grid;\n                    grid-template-columns: repeat(3, 1fr);\n                    gap: 1rem;\n                    padding-top: 1rem;\n                    border-top: 1px solid rgba(255, 255, 255, 0.1);\n                }\n\n                .quest-stat {\n                    text-align: center;\n                }\n\n                .quest-stat-value {\n                    font-size: 1.8rem;\n                    font-weight: 700;\n                    color: #4fc3f7;\n                    margin-bottom: 0.25rem;\n                }\n\n                .quest-stat-label {\n                    font-size: 0.8rem;\n                    color: rgba(255, 255, 255, 0.6);\n                    text-transform: uppercase;\n                    letter-spacing: 0.5px;\n                }\n\n                @media (max-width: 768px) {\n                    .daily-quests-widget {\n                        padding: 1.5rem;\n                    }\n\n                    .quests-stats {\n                        grid-template-columns: repeat(3, 1fr);\n                        gap: 0.75rem;\n                    }\n\n                    .quest-stat-value {\n                        font-size: 1.5rem;\n                    }\n\n                    .quest-stat-label {\n                        font-size: 0.7rem;\n                    }\n                }\n            </style>\n        "}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{document.getElementById("daily-quests-widget")&&(window.dailyQuestsWidget=new DailyQuestsWidget)}):document.getElementById("daily-quests-widget")&&(window.dailyQuestsWidget=new DailyQuestsWidget),console.log("‚≠ê Daily Quests Widget loaded");