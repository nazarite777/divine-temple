class RealisticWindChimes{constructor(){this.audioContext=null,this.isPlaying=!1,this.chimeIntervals=[],this.activeNodes=[],this.chimeFrequencies=[523.25,587.33,659.25,783.99,880,1046.5,1174.66,1318.51],this.masterVolume=.12,this.enabled=!0,this.init()}init(){try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),console.log("ðŸŽ Realistic Wind Chimes initialized")}catch(e){console.error("Failed to initialize wind chimes:",e)}}playChime(e=null,t=null){if(!this.enabled||!this.audioContext)return;null===e&&(e=this.chimeFrequencies[Math.floor(Math.random()*this.chimeFrequencies.length)]),null===t&&(t=.6*(2*Math.random()-1));const i=this.audioContext.currentTime,n=this.audioContext.createOscillator();n.type="triangle",n.frequency.setValueAtTime(e,i);const a=.002*e;n.frequency.linearRampToValueAtTime(e+a,i+.1),n.frequency.linearRampToValueAtTime(e-a,i+.2),n.frequency.exponentialRampToValueAtTime(e,i+.5);const o=this.audioContext.createOscillator();o.type="sine",o.frequency.setValueAtTime(3.14*e,i);const s=this.audioContext.createGain(),l=this.audioContext.createGain(),c=3.5+1.5*Math.random(),h=this.masterVolume*(.8+.4*Math.random());s.gain.setValueAtTime(0,i),s.gain.linearRampToValueAtTime(h,i+.005),s.gain.exponentialRampToValueAtTime(.001,i+c),l.gain.setValueAtTime(0,i),l.gain.linearRampToValueAtTime(.4*h,i+.005),l.gain.exponentialRampToValueAtTime(.001,i+.7*c);const r=this.audioContext.createDelay();r.delayTime.setValueAtTime(.03,i);const m=this.audioContext.createGain();m.gain.setValueAtTime(.2,i);const u=this.audioContext.createStereoPanner?this.audioContext.createStereoPanner():null;u&&u.pan.setValueAtTime(t,i);const d=this.audioContext.createBiquadFilter();d.type="lowpass",d.frequency.setValueAtTime(4*e,i),d.Q.setValueAtTime(.5,i),n.connect(d),o.connect(d),d.connect(s),d.connect(l),u?(s.connect(u),l.connect(u),u.connect(this.audioContext.destination),u.connect(r)):(s.connect(this.audioContext.destination),l.connect(this.audioContext.destination),s.connect(r)),r.connect(m),m.connect(r),m.connect(this.audioContext.destination),n.start(i),o.start(i);const p=i+c+.1;n.stop(p),o.stop(p),this.activeNodes.push({osc:n,osc2:o,gainNode:s,overtoneGain:l,delay:r,delayGain:m,filter:d,panner:u}),setTimeout(()=>{const e=this.activeNodes.findIndex(e=>e.osc===n);e>-1&&this.activeNodes.splice(e,1)},1e3*(c+1))}playBreeze(e="gentle"){const t="gentle"===e?2:"medium"===e?3:5,i="gentle"===e?300:"medium"===e?200:100;for(let e=0;e<t;e++)setTimeout(()=>{this.playChime()},e*i+Math.random()*i)}startAmbient(){if(this.isPlaying||!this.enabled)return;console.log("ðŸŽ Starting ambient wind chimes..."),this.isPlaying=!0,this.playChime();const e=()=>{if(!this.isPlaying)return;const t=3e3+5e3*Math.random();setTimeout(()=>{this.isPlaying&&(Math.random()<.3?this.playBreeze("gentle"):this.playChime(),e())},t)};e()}stopAmbient(){if(!this.isPlaying)return;console.log("ðŸŽ Stopping ambient wind chimes..."),this.isPlaying=!1,this.chimeIntervals.forEach(e=>clearInterval(e)),this.chimeIntervals=[];const e=this.audioContext.currentTime;this.activeNodes.forEach(t=>{try{t.gainNode&&t.gainNode.gain.linearRampToValueAtTime(0,e+1),t.overtoneGain&&t.overtoneGain.gain.linearRampToValueAtTime(0,e+1)}catch(e){}})}setVolume(e){this.masterVolume=Math.max(0,Math.min(1,e))}setEnabled(e){this.enabled=e,!e&&this.isPlaying&&this.stopAmbient()}}"undefined"!=typeof window&&(window.windChimes=new RealisticWindChimes);