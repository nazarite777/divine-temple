class JournalingSystem{constructor(){this.entries=this.loadEntries(),this.currentEntry=null,this.prompts=this.loadPrompts(),this.moods=["üòä Joyful","üòå Peaceful","ü§î Reflective","üòî Sad","üò§ Frustrated","üòç Grateful","üò¥ Tired","‚ö° Energized"],this.journalTypes=["daily","dream","gratitude","meditation","manifestation"],this.init()}init(){console.log("üìñ Journaling System initialized"),this.checkDailyPrompt(),window.addEventListener("journal-entry-requested",n=>{this.openJournalModal(n.detail.type||"daily",n.detail.prompt||"")})}loadEntries(){const n=localStorage.getItem("divine_temple_journal_entries");return n?JSON.parse(n):[]}saveEntries(){localStorage.setItem("divine_temple_journal_entries",JSON.stringify(this.entries))}loadPrompts(){return{daily:["What spiritual insights did I receive today?","How did I honor my higher self today?","What am I grateful for in this present moment?","What lessons did the universe teach me today?","How did I show love and compassion today?","What patterns am I noticing in my spiritual journey?","What blocks or resistance did I feel today?","How did I connect with the divine today?","What synchronicities did I notice today?","What intentions am I setting for tomorrow?"],dream:["What symbols or messages appeared in my dreams?","What emotions did I experience in this dream?","How does this dream relate to my waking life?","What is my subconscious trying to tell me?","What recurring themes am I noticing in my dreams?"],gratitude:["What three things am I deeply grateful for today?","Who showed me kindness today?","What abundance flows into my life?","What challenges helped me grow?","What beauty did I witness today?"],meditation:["What insights arose during my meditation?","What did I feel in my body during practice?","What thoughts kept returning to my awareness?","How has my practice evolved?","What did I learn about myself today?"],manifestation:["What am I calling into my life?","How do I feel in my desired reality?","What aligned actions can I take?","What limiting beliefs am I releasing?","What affirmations resonate with my soul?"]}}checkDailyPrompt(){const n=(new Date).toISOString().split("T")[0];localStorage.getItem("divine_temple_last_daily_prompt")!==n&&(localStorage.setItem("divine_temple_last_daily_prompt",n),this.showDailyPromptNotification())}showDailyPromptNotification(){const n=this.getDailyPrompt(),t=document.createElement("div");t.className="journal-prompt-notification",t.innerHTML=`\n            <div class="prompt-notification-content">\n                <div class="prompt-icon">üìñ</div>\n                <div class="prompt-text">\n                    <h4>Daily Journal Prompt</h4>\n                    <p>${n}</p>\n                </div>\n                <button onclick="window.journalingSystem.openJournalModal('daily', '${n}')" class="prompt-btn">\n                    ‚úçÔ∏è Write Entry\n                </button>\n                <button onclick="this.parentElement.parentElement.remove()" class="prompt-close">‚úï</button>\n            </div>\n        `;const e=document.createElement("style");e.textContent="\n            .journal-prompt-notification {\n                position: fixed;\n                top: 80px;\n                right: 20px;\n                z-index: 10000;\n                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n                border-radius: 15px;\n                box-shadow: 0 10px 30px rgba(0,0,0,0.3);\n                animation: slideInRight 0.5s ease;\n                max-width: 400px;\n            }\n\n            .prompt-notification-content {\n                padding: 20px;\n                color: white;\n                display: flex;\n                gap: 15px;\n                align-items: flex-start;\n            }\n\n            .prompt-icon {\n                font-size: 32px;\n                flex-shrink: 0;\n            }\n\n            .prompt-text {\n                flex: 1;\n            }\n\n            .prompt-text h4 {\n                margin: 0 0 8px 0;\n                font-size: 16px;\n                font-weight: 600;\n            }\n\n            .prompt-text p {\n                margin: 0;\n                font-size: 14px;\n                opacity: 0.95;\n                line-height: 1.5;\n            }\n\n            .prompt-btn {\n                background: white;\n                color: #667eea;\n                border: none;\n                padding: 8px 16px;\n                border-radius: 8px;\n                cursor: pointer;\n                font-weight: 600;\n                font-size: 13px;\n                transition: transform 0.2s;\n                margin-top: 5px;\n            }\n\n            .prompt-btn:hover {\n                transform: scale(1.05);\n            }\n\n            .prompt-close {\n                background: rgba(255,255,255,0.2);\n                border: none;\n                color: white;\n                width: 24px;\n                height: 24px;\n                border-radius: 50%;\n                cursor: pointer;\n                font-size: 16px;\n                flex-shrink: 0;\n                transition: background 0.2s;\n            }\n\n            .prompt-close:hover {\n                background: rgba(255,255,255,0.3);\n            }\n\n            @keyframes slideInRight {\n                from {\n                    transform: translateX(400px);\n                    opacity: 0;\n                }\n                to {\n                    transform: translateX(0);\n                    opacity: 1;\n                }\n            }\n        ",document.head.appendChild(e),document.body.appendChild(t),setTimeout(()=>{t.parentElement&&(t.style.animation="slideInRight 0.5s ease reverse",setTimeout(()=>t.remove(),500))},15e3)}getDailyPrompt(){const n=new Date,t=Math.floor((n-new Date(n.getFullYear(),0,0))/1e3/60/60/24),e=this.prompts.daily;return e[t%e.length]}getRandomPrompt(n="daily"){const t=this.prompts[n]||this.prompts.daily;return t[Math.floor(Math.random()*t.length)]}createEntry(n){const t={id:Date.now().toString(),type:n.type||"daily",date:(new Date).toISOString(),title:n.title||this.getDefaultTitle(n.type),content:n.content,mood:n.mood||null,prompt:n.prompt||null,tags:n.tags||[],favorite:!1,wordCount:n.content.split(/\s+/).filter(n=>n.length>0).length};this.entries.unshift(t),this.saveEntries();const e=this.calculateEntryXP(t);return window.progressSystem&&(window.progressSystem.awardXP(e,`Journal entry: ${t.title}`,"journaling"),window.progressSystem.logActivity("journal_entry","journaling",{type:t.type,wordCount:t.wordCount,hasMood:!!t.mood})),this.updateStreak(),window.dispatchEvent(new CustomEvent("journal-entry-created",{detail:t})),{success:!0,entry:t,xp:e}}calculateEntryXP(n){let t=20;n.wordCount>100&&(t+=10),n.wordCount>300&&(t+=20),n.wordCount>500&&(t+=30),n.mood&&(t+=5),"dream"===n.type&&(t+=15),"gratitude"===n.type&&(t+=10);const e=this.getStreak();return e>=7&&(t+=20),e>=30&&(t+=50),t}getDefaultTitle(n){return{daily:"Daily Reflection",dream:"Dream Journal",gratitude:"Gratitude Entry",meditation:"Meditation Notes",manifestation:"Manifestation Journal"}[n]||"Journal Entry"}updateEntry(n,t){const e=this.entries.findIndex(t=>t.id===n);return-1===e?{success:!1,message:"Entry not found"}:(this.entries[e]={...this.entries[e],...t,updatedAt:(new Date).toISOString()},this.saveEntries(),window.dispatchEvent(new CustomEvent("journal-entry-updated",{detail:this.entries[e]})),{success:!0,entry:this.entries[e]})}deleteEntry(n){const t=this.entries.findIndex(t=>t.id===n);if(-1===t)return{success:!1,message:"Entry not found"};const e=this.entries.splice(t,1)[0];return this.saveEntries(),window.dispatchEvent(new CustomEvent("journal-entry-deleted",{detail:e})),{success:!0}}toggleFavorite(n){const t=this.entries.find(t=>t.id===n);return t?(t.favorite=!t.favorite,this.saveEntries(),{success:!0,favorite:t.favorite}):{success:!1}}searchEntries(n){const t=n.toLowerCase();return this.entries.filter(n=>n.title.toLowerCase().includes(t)||n.content.toLowerCase().includes(t)||n.tags&&n.tags.some(n=>n.toLowerCase().includes(t)))}filterEntries(n){let t=[...this.entries];return n.type&&(t=t.filter(t=>t.type===n.type)),n.mood&&(t=t.filter(t=>t.mood===n.mood)),n.favorite&&(t=t.filter(n=>n.favorite)),n.dateFrom&&(t=t.filter(t=>new Date(t.date)>=new Date(n.dateFrom))),n.dateTo&&(t=t.filter(t=>new Date(t.date)<=new Date(n.dateTo))),n.tags&&n.tags.length>0&&(t=t.filter(t=>t.tags&&t.tags.some(t=>n.tags.includes(t)))),t}getEntriesByMonth(n,t){return this.entries.filter(e=>{const o=new Date(e.date);return o.getFullYear()===n&&o.getMonth()===t})}updateStreak(){const n=(new Date).toISOString().split("T")[0];let t=localStorage.getItem("divine_temple_journal_streak");if(t){t=JSON.parse(t);const e=new Date;e.setDate(e.getDate()-1);const o=e.toISOString().split("T")[0];t.lastEntry===o||t.lastEntry===n?(t.lastEntry===o&&t.current++,t.longest=Math.max(t.longest,t.current),t.lastEntry=n):(t.current=1,t.lastEntry=n)}else t={current:1,longest:1,lastEntry:n};return localStorage.setItem("divine_temple_journal_streak",JSON.stringify(t)),7===t.current&&window.progressSystem&&window.progressSystem.awardXP(100,"7-day journaling streak! üî•","journaling"),30===t.current&&window.progressSystem&&window.progressSystem.awardXP(500,"30-day journaling streak! üî•üî•üî•","journaling"),t}getStreak(){const n=localStorage.getItem("divine_temple_journal_streak");return n?JSON.parse(n).current:0}getStats(){const n=this.entries.length,t=this.entries.reduce((n,t)=>n+t.wordCount,0),e=n>0?Math.round(t/n):0,o=this.getStreak(),a=JSON.parse(localStorage.getItem("divine_temple_journal_streak")||"{}"),r={};this.journalTypes.forEach(n=>{r[n]=this.entries.filter(t=>t.type===n).length});const i={};return this.entries.forEach(n=>{n.mood&&(i[n.mood]=(i[n.mood]||0)+1)}),{totalEntries:n,totalWords:t,avgWords:e,currentStreak:o,longestStreak:a.longest||0,favorites:this.entries.filter(n=>n.favorite).length,typeBreakdown:r,moodBreakdown:i,firstEntry:n>0?this.entries[this.entries.length-1].date:null,lastEntry:n>0?this.entries[0].date:null}}exportToJSON(){const n={entries:this.entries,stats:this.getStats(),exportDate:(new Date).toISOString()},t=new Blob([JSON.stringify(n,null,2)],{type:"application/json"}),e=URL.createObjectURL(t),o=document.createElement("a");o.href=e,o.download=`divine-temple-journal-${(new Date).toISOString().split("T")[0]}.json`,o.click(),URL.revokeObjectURL(e),window.progressSystem&&window.progressSystem.awardXP(30,"Exported journal to JSON","journaling")}exportToPDF(){const n=window.open("","","width=800,height=600");let t=`\n            <!DOCTYPE html>\n            <html>\n            <head>\n                <title>Divine Temple Journal Export</title>\n                <style>\n                    body {\n                        font-family: 'Georgia', serif;\n                        max-width: 800px;\n                        margin: 0 auto;\n                        padding: 40px;\n                        color: #333;\n                    }\n                    h1 {\n                        color: #667eea;\n                        border-bottom: 3px solid #667eea;\n                        padding-bottom: 10px;\n                    }\n                    .entry {\n                        margin: 30px 0;\n                        page-break-inside: avoid;\n                        border-left: 4px solid #764ba2;\n                        padding-left: 20px;\n                    }\n                    .entry-header {\n                        display: flex;\n                        justify-content: space-between;\n                        margin-bottom: 10px;\n                    }\n                    .entry-title {\n                        font-size: 18px;\n                        font-weight: bold;\n                        color: #764ba2;\n                    }\n                    .entry-date {\n                        color: #666;\n                        font-size: 14px;\n                    }\n                    .entry-content {\n                        line-height: 1.8;\n                        white-space: pre-wrap;\n                    }\n                    .entry-meta {\n                        margin-top: 10px;\n                        font-size: 12px;\n                        color: #999;\n                    }\n                    @media print {\n                        body { padding: 20px; }\n                    }\n                </style>\n            </head>\n            <body>\n                <h1>üìñ Divine Temple Journal</h1>\n                <p><strong>Export Date:</strong> ${(new Date).toLocaleDateString()}</p>\n                <p><strong>Total Entries:</strong> ${this.entries.length}</p>\n                <hr>\n        `;this.entries.forEach(n=>{const e=new Date(n.date).toLocaleDateString();t+=`\n                <div class="entry">\n                    <div class="entry-header">\n                        <div class="entry-title">${n.title}</div>\n                        <div class="entry-date">${e}</div>\n                    </div>\n                    <div class="entry-content">${n.content}</div>\n                    <div class="entry-meta">\n                        Type: ${n.type} | Words: ${n.wordCount}${n.mood?` | Mood: ${n.mood}`:""}\n                    </div>\n                </div>\n            `}),t+="\n            </body>\n            </html>\n        ",n.document.write(t),n.document.close(),setTimeout(()=>{n.print()},500),window.progressSystem&&window.progressSystem.awardXP(50,"Exported journal to PDF","journaling")}openJournalModal(n="daily",t=""){const e=document.createElement("div");e.className="journal-modal",e.id="journalModal";const o=t||this.getRandomPrompt(n);e.innerHTML=`\n            <div class="journal-modal-content">\n                <div class="journal-modal-header">\n                    <h2>‚úçÔ∏è New ${this.getDefaultTitle(n)}</h2>\n                    <button onclick="document.getElementById('journalModal').remove()" class="journal-close">‚úï</button>\n                </div>\n\n                <div class="journal-modal-body">\n                    <div class="journal-prompt-section">\n                        <label>üí≠ Reflection Prompt:</label>\n                        <p class="journal-prompt-text">${o}</p>\n                        <button onclick="window.journalingSystem.changePrompt('${n}')" class="change-prompt-btn">\n                            üîÑ Change Prompt\n                        </button>\n                    </div>\n\n                    <div class="journal-form">\n                        <div class="form-group">\n                            <label>üìù Title:</label>\n                            <input type="text" id="journalTitle" placeholder="Give your entry a title..."\n                                   value="${this.getDefaultTitle(n)}" class="journal-input">\n                        </div>\n\n                        <div class="form-group">\n                            <label>üòä How are you feeling?</label>\n                            <select id="journalMood" class="journal-select">\n                                <option value="">Select a mood...</option>\n                                ${this.moods.map(n=>`<option value="${n}">${n}</option>`).join("")}\n                            </select>\n                        </div>\n\n                        <div class="form-group">\n                            <label>‚úçÔ∏è Your Reflection:</label>\n                            <textarea id="journalContent" rows="12" placeholder="Let your thoughts flow freely..."\n                                      class="journal-textarea"></textarea>\n                            <div class="word-count">Words: <span id="wordCount">0</span></div>\n                        </div>\n\n                        <div class="form-group">\n                            <label>üè∑Ô∏è Tags (optional):</label>\n                            <input type="text" id="journalTags" placeholder="meditation, gratitude, insight..."\n                                   class="journal-input">\n                            <small>Separate tags with commas</small>\n                        </div>\n\n                        <div class="journal-actions">\n                            <button onclick="window.journalingSystem.saveEntry('${n}', '${o}')"\n                                    class="save-entry-btn">\n                                üíæ Save Entry\n                            </button>\n                            <button onclick="document.getElementById('journalModal').remove()"\n                                    class="cancel-btn">\n                                Cancel\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `,this.addModalStyles(),document.body.appendChild(e);const a=document.getElementById("journalContent"),r=document.getElementById("wordCount");a.addEventListener("input",()=>{const n=a.value.split(/\s+/).filter(n=>n.length>0).length;r.textContent=n}),setTimeout(()=>a.focus(),100)}changePrompt(n){const t=document.querySelector(".journal-prompt-text");t&&(t.textContent=this.getRandomPrompt(n))}saveEntry(n,t){const e=document.getElementById("journalTitle").value.trim(),o=document.getElementById("journalContent").value.trim(),a=document.getElementById("journalMood").value,r=document.getElementById("journalTags").value.split(",").map(n=>n.trim()).filter(n=>n.length>0);if(!o)return void alert("Please write something in your journal entry!");const i=this.createEntry({type:n,title:e||this.getDefaultTitle(n),content:o,mood:a,prompt:t,tags:r});i.success&&(document.getElementById("journalModal").remove(),this.showSuccessMessage(i.xp))}showSuccessMessage(n){const t=document.createElement("div");t.className="journal-success-message",t.innerHTML=`\n            <div class="success-content">\n                <div class="success-icon">‚úÖ</div>\n                <div class="success-text">\n                    <strong>Journal Entry Saved!</strong>\n                    <p>+${n} XP earned</p>\n                </div>\n            </div>\n        `,document.body.appendChild(t),setTimeout(()=>t.remove(),3e3)}addModalStyles(){if(document.getElementById("journalModalStyles"))return;const n=document.createElement("style");n.id="journalModalStyles",n.textContent="\n            .journal-modal {\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n                background: rgba(0,0,0,0.8);\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                z-index: 10000;\n                animation: fadeIn 0.3s ease;\n            }\n\n            .journal-modal-content {\n                background: white;\n                border-radius: 20px;\n                max-width: 700px;\n                width: 90%;\n                max-height: 90vh;\n                overflow-y: auto;\n                box-shadow: 0 20px 60px rgba(0,0,0,0.5);\n                animation: slideUp 0.3s ease;\n            }\n\n            .journal-modal-header {\n                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n                color: white;\n                padding: 20px 30px;\n                border-radius: 20px 20px 0 0;\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n            }\n\n            .journal-modal-header h2 {\n                margin: 0;\n                font-size: 24px;\n            }\n\n            .journal-close {\n                background: rgba(255,255,255,0.2);\n                border: none;\n                color: white;\n                width: 32px;\n                height: 32px;\n                border-radius: 50%;\n                cursor: pointer;\n                font-size: 20px;\n                transition: background 0.2s;\n            }\n\n            .journal-close:hover {\n                background: rgba(255,255,255,0.3);\n            }\n\n            .journal-modal-body {\n                padding: 30px;\n            }\n\n            .journal-prompt-section {\n                background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);\n                padding: 20px;\n                border-radius: 15px;\n                color: white;\n                margin-bottom: 25px;\n            }\n\n            .journal-prompt-section label {\n                font-weight: 600;\n                display: block;\n                margin-bottom: 10px;\n                font-size: 14px;\n                opacity: 0.9;\n            }\n\n            .journal-prompt-text {\n                font-size: 16px;\n                line-height: 1.6;\n                margin: 0 0 15px 0;\n                font-style: italic;\n            }\n\n            .change-prompt-btn {\n                background: rgba(255,255,255,0.2);\n                border: 2px solid rgba(255,255,255,0.5);\n                color: white;\n                padding: 8px 16px;\n                border-radius: 8px;\n                cursor: pointer;\n                font-weight: 600;\n                transition: all 0.2s;\n            }\n\n            .change-prompt-btn:hover {\n                background: rgba(255,255,255,0.3);\n                border-color: white;\n            }\n\n            .journal-form .form-group {\n                margin-bottom: 20px;\n            }\n\n            .journal-form label {\n                display: block;\n                margin-bottom: 8px;\n                font-weight: 600;\n                color: #333;\n            }\n\n            .journal-input, .journal-select, .journal-textarea {\n                width: 100%;\n                padding: 12px;\n                border: 2px solid #e0e0e0;\n                border-radius: 10px;\n                font-size: 15px;\n                font-family: inherit;\n                transition: border-color 0.2s;\n            }\n\n            .journal-input:focus, .journal-select:focus, .journal-textarea:focus {\n                outline: none;\n                border-color: #667eea;\n            }\n\n            .journal-textarea {\n                resize: vertical;\n                min-height: 200px;\n                line-height: 1.6;\n            }\n\n            .word-count {\n                text-align: right;\n                font-size: 13px;\n                color: #666;\n                margin-top: 5px;\n            }\n\n            .journal-actions {\n                display: flex;\n                gap: 15px;\n                margin-top: 30px;\n            }\n\n            .save-entry-btn, .cancel-btn {\n                flex: 1;\n                padding: 14px;\n                border: none;\n                border-radius: 10px;\n                font-size: 16px;\n                font-weight: 600;\n                cursor: pointer;\n                transition: transform 0.2s;\n            }\n\n            .save-entry-btn {\n                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n                color: white;\n            }\n\n            .save-entry-btn:hover {\n                transform: translateY(-2px);\n            }\n\n            .cancel-btn {\n                background: #f0f0f0;\n                color: #666;\n            }\n\n            .cancel-btn:hover {\n                background: #e0e0e0;\n            }\n\n            .journal-success-message {\n                position: fixed;\n                top: 80px;\n                right: 20px;\n                z-index: 10001;\n                background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);\n                color: white;\n                padding: 20px;\n                border-radius: 15px;\n                box-shadow: 0 10px 30px rgba(0,0,0,0.3);\n                animation: slideInRight 0.5s ease;\n            }\n\n            .success-content {\n                display: flex;\n                gap: 15px;\n                align-items: center;\n            }\n\n            .success-icon {\n                font-size: 32px;\n            }\n\n            .success-text strong {\n                display: block;\n                font-size: 16px;\n                margin-bottom: 5px;\n            }\n\n            .success-text p {\n                margin: 0;\n                opacity: 0.95;\n            }\n\n            @keyframes fadeIn {\n                from { opacity: 0; }\n                to { opacity: 1; }\n            }\n\n            @keyframes slideUp {\n                from {\n                    transform: translateY(50px);\n                    opacity: 0;\n                }\n                to {\n                    transform: translateY(0);\n                    opacity: 1;\n                }\n            }\n        ",document.head.appendChild(n)}renderJournalDashboard(n){const t=document.getElementById(n);if(!t)return;const e=this.getStats(),o=this.entries.slice(0,5);t.innerHTML=`\n            <div class="journal-dashboard">\n                <div class="journal-header">\n                    <h1>üìñ My Spiritual Journal</h1>\n                    <div class="journal-header-actions">\n                        <button onclick="window.journalingSystem.openJournalModal('daily')" class="new-entry-btn">\n                            ‚úçÔ∏è New Entry\n                        </button>\n                        <button onclick="window.journalingSystem.showExportMenu()" class="export-btn">\n                            üì• Export\n                        </button>\n                    </div>\n                </div>\n\n                <div class="journal-stats-grid">\n                    <div class="stat-card">\n                        <div class="stat-icon">üìù</div>\n                        <div class="stat-value">${e.totalEntries}</div>\n                        <div class="stat-label">Total Entries</div>\n                    </div>\n\n                    <div class="stat-card">\n                        <div class="stat-icon">üî•</div>\n                        <div class="stat-value">${e.currentStreak}</div>\n                        <div class="stat-label">Day Streak</div>\n                    </div>\n\n                    <div class="stat-card">\n                        <div class="stat-icon">üìä</div>\n                        <div class="stat-value">${e.totalWords.toLocaleString()}</div>\n                        <div class="stat-label">Total Words</div>\n                    </div>\n\n                    <div class="stat-card">\n                        <div class="stat-icon">‚≠ê</div>\n                        <div class="stat-value">${e.favorites}</div>\n                        <div class="stat-label">Favorites</div>\n                    </div>\n                </div>\n\n                <div class="journal-types">\n                    ${this.journalTypes.map(n=>`\n                        <button onclick="window.journalingSystem.openJournalModal('${n}')" class="type-btn">\n                            ${this.getTypeIcon(n)} ${this.getDefaultTitle(n)}\n                        </button>\n                    `).join("")}\n                </div>\n\n                <div class="recent-entries">\n                    <h2>Recent Entries</h2>\n                    ${o.length>0?`\n                        <div class="entries-list">\n                            ${o.map(n=>this.renderEntryCard(n)).join("")}\n                        </div>\n                    `:'\n                        <div class="no-entries">\n                            <p>üìñ No journal entries yet. Start writing your spiritual journey!</p>\n                        </div>\n                    '}\n                </div>\n            </div>\n        `,this.addDashboardStyles()}getTypeIcon(n){return{daily:"üìÖ",dream:"üåô",gratitude:"üôè",meditation:"üßò",manifestation:"‚ú®"}[n]||"üìñ"}renderEntryCard(n){const t=new Date(n.date).toLocaleDateString(),e=n.content.substring(0,150)+(n.content.length>150?"...":"");return`\n            <div class="entry-card">\n                <div class="entry-card-header">\n                    <div>\n                        <div class="entry-type">${this.getTypeIcon(n.type)} ${n.type}</div>\n                        <h3>${n.title}</h3>\n                        <div class="entry-date">${t}</div>\n                    </div>\n                    <button onclick="window.journalingSystem.toggleFavorite('${n.id}')"\n                            class="favorite-btn ${n.favorite?"active":""}">\n                        ${n.favorite?"‚≠ê":"‚òÜ"}\n                    </button>\n                </div>\n                ${n.mood?`<div class="entry-mood">${n.mood}</div>`:""}\n                <div class="entry-preview">${e}</div>\n                <div class="entry-meta">\n                    <span>${n.wordCount} words</span>\n                    ${n.tags&&n.tags.length>0?`<span class="entry-tags">${n.tags.map(n=>`#${n}`).join(" ")}</span>`:""}\n                </div>\n            </div>\n        `}showExportMenu(){const n=document.createElement("div");n.className="export-menu",n.innerHTML='\n            <div class="export-menu-content">\n                <h3>üì• Export Journal</h3>\n                <button onclick="window.journalingSystem.exportToJSON(); this.parentElement.parentElement.remove();" class="export-option">\n                    <span class="export-icon">üìÑ</span>\n                    <div>\n                        <strong>JSON Format</strong>\n                        <small>Machine-readable format with all data</small>\n                    </div>\n                </button>\n                <button onclick="window.journalingSystem.exportToPDF(); this.parentElement.parentElement.remove();" class="export-option">\n                    <span class="export-icon">üìã</span>\n                    <div>\n                        <strong>PDF Format</strong>\n                        <small>Beautiful printable document</small>\n                    </div>\n                </button>\n                <button onclick="this.parentElement.parentElement.remove()" class="export-cancel">Cancel</button>\n            </div>\n        ',document.body.appendChild(n),setTimeout(()=>n.classList.add("show"),10)}addDashboardStyles(){if(document.getElementById("journalDashboardStyles"))return;const n=document.createElement("style");n.id="journalDashboardStyles",n.textContent="\n            .journal-dashboard {\n                padding: 20px;\n                max-width: 1200px;\n                margin: 0 auto;\n            }\n\n            .journal-header {\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                margin-bottom: 30px;\n            }\n\n            .journal-header h1 {\n                margin: 0;\n                font-size: 32px;\n                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n                -webkit-background-clip: text;\n                -webkit-text-fill-color: transparent;\n            }\n\n            .journal-header-actions {\n                display: flex;\n                gap: 10px;\n            }\n\n            .new-entry-btn, .export-btn {\n                padding: 12px 24px;\n                border: none;\n                border-radius: 10px;\n                font-weight: 600;\n                cursor: pointer;\n                transition: transform 0.2s;\n            }\n\n            .new-entry-btn {\n                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n                color: white;\n            }\n\n            .export-btn {\n                background: #f0f0f0;\n                color: #333;\n            }\n\n            .new-entry-btn:hover, .export-btn:hover {\n                transform: translateY(-2px);\n            }\n\n            .journal-stats-grid {\n                display: grid;\n                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n                gap: 20px;\n                margin-bottom: 30px;\n            }\n\n            .stat-card {\n                background: white;\n                padding: 25px;\n                border-radius: 15px;\n                text-align: center;\n                box-shadow: 0 4px 15px rgba(0,0,0,0.1);\n            }\n\n            .stat-icon {\n                font-size: 40px;\n                margin-bottom: 10px;\n            }\n\n            .stat-value {\n                font-size: 32px;\n                font-weight: bold;\n                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n                -webkit-background-clip: text;\n                -webkit-text-fill-color: transparent;\n            }\n\n            .stat-label {\n                color: #666;\n                font-size: 14px;\n                margin-top: 5px;\n            }\n\n            .journal-types {\n                display: flex;\n                gap: 10px;\n                margin-bottom: 30px;\n                flex-wrap: wrap;\n            }\n\n            .type-btn {\n                padding: 10px 20px;\n                border: 2px solid #e0e0e0;\n                background: white;\n                border-radius: 10px;\n                cursor: pointer;\n                font-weight: 600;\n                transition: all 0.2s;\n            }\n\n            .type-btn:hover {\n                border-color: #667eea;\n                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n                color: white;\n            }\n\n            .recent-entries h2 {\n                margin-bottom: 20px;\n            }\n\n            .entries-list {\n                display: grid;\n                gap: 20px;\n            }\n\n            .entry-card {\n                background: white;\n                padding: 20px;\n                border-radius: 15px;\n                box-shadow: 0 4px 15px rgba(0,0,0,0.1);\n                border-left: 4px solid #764ba2;\n            }\n\n            .entry-card-header {\n                display: flex;\n                justify-content: space-between;\n                align-items: flex-start;\n                margin-bottom: 15px;\n            }\n\n            .entry-type {\n                font-size: 12px;\n                font-weight: 600;\n                color: #667eea;\n                text-transform: uppercase;\n                margin-bottom: 5px;\n            }\n\n            .entry-card h3 {\n                margin: 0 0 5px 0;\n                font-size: 20px;\n            }\n\n            .entry-date {\n                font-size: 14px;\n                color: #999;\n            }\n\n            .favorite-btn {\n                background: none;\n                border: none;\n                font-size: 24px;\n                cursor: pointer;\n                transition: transform 0.2s;\n            }\n\n            .favorite-btn:hover {\n                transform: scale(1.2);\n            }\n\n            .favorite-btn.active {\n                color: #ffd700;\n            }\n\n            .entry-mood {\n                display: inline-block;\n                padding: 5px 12px;\n                background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);\n                color: white;\n                border-radius: 20px;\n                font-size: 13px;\n                margin-bottom: 10px;\n            }\n\n            .entry-preview {\n                line-height: 1.6;\n                color: #555;\n                margin-bottom: 15px;\n            }\n\n            .entry-meta {\n                display: flex;\n                justify-content: space-between;\n                font-size: 13px;\n                color: #999;\n            }\n\n            .entry-tags {\n                color: #667eea;\n            }\n\n            .no-entries {\n                text-align: center;\n                padding: 60px 20px;\n                color: #999;\n            }\n\n            .export-menu {\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n                background: rgba(0,0,0,0.8);\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                z-index: 10000;\n                opacity: 0;\n                transition: opacity 0.3s;\n            }\n\n            .export-menu.show {\n                opacity: 1;\n            }\n\n            .export-menu-content {\n                background: white;\n                padding: 30px;\n                border-radius: 20px;\n                max-width: 400px;\n                width: 90%;\n            }\n\n            .export-menu-content h3 {\n                margin-top: 0;\n            }\n\n            .export-option {\n                width: 100%;\n                display: flex;\n                align-items: center;\n                gap: 15px;\n                padding: 15px;\n                margin: 10px 0;\n                border: 2px solid #e0e0e0;\n                background: white;\n                border-radius: 10px;\n                cursor: pointer;\n                text-align: left;\n                transition: all 0.2s;\n            }\n\n            .export-option:hover {\n                border-color: #667eea;\n                background: #f9f9ff;\n            }\n\n            .export-icon {\n                font-size: 32px;\n            }\n\n            .export-option strong {\n                display: block;\n                margin-bottom: 3px;\n            }\n\n            .export-option small {\n                color: #666;\n                font-size: 12px;\n            }\n\n            .export-cancel {\n                width: 100%;\n                padding: 12px;\n                margin-top: 10px;\n                border: none;\n                background: #f0f0f0;\n                border-radius: 10px;\n                cursor: pointer;\n            }\n        ",document.head.appendChild(n)}}"undefined"!=typeof window&&(window.journalingSystem=new JournalingSystem,console.log("üìñ Journaling System ready!"));