class DivineTempleComms{constructor(){this.socket=null,this.userId=this.generateUserId(),this.userName=this.getUserName(),this.currentRoom=null,this.activeConnections=new Map,this.communityFeatures={meditationRooms:!0,sacredCircles:!0,energySharing:!0,groupSessions:!0,wisdomExchange:!0,healingCircles:!0},this.init()}init(){console.log("ğŸ‘¥ Initializing Divine Temple Community System Phase 10..."),this.setupCommunityInterface(),this.initializeWebSocket(),this.setupPresenceSystem(),this.createCommunityHub()}generateUserId(){let e=localStorage.getItem("divine-temple-user-id");return e||(e="soul_"+Math.random().toString(36).substr(2,9),localStorage.setItem("divine-temple-user-id",e)),e}getUserName(){let e=localStorage.getItem("divine-temple-user-name");if(!e){const t=["Seeker of Light","Divine Wanderer","Sacred Soul","Cosmic Traveler","Mystic Heart","Awakened Spirit","Celestial Being","Universal Love","Radiant Soul","Infinite Wisdom","Sacred Journey","Divine Essence"];e=t[Math.floor(Math.random()*t.length)],localStorage.setItem("divine-temple-user-name",e)}return e}setupCommunityInterface(){const e=document.createElement("div");e.className="community-hub",e.innerHTML=`\n            <div class="community-toggle" onclick="divineComms.toggleCommunityPanel()">\n                <div class="community-icon">ğŸ‘¥</div>\n                <div class="online-indicator">\n                    <div class="pulse-ring"></div>\n                    <div class="pulse-dot"></div>\n                </div>\n            </div>\n            \n            <div class="community-panel" id="community-panel">\n                <div class="community-header">\n                    <h3>ğŸ›ï¸ Sacred Community</h3>\n                    <div class="user-info">\n                        <span class="user-name">${this.userName}</span>\n                        <button class="edit-name-btn" onclick="divineComms.editUserName()">âœï¸</button>\n                    </div>\n                    <button class="close-community" onclick="divineComms.closeCommunityPanel()">Ã—</button>\n                </div>\n                \n                <div class="community-tabs">\n                    <button class="tab-btn active" data-tab="rooms">ğŸ§˜ Sacred Rooms</button>\n                    <button class="tab-btn" data-tab="circles">ğŸ”® Wisdom Circles</button>\n                    <button class="tab-btn" data-tab="members">ğŸ‘¥ Divine Souls</button>\n                </div>\n                \n                <div class="community-content">\n                    <div class="tab-content active" id="rooms-tab">\n                        <div class="rooms-list">\n                            <div class="room-item" data-room="meditation-sanctuary">\n                                <div class="room-icon">ğŸ§˜â€â™€ï¸</div>\n                                <div class="room-info">\n                                    <div class="room-name">Meditation Sanctuary</div>\n                                    <div class="room-desc">Silent practice together</div>\n                                    <div class="room-members">0 souls present</div>\n                                </div>\n                                <button class="join-room-btn" onclick="divineComms.joinRoom('meditation-sanctuary')">Join</button>\n                            </div>\n                            \n                            <div class="room-item" data-room="chakra-healing">\n                                <div class="room-icon">ğŸŒˆ</div>\n                                <div class="room-info">\n                                    <div class="room-name">Chakra Healing Circle</div>\n                                    <div class="room-desc">Energy healing together</div>\n                                    <div class="room-members">0 souls present</div>\n                                </div>\n                                <button class="join-room-btn" onclick="divineComms.joinRoom('chakra-healing')">Join</button>\n                            </div>\n                            \n                            <div class="room-item" data-room="oracle-sharing">\n                                <div class="room-icon">ğŸ”®</div>\n                                <div class="room-info">\n                                    <div class="room-name">Oracle Wisdom Sharing</div>\n                                    <div class="room-desc">Share divine insights</div>\n                                    <div class="room-members">0 souls present</div>\n                                </div>\n                                <button class="join-room-btn" onclick="divineComms.joinRoom('oracle-sharing')">Join</button>\n                            </div>\n                            \n                            <div class="room-item" data-room="manifestation-circle">\n                                <div class="room-icon">âœ¨</div>\n                                <div class="room-info">\n                                    <div class="room-name">Manifestation Circle</div>\n                                    <div class="room-desc">Co-create with intention</div>\n                                    <div class="room-members">0 souls present</div>\n                                </div>\n                                <button class="join-room-btn" onclick="divineComms.joinRoom('manifestation-circle')">Join</button>\n                            </div>\n                        </div>\n                    </div>\n                    \n                    <div class="tab-content" id="circles-tab">\n                        <div class="circles-list">\n                            <div class="wisdom-sharing">\n                                <h4>ğŸ’« Share Your Wisdom</h4>\n                                <textarea class="wisdom-input" placeholder="Share an insight, affirmation, or blessing with the community..."></textarea>\n                                <button class="share-wisdom-btn" onclick="divineComms.shareWisdom()">âœ¨ Share Light</button>\n                            </div>\n                            <div class="wisdom-feed" id="wisdom-feed">\n                                \x3c!-- Wisdom posts will appear here --\x3e\n                            </div>\n                        </div>\n                    </div>\n                    \n                    <div class="tab-content" id="members-tab">\n                        <div class="members-list" id="members-list">\n                            \x3c!-- Online members will appear here --\x3e\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `,document.body.appendChild(e),this.setupTabNavigation()}setupTabNavigation(){document.querySelectorAll(".tab-btn").forEach(e=>{e.addEventListener("click",e=>{const t=e.target.dataset.tab;this.switchTab(t)})})}switchTab(e){document.querySelectorAll(".tab-btn").forEach(e=>{e.classList.remove("active")}),document.querySelector(`[data-tab="${e}"]`).classList.add("active"),document.querySelectorAll(".tab-content").forEach(e=>{e.classList.remove("active")}),document.getElementById(`${e}-tab`).classList.add("active")}initializeWebSocket(){console.log("ğŸŒ Connecting to Divine Temple Community Server..."),setTimeout(()=>{this.onWebSocketConnected()},1e3),setInterval(()=>{this.simulateRoomUpdates()},1e4)}onWebSocketConnected(){console.log("âœ¨ Connected to Sacred Community Network"),this.updateConnectionStatus(!0),this.joinCommunityPresence(),this.loadInitialData()}updateConnectionStatus(e){const t=document.querySelector(".online-indicator");e?(t.classList.add("connected"),t.title="Connected to Sacred Community"):(t.classList.remove("connected"),t.title="Connecting to Sacred Community...")}joinCommunityPresence(){this.updateMembersList(),this.showCommunityNotification("ğŸŒŸ Welcome to the Sacred Community!")}loadInitialData(){this.loadWisdomFeed(),this.updateRoomCounts()}loadWisdomFeed(){const e=[{author:"Luminous Guide",message:"In stillness, we find the infinite wisdom that has always been within us. ğŸŒŸ",timestamp:new Date(Date.now()-18e5),reactions:{light:12,gratitude:8,wisdom:15}},{author:"Sacred Healer",message:"Every breath is a gift, every heartbeat a prayer. Honor this moment. ğŸ™",timestamp:new Date(Date.now()-36e5),reactions:{light:8,gratitude:12,wisdom:6}},{author:"Cosmic Wanderer",message:"The universe is not only stranger than we imagine, it is stranger than we can imagine. Embrace the mystery. âœ¨",timestamp:new Date(Date.now()-72e5),reactions:{light:20,gratitude:15,wisdom:25}}];document.getElementById("wisdom-feed").innerHTML=e.map(e=>this.createWisdomPost(e)).join("")}createWisdomPost(e){return`\n            <div class="wisdom-post">\n                <div class="post-header">\n                    <div class="post-author">${e.author}</div>\n                    <div class="post-time">${this.formatRelativeTime(e.timestamp)}</div>\n                </div>\n                <div class="post-message">${e.message}</div>\n                <div class="post-reactions">\n                    <button class="reaction-btn" data-reaction="light">\n                        ğŸŒŸ ${e.reactions.light}\n                    </button>\n                    <button class="reaction-btn" data-reaction="gratitude">\n                        ğŸ™ ${e.reactions.gratitude}\n                    </button>\n                    <button class="reaction-btn" data-reaction="wisdom">\n                        ğŸ’« ${e.reactions.wisdom}\n                    </button>\n                </div>\n            </div>\n        `}formatRelativeTime(e){const t=new Date-e,i=Math.floor(t/6e4),n=Math.floor(t/36e5);return i<60?`${i}m ago`:`${n}h ago`}updateRoomCounts(){const e={"meditation-sanctuary":Math.floor(8*Math.random())+1,"chakra-healing":Math.floor(6*Math.random())+1,"oracle-sharing":Math.floor(5*Math.random())+1,"manifestation-circle":Math.floor(7*Math.random())+1};Object.entries(e).forEach(([e,t])=>{const i=document.querySelector(`[data-room="${e}"] .room-members`);i&&(i.textContent=`${t} soul${1!==t?"s":""} present`)})}simulateRoomUpdates(){this.updateRoomCounts(),Math.random()<.3&&this.addRandomWisdomPost()}addRandomWisdomPost(){const e=["The light you seek is already within you. Trust your inner knowing. âœ¨","Today is a perfect day for miracles and magical moments. ğŸŒŸ","Gratitude transforms ordinary moments into sacred blessings. ğŸ™","Your soul knows the way. Listen to its gentle whispers. ğŸ’«","In unity, we find strength. In diversity, we find beauty. ğŸŒˆ"],t=["Mystic Sage","Divine Light","Sacred Heart","Cosmic Truth","Radiant Soul","Eternal Wisdom","Celestial Guide"],i={author:t[Math.floor(Math.random()*t.length)],message:e[Math.floor(Math.random()*e.length)],timestamp:new Date,reactions:{light:0,gratitude:0,wisdom:0}},n=document.getElementById("wisdom-feed"),o=document.createElement("div");o.innerHTML=this.createWisdomPost(i),o.style.animation="fadeInUp 0.6s ease-out",n.insertBefore(o.firstElementChild,n.firstChild),this.showCommunityNotification(`ğŸ’« New wisdom shared by ${i.author}`)}updateMembersList(){const e=[{name:this.userName,status:"online",activity:"In Sacred Space"},{name:"Luminous Guide",status:"meditating",activity:"Meditation Sanctuary"},{name:"Sacred Healer",status:"online",activity:"Chakra Healing Circle"},{name:"Cosmic Wanderer",status:"sharing",activity:"Oracle Wisdom Sharing"},{name:"Divine Light",status:"manifesting",activity:"Manifestation Circle"}];document.getElementById("members-list").innerHTML=e.map(e=>`\n            <div class="member-item ${e.name===this.userName?"current-user":""}">\n                <div class="member-avatar">\n                    <div class="avatar-icon">${this.getAvatarIcon(e.name)}</div>\n                    <div class="status-indicator ${e.status}"></div>\n                </div>\n                <div class="member-info">\n                    <div class="member-name">${e.name}</div>\n                    <div class="member-activity">${e.activity}</div>\n                </div>\n                ${e.name!==this.userName?`\n                    <button class="connect-btn" onclick="divineComms.connectToMember('${e.name}')">\n                        ğŸ’« Connect\n                    </button>\n                `:""}\n            </div>\n        `).join("")}getAvatarIcon(e){const t=["ğŸŒŸ","ğŸ”®","ğŸ§˜â€â™€ï¸","ğŸ§˜â€â™‚ï¸","âœ¨","ğŸ’«","ğŸŒ™","â˜€ï¸","ğŸ¦‹","ğŸŒˆ"];return t[e.length%t.length]}toggleCommunityPanel(){document.getElementById("community-panel").classList.toggle("community-panel-open")}closeCommunityPanel(){document.getElementById("community-panel").classList.remove("community-panel-open")}editUserName(){const e=prompt("Enter your sacred name:",this.userName);e&&e.trim()&&(this.userName=e.trim(),localStorage.setItem("divine-temple-user-name",this.userName),document.querySelector(".user-name").textContent=this.userName,this.updateMembersList(),this.showCommunityNotification(`âœ¨ Your sacred name is now: ${this.userName}`))}joinRoom(e){this.currentRoom!==e?(this.currentRoom=e,this.showRoomInterface(e),this.showCommunityNotification(`ğŸŒŸ Joined ${this.getRoomName(e)}`)):this.showCommunityNotification("ğŸ›ï¸ You are already in this sacred space")}getRoomName(e){return{"meditation-sanctuary":"Meditation Sanctuary","chakra-healing":"Chakra Healing Circle","oracle-sharing":"Oracle Wisdom Sharing","manifestation-circle":"Manifestation Circle"}[e]||e}showRoomInterface(e){const t=document.createElement("div");t.className="room-overlay",t.innerHTML=`\n            <div class="room-interface">\n                <div class="room-header">\n                    <h3>ğŸ›ï¸ ${this.getRoomName(e)}</h3>\n                    <button class="leave-room-btn" onclick="divineComms.leaveRoom()">Leave Sacred Space</button>\n                </div>\n                \n                <div class="room-content">\n                    <div class="room-participants">\n                        <h4>ğŸ‘¥ Present Souls</h4>\n                        <div class="participants-list" id="participants-list">\n                            \x3c!-- Participants will be added here --\x3e\n                        </div>\n                    </div>\n                    \n                    <div class="room-activity">\n                        <div class="activity-feed" id="activity-feed">\n                            \x3c!-- Room activities will appear here --\x3e\n                        </div>\n                        \n                        <div class="room-controls">\n                            ${this.getRoomControls(e)}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `,document.body.appendChild(t),this.initializeRoomFeatures(e)}getRoomControls(e){switch(e){case"meditation-sanctuary":return'\n                    <button class="room-action-btn" onclick="divineComms.startGroupMeditation()">\n                        ğŸ§˜â€â™€ï¸ Start Group Meditation\n                    </button>\n                    <button class="room-action-btn" onclick="divineComms.sendMeditationBell()">\n                        ğŸ”” Ring Sacred Bell\n                    </button>\n                ';case"chakra-healing":return'\n                    <button class="room-action-btn" onclick="divineComms.shareEnergyHealing()">\n                        ğŸŒˆ Share Healing Energy\n                    </button>\n                    <button class="room-action-btn" onclick="divineComms.synchronizeChakras()">\n                        âš¡ Synchronize Chakras\n                    </button>\n                ';case"oracle-sharing":return'\n                    <button class="room-action-btn" onclick="divineComms.shareOracleReading()">\n                        ğŸ”® Share Oracle Reading\n                    </button>\n                    <button class="room-action-btn" onclick="divineComms.requestGuidance()">\n                        ğŸ’« Request Guidance\n                    </button>\n                ';case"manifestation-circle":return'\n                    <button class="room-action-btn" onclick="divineComms.shareIntention()">\n                        âœ¨ Share Intention\n                    </button>\n                    <button class="room-action-btn" onclick="divineComms.amplifyEnergy()">\n                        ğŸŒŸ Amplify Collective Energy\n                    </button>\n                ';default:return""}}initializeRoomFeatures(e){this.addRoomMessage("system",`Welcome to ${this.getRoomName(e)} ğŸŒŸ`),this.addRoomMessage("system",`${this.userName} has joined the sacred space âœ¨`),setTimeout(()=>{this.simulateRoomActivity(e)},2e3)}simulateRoomActivity(e){({"meditation-sanctuary":["Sacred Healer sent peaceful vibrations ğŸ•¯ï¸","Luminous Guide rang the meditation bell ğŸ””","Cosmic Wanderer shared a moment of gratitude ğŸ™"],"chakra-healing":["Divine Light shared healing energy for the heart chakra ğŸ’š","Mystic Sage aligned their root chakra ğŸ”´","Sacred Healer opened their third eye ğŸ’™"],"oracle-sharing":["Cosmic Wanderer drew The Star card â­","Luminous Guide shared insight about new beginnings ğŸŒ±","Divine Light requested guidance about their path ğŸ›¤ï¸"],"manifestation-circle":["Sacred Healer set intention for global healing ğŸŒ","Mystic Sage amplified energy for abundance ğŸ’°","Divine Light manifested love and compassion ğŸ’•"]}[e]||[]).forEach((e,t)=>{setTimeout(()=>{this.addRoomMessage("activity",e)},3e3*(t+1))})}addRoomMessage(e,t){const i=document.getElementById("activity-feed");if(!i)return;const n=document.createElement("div");n.className=`room-message ${e}`,n.innerHTML=`\n            <div class="message-content">${t}</div>\n            <div class="message-time">${(new Date).toLocaleTimeString()}</div>\n        `,i.appendChild(n),i.scrollTop=i.scrollHeight}leaveRoom(){const e=document.querySelector(".room-overlay");e&&e.remove(),this.currentRoom=null,this.showCommunityNotification("ğŸŒŸ Left the sacred space. Your light continues to shine.")}shareWisdom(){const e=document.querySelector(".wisdom-input"),t=e.value.trim();if(!t)return void this.showCommunityNotification("âš ï¸ Please enter your wisdom to share");const i={author:this.userName,message:t,timestamp:new Date,reactions:{light:0,gratitude:0,wisdom:0}},n=document.getElementById("wisdom-feed"),o=document.createElement("div");o.innerHTML=this.createWisdomPost(i),o.style.animation="fadeInUp 0.6s ease-out",n.insertBefore(o.firstElementChild,n.firstChild),e.value="",this.showCommunityNotification("âœ¨ Your wisdom has been shared with the community")}showCommunityNotification(e){const t=document.createElement("div");t.className="community-notification",t.innerHTML=`\n            <div class="notification-content">\n                <span class="notification-message">${e}</span>\n            </div>\n        `,document.body.appendChild(t),setTimeout(()=>t.classList.add("show"),100),setTimeout(()=>{t.classList.add("hide"),setTimeout(()=>t.remove(),300)},4e3)}startGroupMeditation(){this.addRoomMessage("action",`${this.userName} started a group meditation session ğŸ§˜â€â™€ï¸`),this.showCommunityNotification("ğŸ§˜â€â™€ï¸ Group meditation session started")}sendMeditationBell(){this.addRoomMessage("action",`${this.userName} rang the sacred bell ğŸ””`),this.showCommunityNotification("ğŸ”” Sacred bell resonates through the sanctuary")}shareEnergyHealing(){this.addRoomMessage("action",`${this.userName} shared healing energy ğŸŒˆ`),this.showCommunityNotification("ğŸŒˆ Healing energy flows through the circle")}synchronizeChakras(){this.addRoomMessage("action",`${this.userName} synchronized chakras with the group âš¡`),this.showCommunityNotification("âš¡ Chakras synchronized with divine frequency")}shareOracleReading(){const e=["The Star","The Moon","The Sun","The High Priestess","The Hermit"],t=e[Math.floor(Math.random()*e.length)];this.addRoomMessage("action",`${this.userName} shared oracle reading: ${t} â­`),this.showCommunityNotification(`ğŸ”® Oracle reading shared: ${t}`)}requestGuidance(){this.addRoomMessage("action",`${this.userName} requests divine guidance ğŸ’«`),this.showCommunityNotification("ğŸ’« Your request for guidance has been sent to the universe")}shareIntention(){this.addRoomMessage("action",`${this.userName} shared a sacred intention âœ¨`),this.showCommunityNotification("âœ¨ Your intention has been added to the collective energy")}amplifyEnergy(){this.addRoomMessage("action",`${this.userName} amplified the collective energy ğŸŒŸ`),this.showCommunityNotification("ğŸŒŸ Collective energy amplified! Feel the power of unity.")}connectToMember(e){this.showCommunityNotification(`ğŸ’« Divine connection request sent to ${e}`)}}const divineComms=new DivineTempleComms;window.divineComms=divineComms,console.log("ğŸ‘¥ Divine Temple Community System Phase 10 loaded successfully! âœ¨");