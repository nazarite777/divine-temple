class DivineThemeManager{constructor(){this.themes={"divine-light":{name:"Divine Light",icon:"‚òÄÔ∏è",description:"Celestial radiance for daytime spiritual practice",colors:{primary:"linear-gradient(135deg, #fef3c7, #fed7aa, #fbbf24)",secondary:"linear-gradient(135deg, #ddd6fe, #c7d2fe, #a5b4fc)",accent:"#f59e0b",accentSecondary:"#8b5cf6",background:"linear-gradient(135deg, #fefce8, #fef3c7, #fed7aa)",surface:"rgba(255, 255, 255, 0.9)",surfaceGlass:"rgba(255, 255, 255, 0.7)",text:"#1f2937",textSecondary:"#6b7280",border:"rgba(251, 191, 36, 0.3)",shadow:"rgba(245, 158, 11, 0.3)"},filters:{brightness:1.1,contrast:1.05,saturation:1.1}},"sacred-dark":{name:"Sacred Dark",icon:"üåô",description:"Mystical depths for nighttime contemplation",colors:{primary:"linear-gradient(135deg, #1a1a2e, #16213e, #0f3460)",secondary:"linear-gradient(135deg, #4c1d95, #5b21b6, #6d28d9)",accent:"#d4af37",accentSecondary:"#8b5fbf",background:"linear-gradient(135deg, #0f0f23, #1a1a2e, #16213e)",surface:"rgba(255, 255, 255, 0.1)",surfaceGlass:"rgba(255, 255, 255, 0.05)",text:"#f9fafb",textSecondary:"#d1d5db",border:"rgba(255, 255, 255, 0.2)",shadow:"rgba(212, 175, 55, 0.4)"},filters:{brightness:.9,contrast:1.1,saturation:1.2}},"aurora-dream":{name:"Aurora Dream",icon:"üåå",description:"Ethereal cosmic energies for transcendent experiences",colors:{primary:"linear-gradient(135deg, #1e1b4b, #312e81, #3730a3)",secondary:"linear-gradient(135deg, #0c4a6e, #0e7490, #0891b2)",accent:"#06b6d4",accentSecondary:"#8b5cf6",background:"linear-gradient(135deg, #0f0f23, #1e1b4b, #312e81)",surface:"rgba(6, 182, 212, 0.1)",surfaceGlass:"rgba(6, 182, 212, 0.05)",text:"#f0f9ff",textSecondary:"#bae6fd",border:"rgba(6, 182, 212, 0.3)",shadow:"rgba(6, 182, 212, 0.4)"},filters:{brightness:1,contrast:1.15,saturation:1.3}},"forest-sage":{name:"Forest Sage",icon:"üåø",description:"Earthy wisdom for grounded spiritual practice",colors:{primary:"linear-gradient(135deg, #1f2937, #374151, #4b5563)",secondary:"linear-gradient(135deg, #064e3b, #065f46, #047857)",accent:"#10b981",accentSecondary:"#6b7280",background:"linear-gradient(135deg, #111827, #1f2937, #374151)",surface:"rgba(16, 185, 129, 0.1)",surfaceGlass:"rgba(16, 185, 129, 0.05)",text:"#ecfdf5",textSecondary:"#a7f3d0",border:"rgba(16, 185, 129, 0.3)",shadow:"rgba(16, 185, 129, 0.4)"},filters:{brightness:.95,contrast:1.05,saturation:1.1}},"rose-mystique":{name:"Rose Mystique",icon:"üåπ",description:"Divine feminine energy for heart-centered practice",colors:{primary:"linear-gradient(135deg, #4c1d95, #5b21b6, #7c3aed)",secondary:"linear-gradient(135deg, #be185d, #e11d48, #f43f5e)",accent:"#ec4899",accentSecondary:"#8b5cf6",background:"linear-gradient(135deg, #1e1b4b, #4c1d95, #5b21b6)",surface:"rgba(236, 72, 153, 0.1)",surfaceGlass:"rgba(236, 72, 153, 0.05)",text:"#fdf2f8",textSecondary:"#f9a8d4",border:"rgba(236, 72, 153, 0.3)",shadow:"rgba(236, 72, 153, 0.4)"},filters:{brightness:1.05,contrast:1.1,saturation:1.25}}},this.preferences={theme:"sacred-dark",animations:"enhanced",fontSize:"medium",dashboardLayout:"grid",cardStyle:"glass",particleEffects:!0,soundEnabled:!0,autoTheme:!1,customAccent:null},this.init()}init(){console.log("üé® Initializing Divine Theme Manager Phase 9..."),this.loadPreferences(),this.applyTheme(),this.setupThemeToggle(),this.setupAutoTheme(),this.initializeCustomization()}loadPreferences(){const e=localStorage.getItem("divine-temple-preferences");e&&(this.preferences={...this.preferences,...JSON.parse(e)}),console.log("‚ú® Loaded user preferences:",this.preferences)}savePreferences(){localStorage.setItem("divine-temple-preferences",JSON.stringify(this.preferences)),console.log("üíæ Preferences saved")}applyTheme(e=this.preferences.theme){const t=this.themes[e];if(!t)return;console.log(`üé® Applying theme: ${t.name}`);const n=document.documentElement;Object.entries(t.colors).forEach(([e,t])=>{n.style.setProperty(`--theme-${e}`,t)}),Object.entries(t.filters).forEach(([e,t])=>{n.style.setProperty(`--filter-${e}`,t)}),document.body.className=document.body.className.replace(/theme-\w+/g,""),document.body.classList.add(`theme-${e}`),this.updateThemeElements(t),document.dispatchEvent(new CustomEvent("themeChanged",{detail:{theme:e,themeData:t}})),this.preferences.theme=e,this.savePreferences()}updateThemeElements(e){const t=document.querySelector('link[rel="icon"]');t&&(t.href=`/icons/temple-${e.name.toLowerCase().replace(" ","-")}.ico`);let n=document.querySelector('meta[name="theme-color"]');n||(n=document.createElement("meta"),n.name="theme-color",document.head.appendChild(n)),n.content=e.colors.accent,document.querySelectorAll("[data-theme-src]").forEach(e=>{const t=e.dataset.themeSrc;e.src=`${t}-${this.preferences.theme}.png`})}setupThemeToggle(){const e=document.createElement("div");e.className="theme-toggle-fab",e.innerHTML=`\n            <button class="theme-toggle-btn" onclick="divineThemeManager.toggleThemeMenu()">\n                üé®\n            </button>\n            <div class="theme-menu" id="theme-menu">\n                <div class="theme-menu-header">\n                    <h3>Sacred Themes ‚ú®</h3>\n                    <button class="theme-menu-close" onclick="divineThemeManager.closeThemeMenu()">√ó</button>\n                </div>\n                <div class="theme-options">\n                    ${Object.entries(this.themes).map(([e,t])=>`\n                        <div class="theme-option ${e===this.preferences.theme?"active":""}" \n                             data-theme="${e}" onclick="divineThemeManager.selectTheme('${e}')">\n                            <div class="theme-preview" style="background: ${t.colors.primary}">\n                                <div class="theme-icon">${t.icon}</div>\n                            </div>\n                            <div class="theme-info">\n                                <div class="theme-name">${t.name}</div>\n                                <div class="theme-desc">${t.description}</div>\n                            </div>\n                        </div>\n                    `).join("")}\n                </div>\n                <div class="theme-controls">\n                    <label class="theme-control">\n                        <input type="checkbox" ${this.preferences.autoTheme?"checked":""} \n                               onchange="divineThemeManager.toggleAutoTheme(this.checked)">\n                        <span>üåÖ Auto Theme (Day/Night)</span>\n                    </label>\n                </div>\n            </div>\n        `,document.body.appendChild(e)}toggleThemeMenu(){document.getElementById("theme-menu").classList.toggle("theme-menu-open")}closeThemeMenu(){document.getElementById("theme-menu").classList.remove("theme-menu-open")}selectTheme(e){document.querySelectorAll(".theme-option").forEach(e=>{e.classList.remove("active")}),document.querySelector(`[data-theme="${e}"]`).classList.add("active"),document.body.style.transition="all 0.8s cubic-bezier(0.4, 0, 0.2, 1)",this.applyTheme(e),setTimeout(()=>{document.body.style.transition=""},800),this.closeThemeMenu(),this.showThemeNotification(this.themes[e].name)}setupAutoTheme(){this.preferences.autoTheme&&this.enableAutoTheme()}toggleAutoTheme(e){this.preferences.autoTheme=e,this.savePreferences(),e?this.enableAutoTheme():this.disableAutoTheme()}enableAutoTheme(){const e=()=>{const e=(new Date).getHours(),t=e>=6&&e<20?"divine-light":"sacred-dark";t!==this.preferences.theme&&this.applyTheme(t)};e(),this.autoThemeInterval=setInterval(e,36e5),console.log("üåÖ Auto theme enabled")}disableAutoTheme(){this.autoThemeInterval&&(clearInterval(this.autoThemeInterval),this.autoThemeInterval=null),console.log("üåÖ Auto theme disabled")}initializeCustomization(){this.applyFontSize(),this.applyAnimationSettings(),this.applyLayoutSettings(),this.setupCustomization()}applyFontSize(){const e={small:"0.9rem",medium:"1rem",large:"1.1rem",xlarge:"1.2rem"};document.documentElement.style.setProperty("--base-font-size",e[this.preferences.fontSize]||e.medium)}applyAnimationSettings(){const e={none:"0s",reduced:"0.2s",normal:"0.4s",enhanced:"0.6s"};document.documentElement.style.setProperty("--animation-duration",e[this.preferences.animations]||e.enhanced),"none"===this.preferences.animations?document.body.classList.add("no-animations"):document.body.classList.remove("no-animations")}applyLayoutSettings(){document.body.classList.remove("layout-grid","layout-list","layout-cards"),document.body.classList.add(`layout-${this.preferences.dashboardLayout}`),document.body.classList.remove("card-glass","card-solid","card-minimal"),document.body.classList.add(`card-${this.preferences.cardStyle}`)}setupCustomization(){const e=document.createElement("div");e.id="customization-panel",e.innerHTML=`\n            <div class="custom-panel-header">\n                <h3>‚öôÔ∏è Personalization</h3>\n                <button onclick="this.parentElement.parentElement.classList.toggle('panel-open')">‚öôÔ∏è</button>\n            </div>\n            <div class="custom-panel-content">\n                <div class="custom-section">\n                    <label>Font Size</label>\n                    <select onchange="divineThemeManager.changeFontSize(this.value)">\n                        <option value="small" ${"small"===this.preferences.fontSize?"selected":""}>Small</option>\n                        <option value="medium" ${"medium"===this.preferences.fontSize?"selected":""}>Medium</option>\n                        <option value="large" ${"large"===this.preferences.fontSize?"selected":""}>Large</option>\n                        <option value="xlarge" ${"xlarge"===this.preferences.fontSize?"selected":""}>Extra Large</option>\n                    </select>\n                </div>\n                \n                <div class="custom-section">\n                    <label>Animations</label>\n                    <select onchange="divineThemeManager.changeAnimations(this.value)">\n                        <option value="none" ${"none"===this.preferences.animations?"selected":""}>None</option>\n                        <option value="reduced" ${"reduced"===this.preferences.animations?"selected":""}>Reduced</option>\n                        <option value="normal" ${"normal"===this.preferences.animations?"selected":""}>Normal</option>\n                        <option value="enhanced" ${"enhanced"===this.preferences.animations?"selected":""}>Enhanced</option>\n                    </select>\n                </div>\n                \n                <div class="custom-section">\n                    <label>Dashboard Layout</label>\n                    <select onchange="divineThemeManager.changeLayout(this.value)">\n                        <option value="grid" ${"grid"===this.preferences.dashboardLayout?"selected":""}>Grid</option>\n                        <option value="list" ${"list"===this.preferences.dashboardLayout?"selected":""}>List</option>\n                        <option value="cards" ${"cards"===this.preferences.dashboardLayout?"selected":""}>Cards</option>\n                    </select>\n                </div>\n                \n                <div class="custom-section">\n                    <label>Card Style</label>\n                    <select onchange="divineThemeManager.changeCardStyle(this.value)">\n                        <option value="glass" ${"glass"===this.preferences.cardStyle?"selected":""}>Glass</option>\n                        <option value="solid" ${"solid"===this.preferences.cardStyle?"selected":""}>Solid</option>\n                        <option value="minimal" ${"minimal"===this.preferences.cardStyle?"selected":""}>Minimal</option>\n                    </select>\n                </div>\n                \n                <div class="custom-section">\n                    <label class="custom-checkbox">\n                        <input type="checkbox" ${this.preferences.particleEffects?"checked":""} \n                               onchange="divineThemeManager.toggleParticles(this.checked)">\n                        <span>‚ú® Particle Effects</span>\n                    </label>\n                </div>\n                \n                <div class="custom-section">\n                    <button class="reset-btn" onclick="divineThemeManager.resetToDefaults()">\n                        üîÑ Reset to Defaults\n                    </button>\n                </div>\n            </div>\n        `,document.body.appendChild(e)}changeFontSize(e){this.preferences.fontSize=e,this.applyFontSize(),this.savePreferences()}changeAnimations(e){this.preferences.animations=e,this.applyAnimationSettings(),this.savePreferences()}changeLayout(e){this.preferences.dashboardLayout=e,this.applyLayoutSettings(),this.savePreferences()}changeCardStyle(e){this.preferences.cardStyle=e,this.applyLayoutSettings(),this.savePreferences()}toggleParticles(e){this.preferences.particleEffects=e,document.body.classList.toggle("no-particles",!e),this.savePreferences()}resetToDefaults(){this.preferences={theme:"sacred-dark",animations:"enhanced",fontSize:"medium",dashboardLayout:"grid",cardStyle:"glass",particleEffects:!0,soundEnabled:!0,autoTheme:!1,customAccent:null},this.savePreferences(),window.location.reload()}showThemeNotification(e){const t=document.createElement("div");t.className="theme-notification",t.innerHTML=`\n            <div class="theme-notification-content">\n                <span class="theme-notification-icon">üé®</span>\n                <span>Switched to ${e} theme</span>\n            </div>\n        `,document.body.appendChild(t),setTimeout(()=>t.classList.add("show"),100),setTimeout(()=>{t.classList.add("hide"),setTimeout(()=>t.remove(),300)},3e3)}exportPreferences(){const e={preferences:this.preferences,exported:(new Date).toISOString(),version:"9.0"},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),n=URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download="divine-temple-preferences.json",a.click(),URL.revokeObjectURL(n)}importPreferences(e){const t=new FileReader;t.onload=e=>{try{const t=JSON.parse(e.target.result);t.preferences&&(this.preferences={...this.preferences,...t.preferences},this.savePreferences(),window.location.reload())}catch(e){console.error("Failed to import preferences:",e)}},t.readAsText(e)}}const divineThemeManager=new DivineThemeManager;window.divineThemeManager=divineThemeManager,console.log("üé® Divine Temple Theme Manager Phase 9 loaded successfully! ‚ú®");